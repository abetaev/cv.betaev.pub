(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();const Ne={};function s1(n){Ne.context=n}const o1=(n,t)=>n===t,ve=Symbol("solid-proxy"),Ds=Symbol("solid-track"),Fo={equals:o1};let Bg=Ug;const qn=1,jo=2,Fg={owned:null,cleanups:null,context:null,owner:null},Dl={};var ge=null;let Wi=null,se=null,Ie=null,Hn=null,Ba=0;function vs(n,t){const e=se,i=ge,r=n.length===0,s=r?Fg:{owned:null,cleanups:null,context:null,owner:t===void 0?i:t},o=r?n:()=>n(()=>mn(()=>ja(s)));ge=s,se=null;try{return gi(o,!0)}finally{se=e,ge=i}}function ee(n,t){t=t?Object.assign({},Fo,t):Fo;const e={value:n,observers:null,observerSlots:null,comparator:t.equals||void 0},i=r=>(typeof r=="function"&&(r=r(e.value)),Wg(e,r));return[Vg.bind(e),i]}function af(n,t,e){const i=Fa(n,t,!0,qn);qr(i)}function Oe(n,t,e){const i=Fa(n,t,!1,qn);qr(i)}function sr(n,t,e){Bg=p1;const i=Fa(n,t,!1,qn);i.user=!0,Hn?Hn.push(i):qr(i)}function Re(n,t,e){e=e?Object.assign({},Fo,e):Fo;const i=Fa(n,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=e.equals||void 0,qr(i),Vg.bind(i)}function a1(n,t,e){let i,r,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(i=!0,r=n,s=t||{}):(i=n,r=t,s=e||{});let o=null,a=Dl,l=null,c=!1,u="initialValue"in s,h=typeof i=="function"&&Re(i);const f=new Set,[d,p]=(s.storage||ee)(s.initialValue),[m,v]=ee(void 0),[C,E]=ee(void 0,{equals:!1}),[F,q]=ee(u?"ready":"unresolved");if(Ne.context){l=`${Ne.context.id}${Ne.context.count++}`;let rt;s.ssrLoadFrom==="initial"?a=s.initialValue:Ne.load&&(rt=Ne.load(l))&&(a=rt[0])}function j(rt,pt,ut,kt){return o===rt&&(o=null,u=!0,(rt===a||pt===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(kt,{value:pt})),a=Dl,A(pt,ut)),pt}function A(rt,pt){gi(()=>{pt===void 0&&p(()=>rt),q(pt!==void 0?"errored":"ready"),v(pt);for(const ut of f.keys())ut.decrement();f.clear()},!1)}function R(){const rt=h1,pt=d(),ut=m();if(ut!==void 0&&!o)throw ut;return se&&!se.user&&rt&&af(()=>{C(),o&&(rt.resolved||f.has(rt)||(rt.increment(),f.add(rt)))}),pt}function L(rt=!0){if(rt!==!1&&c)return;c=!1;const pt=h?h():i;if(pt==null||pt===!1){j(o,mn(d));return}const ut=a!==Dl?a:mn(()=>r(pt,{value:d(),refetching:rt}));return typeof ut!="object"||!(ut&&"then"in ut)?(j(o,ut,void 0,pt),ut):(o=ut,c=!0,queueMicrotask(()=>c=!1),gi(()=>{q(u?"refreshing":"pending"),E()},!1),ut.then(kt=>j(ut,kt,void 0,pt),kt=>j(ut,void 0,Kg(kt),pt)))}return Object.defineProperties(R,{state:{get:()=>F()},error:{get:()=>m()},loading:{get(){const rt=F();return rt==="pending"||rt==="refreshing"}},latest:{get(){if(!u)return R();const rt=m();if(rt&&!o)throw rt;return d()}}}),h?af(()=>L(!1)):L(!1),[R,{refetch:L,mutate:p}]}function ws(n){return gi(n,!1)}function mn(n){if(se===null)return n();const t=se;se=null;try{return n()}finally{se=t}}function jg(n){return ge===null||(ge.cleanups===null?ge.cleanups=[n]:ge.cleanups.push(n)),n}function Cu(){return se}function l1(){return ge}function c1(n,t){const e=Symbol("context");return{id:e,Provider:g1(e),defaultValue:n}}function u1(n){let t;return(t=Gg(ge,n.id))!==void 0?t:n.defaultValue}function Hg(n){const t=Re(n),e=Re(()=>Ec(t()));return e.toArray=()=>{const i=e();return Array.isArray(i)?i:i!=null?[i]:[]},e}let h1;function Vg(){const n=Wi;if(this.sources&&(this.state||n))if(this.state===qn||n)qr(this);else{const t=Ie;Ie=null,gi(()=>Vo(this),!1),Ie=t}if(se){const t=this.observers?this.observers.length:0;se.sources?(se.sources.push(this),se.sourceSlots.push(t)):(se.sources=[this],se.sourceSlots=[t]),this.observers?(this.observers.push(se),this.observerSlots.push(se.sources.length-1)):(this.observers=[se],this.observerSlots=[se.sources.length-1])}return this.value}function Wg(n,t,e){let i=n.value;return(!n.comparator||!n.comparator(i,t))&&(n.value=t,n.observers&&n.observers.length&&gi(()=>{for(let r=0;r<n.observers.length;r+=1){const s=n.observers[r],o=Wi&&Wi.running;o&&Wi.disposed.has(s),(o&&!s.tState||!o&&!s.state)&&(s.pure?Ie.push(s):Hn.push(s),s.observers&&qg(s)),o||(s.state=qn)}if(Ie.length>1e6)throw Ie=[],new Error},!1)),t}function qr(n){if(!n.fn)return;ja(n);const t=ge,e=se,i=Ba;se=ge=n,f1(n,n.value,i),se=e,ge=t}function f1(n,t,e){let i;try{i=n.fn(t)}catch(r){return n.pure&&(n.state=qn,n.owned&&n.owned.forEach(ja),n.owned=null),n.updatedAt=e+1,Jg(r)}(!n.updatedAt||n.updatedAt<=e)&&(n.updatedAt!=null&&"observers"in n?Wg(n,i):n.value=i,n.updatedAt=e)}function Fa(n,t,e,i=qn,r){const s={fn:n,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ge,context:null,pure:e};return ge===null||ge!==Fg&&(ge.owned?ge.owned.push(s):ge.owned=[s]),s}function Ho(n){const t=Wi;if(n.state===0||t)return;if(n.state===jo||t)return Vo(n);if(n.suspense&&mn(n.suspense.inFallback))return n.suspense.effects.push(n);const e=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<Ba);)(n.state||t)&&e.push(n);for(let i=e.length-1;i>=0;i--)if(n=e[i],n.state===qn||t)qr(n);else if(n.state===jo||t){const r=Ie;Ie=null,gi(()=>Vo(n,e[0]),!1),Ie=r}}function gi(n,t){if(Ie)return n();let e=!1;t||(Ie=[]),Hn?e=!0:Hn=[],Ba++;try{const i=n();return d1(e),i}catch(i){e||(Hn=null),Ie=null,Jg(i)}}function d1(n){if(Ie&&(Ug(Ie),Ie=null),n)return;const t=Hn;Hn=null,t.length&&gi(()=>Bg(t),!1)}function Ug(n){for(let t=0;t<n.length;t++)Ho(n[t])}function p1(n){let t,e=0;for(t=0;t<n.length;t++){const i=n[t];i.user?n[e++]=i:Ho(i)}for(Ne.context&&s1(),t=0;t<e;t++)Ho(n[t])}function Vo(n,t){const e=Wi;n.state=0;for(let i=0;i<n.sources.length;i+=1){const r=n.sources[i];r.sources&&(r.state===qn||e?r!==t&&(!r.updatedAt||r.updatedAt<Ba)&&Ho(r):(r.state===jo||e)&&Vo(r,t))}}function qg(n){const t=Wi;for(let e=0;e<n.observers.length;e+=1){const i=n.observers[e];(!i.state||t)&&(i.state=jo,i.pure?Ie.push(i):Hn.push(i),i.observers&&qg(i))}}function ja(n){let t;if(n.sources)for(;n.sources.length;){const e=n.sources.pop(),i=n.sourceSlots.pop(),r=e.observers;if(r&&r.length){const s=r.pop(),o=e.observerSlots.pop();i<r.length&&(s.sourceSlots[o]=i,r[i]=s,e.observerSlots[i]=o)}}if(n.owned){for(t=0;t<n.owned.length;t++)ja(n.owned[t]);n.owned=null}if(n.cleanups){for(t=0;t<n.cleanups.length;t++)n.cleanups[t]();n.cleanups=null}n.state=0,n.context=null}function Kg(n){return n instanceof Error||typeof n=="string"?n:new Error("Unknown error")}function Jg(n){throw n=Kg(n),n}function Gg(n,t){return n?n.context&&n.context[t]!==void 0?n.context[t]:Gg(n.owner,t):void 0}function Ec(n){if(typeof n=="function"&&!n.length)return Ec(n());if(Array.isArray(n)){const t=[];for(let e=0;e<n.length;e++){const i=Ec(n[e]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}return n}function g1(n,t){return function(i){let r;return Oe(()=>r=mn(()=>(ge.context={[n]:i.value},Hg(()=>i.children))),void 0),r}}function m1(n){return{subscribe(t){if(!(t instanceof Object)||t==null)throw new TypeError("Expected the observer to be an object.");const e=typeof t=="function"?t:t.next&&t.next.bind(t);if(!e)return{unsubscribe(){}};const i=vs(r=>(sr(()=>{const s=n();mn(()=>e(s))}),r));return l1()&&jg(i),{unsubscribe(){i()}}},[Symbol.observable||"@@observable"](){return this}}}const b1=Symbol("fallback");function lf(n){for(let t=0;t<n.length;t++)n[t]()}function y1(n,t,e={}){let i=[],r=[],s=[],o=0,a=t.length>1?[]:null;return jg(()=>lf(s)),()=>{let l=n()||[],c,u;return l[Ds],mn(()=>{let f=l.length,d,p,m,v,C,E,F,q,j;if(f===0)o!==0&&(lf(s),s=[],i=[],r=[],o=0,a&&(a=[])),e.fallback&&(i=[b1],r[0]=vs(A=>(s[0]=A,e.fallback())),o=1);else if(o===0){for(r=new Array(f),u=0;u<f;u++)i[u]=l[u],r[u]=vs(h);o=f}else{for(m=new Array(f),v=new Array(f),a&&(C=new Array(f)),E=0,F=Math.min(o,f);E<F&&i[E]===l[E];E++);for(F=o-1,q=f-1;F>=E&&q>=E&&i[F]===l[q];F--,q--)m[q]=r[F],v[q]=s[F],a&&(C[q]=a[F]);for(d=new Map,p=new Array(q+1),u=q;u>=E;u--)j=l[u],c=d.get(j),p[u]=c===void 0?-1:c,d.set(j,u);for(c=E;c<=F;c++)j=i[c],u=d.get(j),u!==void 0&&u!==-1?(m[u]=r[c],v[u]=s[c],a&&(C[u]=a[c]),u=p[u],d.set(j,u)):s[c]();for(u=E;u<f;u++)u in m?(r[u]=m[u],s[u]=v[u],a&&(a[u]=C[u],a[u](u))):r[u]=vs(h);r=r.slice(0,o=f),i=l.slice(0)}return r});function h(f){if(s[u]=f,a){const[d,p]=ee(u);return a[u]=p,t(l[u],d)}return t(l[u])}}}function I(n,t){return mn(()=>n(t||{}))}function ao(){return!0}const $c={get(n,t,e){return t===ve?e:n.get(t)},has(n,t){return t===ve?!0:n.has(t)},set:ao,deleteProperty:ao,getOwnPropertyDescriptor(n,t){return{configurable:!0,enumerable:!0,get(){return n.get(t)},set:ao,deleteProperty:ao}},ownKeys(n){return n.keys()}};function Il(n){return(n=typeof n=="function"?n():n)?n:{}}function Un(...n){let t=!1;for(let i=0;i<n.length;i++){const r=n[i];t=t||!!r&&ve in r,n[i]=typeof r=="function"?(t=!0,Re(r)):r}if(t)return new Proxy({get(i){for(let r=n.length-1;r>=0;r--){const s=Il(n[r])[i];if(s!==void 0)return s}},has(i){for(let r=n.length-1;r>=0;r--)if(i in Il(n[r]))return!0;return!1},keys(){const i=[];for(let r=0;r<n.length;r++)i.push(...Object.keys(Il(n[r])));return[...new Set(i)]}},$c);const e={};for(let i=n.length-1;i>=0;i--)if(n[i]){const r=Object.getOwnPropertyDescriptors(n[i]);for(const s in r)s in e||Object.defineProperty(e,s,{enumerable:!0,get(){for(let o=n.length-1;o>=0;o--){const a=(n[o]||{})[s];if(a!==void 0)return a}}})}return e}function yn(n,...t){const e=new Set(t.flat());if(ve in n){const r=t.map(s=>new Proxy({get(o){return s.includes(o)?n[o]:void 0},has(o){return s.includes(o)&&o in n},keys(){return s.filter(o=>o in n)}},$c));return r.push(new Proxy({get(s){return e.has(s)?void 0:n[s]},has(s){return e.has(s)?!1:s in n},keys(){return Object.keys(n).filter(s=>!e.has(s))}},$c)),r}const i=Object.getOwnPropertyDescriptors(n);return t.push(Object.keys(i).filter(r=>!e.has(r))),t.map(r=>{const s={};for(let o=0;o<r.length;o++){const a=r[o];a in n&&Object.defineProperty(s,a,i[a]?i[a]:{get(){return n[a]},set(){return!0},enumerable:!0})}return s})}function Mr(n){const t="fallback"in n&&{fallback:()=>n.fallback};return Re(y1(()=>n.each,n.children,t||void 0))}function Ce(n){let t=!1;const e=n.keyed,i=Re(()=>n.when,void 0,{equals:(r,s)=>t?r===s:!r==!s});return Re(()=>{const r=i();if(r){const s=n.children,o=typeof s=="function"&&s.length>0;return t=e||o,o?mn(()=>s(r)):s}return n.fallback},void 0,void 0)}function Kr(n){let t=!1,e=!1;const i=(o,a)=>o[0]===a[0]&&(t?o[1]===a[1]:!o[1]==!a[1])&&o[2]===a[2],r=Hg(()=>n.children),s=Re(()=>{let o=r();Array.isArray(o)||(o=[o]);for(let a=0;a<o.length;a++){const l=o[a].when;if(l)return e=!!o[a].keyed,[a,l,o[a]]}return[-1]},void 0,{equals:i});return Re(()=>{const[o,a,l]=s();if(o<0)return n.fallback;const c=l.children,u=typeof c=="function"&&c.length>0;return t=e||u,u?mn(()=>c(a)):c},void 0,void 0)}function Je(n){return n}const x1=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],v1=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...x1]),w1=new Set(["innerHTML","textContent","innerText","children"]),S1=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),cf=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),_1=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),k1={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function M1(n,t,e){let i=e.length,r=t.length,s=i,o=0,a=0,l=t[r-1].nextSibling,c=null;for(;o<r||a<s;){if(t[o]===e[a]){o++,a++;continue}for(;t[r-1]===e[s-1];)r--,s--;if(r===o){const u=s<i?a?e[a-1].nextSibling:e[s-a]:l;for(;a<s;)n.insertBefore(e[a++],u)}else if(s===a)for(;o<r;)(!c||!c.has(t[o]))&&t[o].remove(),o++;else if(t[o]===e[s-1]&&e[a]===t[r-1]){const u=t[--r].nextSibling;n.insertBefore(e[a++],t[o++].nextSibling),n.insertBefore(e[--s],u),t[r]=e[s]}else{if(!c){c=new Map;let h=a;for(;h<s;)c.set(e[h],h++)}const u=c.get(t[o]);if(u!=null)if(a<u&&u<s){let h=o,f=1,d;for(;++h<r&&h<s&&!((d=c.get(t[h]))==null||d!==u+f);)f++;if(f>u-a){const p=t[o];for(;a<u;)n.insertBefore(e[a++],p)}else n.replaceChild(e[a++],t[o++])}else o++;else t[o++].remove()}}}const uf="_$DX_DELEGATE";function Yg(n,t,e,i={}){let r;return vs(s=>{r=s,t===document?n():J(t,n(),t.firstChild?null:void 0,e)},i.owner),()=>{r(),t.textContent=""}}function St(n,t,e){const i=document.createElement("template");if(i.innerHTML=n,t&&i.innerHTML.split("<").length-1!==t)throw`The browser resolved template HTML does not match JSX input:
${i.innerHTML}

${n}. Is your HTML properly formed?`;let r=i.content.firstChild;return e&&(r=r.firstChild),r}function Si(n,t=window.document){const e=t[uf]||(t[uf]=new Set);for(let i=0,r=n.length;i<r;i++){const s=n[i];e.has(s)||(e.add(s),t.addEventListener(s,P1))}}function Cr(n,t,e){e==null?n.removeAttribute(t):n.setAttribute(t,e)}function C1(n,t,e,i){i==null?n.removeAttributeNS(t,e):n.setAttributeNS(t,e,i)}function Xg(n,t){t==null?n.removeAttribute("class"):n.className=t}function O1(n,t,e,i){if(i)Array.isArray(e)?(n[`$$${t}`]=e[0],n[`$$${t}Data`]=e[1]):n[`$$${t}`]=e;else if(Array.isArray(e)){const r=e[0];n.addEventListener(t,e[0]=s=>r.call(n,e[1],s))}else n.addEventListener(t,e)}function A1(n,t,e={}){const i=Object.keys(t||{}),r=Object.keys(e);let s,o;for(s=0,o=r.length;s<o;s++){const a=r[s];!a||a==="undefined"||t[a]||(hf(n,a,!1),delete e[a])}for(s=0,o=i.length;s<o;s++){const a=i[s],l=!!t[a];!a||a==="undefined"||e[a]===l||!l||(hf(n,a,!0),e[a]=l)}return e}function T1(n,t,e){if(!t)return e?Cr(n,"style"):t;const i=n.style;if(typeof t=="string")return i.cssText=t;typeof e=="string"&&(i.cssText=e=void 0),e||(e={}),t||(t={});let r,s;for(s in e)t[s]==null&&i.removeProperty(s),delete e[s];for(s in t)r=t[s],r!==e[s]&&(i.setProperty(s,r),e[s]=r);return e}function _i(n,t={},e,i){const r={};return i||Oe(()=>r.children=$r(n,t.children,r.children)),Oe(()=>t.ref&&t.ref(n)),Oe(()=>E1(n,t,e,!0,r,!0)),r}function Qg(n,t,e){return mn(()=>n(t,e))}function J(n,t,e,i){if(e!==void 0&&!i&&(i=[]),typeof t!="function")return $r(n,t,i,e);Oe(r=>$r(n,t(),r,e),i)}function E1(n,t,e,i,r={},s=!1){t||(t={});for(const o in r)if(!(o in t)){if(o==="children")continue;r[o]=ff(n,o,null,r[o],e,s)}for(const o in t){if(o==="children"){i||$r(n,t.children);continue}const a=t[o];r[o]=ff(n,o,a,r[o],e,s)}}function $1(n){return n.toLowerCase().replace(/-([a-z])/g,(t,e)=>e.toUpperCase())}function hf(n,t,e){const i=t.trim().split(/\s+/);for(let r=0,s=i.length;r<s;r++)n.classList.toggle(i[r],e)}function ff(n,t,e,i,r,s){let o,a,l;if(t==="style")return T1(n,e,i);if(t==="classList")return A1(n,e,i);if(e===i)return i;if(t==="ref")s||e(n);else if(t.slice(0,3)==="on:"){const c=t.slice(3);i&&n.removeEventListener(c,i),e&&n.addEventListener(c,e)}else if(t.slice(0,10)==="oncapture:"){const c=t.slice(10);i&&n.removeEventListener(c,i,!0),e&&n.addEventListener(c,e,!0)}else if(t.slice(0,2)==="on"){const c=t.slice(2).toLowerCase(),u=_1.has(c);if(!u&&i){const h=Array.isArray(i)?i[0]:i;n.removeEventListener(c,h)}(u||e)&&(O1(n,c,e,u),u&&Si([c]))}else if((l=w1.has(t))||!r&&(cf[t]||(a=v1.has(t)))||(o=n.nodeName.includes("-")))t==="class"||t==="className"?Xg(n,e):o&&!a&&!l?n[$1(t)]=e:n[cf[t]||t]=e;else{const c=r&&t.indexOf(":")>-1&&k1[t.split(":")[0]];c?C1(n,c,t,e):Cr(n,S1[t]||t,e)}return e}function P1(n){const t=`$$${n.type}`;let e=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==e&&Object.defineProperty(n,"target",{configurable:!0,value:e}),Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return e||document}}),Ne.registry&&!Ne.done&&(Ne.done=_$HY.done=!0);e;){const i=e[t];if(i&&!e.disabled){const r=e[`${t}Data`];if(r!==void 0?i.call(e,r,n):i.call(e,n),n.cancelBubble)return}e=e._$host||e.parentNode||e.host}}function $r(n,t,e,i,r){for(Ne.context&&!e&&(e=[...n.childNodes]);typeof e=="function";)e=e();if(t===e)return e;const s=typeof t,o=i!==void 0;if(n=o&&e[0]&&e[0].parentNode||n,s==="string"||s==="number"){if(Ne.context)return e;if(s==="number"&&(t=t.toString()),o){let a=e[0];a&&a.nodeType===3?a.data=t:a=document.createTextNode(t),e=cr(n,e,i,a)}else e!==""&&typeof e=="string"?e=n.firstChild.data=t:e=n.textContent=t}else if(t==null||s==="boolean"){if(Ne.context)return e;e=cr(n,e,i)}else{if(s==="function")return Oe(()=>{let a=t();for(;typeof a=="function";)a=a();e=$r(n,a,e,i)}),()=>e;if(Array.isArray(t)){const a=[],l=e&&Array.isArray(e);if(Pc(a,t,e,r))return Oe(()=>e=$r(n,a,e,i,!0)),()=>e;if(Ne.context){if(!a.length)return e;for(let c=0;c<a.length;c++)if(a[c].parentNode)return e=a}if(a.length===0){if(e=cr(n,e,i),o)return e}else l?e.length===0?df(n,a,i):M1(n,e,a):(e&&cr(n),df(n,a));e=a}else if(t instanceof Node){if(Ne.context&&t.parentNode)return e=o?[t]:t;if(Array.isArray(e)){if(o)return e=cr(n,e,i,t);cr(n,e,null,t)}else e==null||e===""||!n.firstChild?n.appendChild(t):n.replaceChild(t,n.firstChild);e=t}else console.warn("Unrecognized value. Skipped inserting",t)}return e}function Pc(n,t,e,i){let r=!1;for(let s=0,o=t.length;s<o;s++){let a=t[s],l=e&&e[s];if(a instanceof Node)n.push(a);else if(!(a==null||a===!0||a===!1))if(Array.isArray(a))r=Pc(n,a,l)||r;else if(typeof a=="function")if(i){for(;typeof a=="function";)a=a();r=Pc(n,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||r}else n.push(a),r=!0;else{const c=String(a);c==="<!>"?l&&l.nodeType===8&&n.push(l):l&&l.nodeType===3&&l.data===c?n.push(l):n.push(document.createTextNode(c))}}return r}function df(n,t,e=null){for(let i=0,r=t.length;i<r;i++)n.insertBefore(t[i],e)}function cr(n,t,e,i){if(e===void 0)return n.textContent="";const r=i||document.createTextNode("");if(t.length){let s=!1;for(let o=t.length-1;o>=0;o--){const a=t[o];if(r!==a){const l=a.parentNode===n;!s&&!o?l?n.replaceChild(r,a):n.insertBefore(r,e):l&&a.remove()}else s=!0}}else n.insertBefore(r,e);return[r]}const[Dc,D1]=ee("view");document.body.classList.add("mode-view");m1(Dc).subscribe(n=>n[0]);const fe={get(){return u1(Ou)??Dc()},set(n){document.body.classList.remove(`mode-${Dc()}`),D1(n),document.body.classList.add(`mode-${n}`)}},Ou=c1();const I1=St("<span></span>",2),De=n=>{const[t,e]=yn(n,["class","name"]);return(()=>{const i=I1.cloneNode(!0);return _i(i,Un({get class(){return t.class?`material-icons ${t.class}`:"material-icons"}},e),!1,!0),J(i,()=>t.name),i})()},pf={admin:0,friend:1,guest:2};function Zg(n){return n?pf[gf()]<=pf[n]:gf()}function gf(){switch(window.location.search){case"?iddqd":return"admin";case"?idkfa":return"friend"}return"guest"}var ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function N1(){this.__data__=[],this.size=0}var L1=N1;function R1(n,t){return n===t||n!==n&&t!==t}var Ha=R1,z1=Ha;function B1(n,t){for(var e=n.length;e--;)if(z1(n[e][0],t))return e;return-1}var Va=B1,F1=Va,j1=Array.prototype,H1=j1.splice;function V1(n){var t=this.__data__,e=F1(t,n);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():H1.call(t,e,1),--this.size,!0}var W1=V1,U1=Va;function q1(n){var t=this.__data__,e=U1(t,n);return e<0?void 0:t[e][1]}var K1=q1,J1=Va;function G1(n){return J1(this.__data__,n)>-1}var Y1=G1,X1=Va;function Q1(n,t){var e=this.__data__,i=X1(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}var Z1=Q1,tx=L1,ex=W1,nx=K1,ix=Y1,rx=Z1;function Jr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Jr.prototype.clear=tx;Jr.prototype.delete=ex;Jr.prototype.get=nx;Jr.prototype.has=ix;Jr.prototype.set=rx;var Wa=Jr,sx=Wa;function ox(){this.__data__=new sx,this.size=0}var ax=ox;function lx(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}var cx=lx;function ux(n){return this.__data__.get(n)}var hx=ux;function fx(n){return this.__data__.has(n)}var dx=fx,px=typeof ds=="object"&&ds&&ds.Object===Object&&ds,em=px,gx=em,mx=typeof self=="object"&&self&&self.Object===Object&&self,bx=gx||mx||Function("return this")(),In=bx,yx=In,xx=yx.Symbol,Js=xx,mf=Js,nm=Object.prototype,vx=nm.hasOwnProperty,wx=nm.toString,ss=mf?mf.toStringTag:void 0;function Sx(n){var t=vx.call(n,ss),e=n[ss];try{n[ss]=void 0;var i=!0}catch{}var r=wx.call(n);return i&&(t?n[ss]=e:delete n[ss]),r}var _x=Sx,kx=Object.prototype,Mx=kx.toString;function Cx(n){return Mx.call(n)}var Ox=Cx,bf=Js,Ax=_x,Tx=Ox,Ex="[object Null]",$x="[object Undefined]",yf=bf?bf.toStringTag:void 0;function Px(n){return n==null?n===void 0?$x:Ex:yf&&yf in Object(n)?Ax(n):Tx(n)}var Gr=Px;function Dx(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var Kn=Dx,Ix=Gr,Nx=Kn,Lx="[object AsyncFunction]",Rx="[object Function]",zx="[object GeneratorFunction]",Bx="[object Proxy]";function Fx(n){if(!Nx(n))return!1;var t=Ix(n);return t==Rx||t==zx||t==Lx||t==Bx}var Au=Fx,jx=In,Hx=jx["__core-js_shared__"],Vx=Hx,Nl=Vx,xf=function(){var n=/[^.]+$/.exec(Nl&&Nl.keys&&Nl.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Wx(n){return!!xf&&xf in n}var Ux=Wx,qx=Function.prototype,Kx=qx.toString;function Jx(n){if(n!=null){try{return Kx.call(n)}catch{}try{return n+""}catch{}}return""}var im=Jx,Gx=Au,Yx=Ux,Xx=Kn,Qx=im,Zx=/[\\^$.*+?()[\]{}|]/g,tv=/^\[object .+?Constructor\]$/,ev=Function.prototype,nv=Object.prototype,iv=ev.toString,rv=nv.hasOwnProperty,sv=RegExp("^"+iv.call(rv).replace(Zx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ov(n){if(!Xx(n)||Yx(n))return!1;var t=Gx(n)?sv:tv;return t.test(Qx(n))}var av=ov;function lv(n,t){return n?.[t]}var cv=lv,uv=av,hv=cv;function fv(n,t){var e=hv(n,t);return uv(e)?e:void 0}var or=fv,dv=or,pv=In,gv=dv(pv,"Map"),Tu=gv,mv=or,bv=mv(Object,"create"),Ua=bv,vf=Ua;function yv(){this.__data__=vf?vf(null):{},this.size=0}var xv=yv;function vv(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var wv=vv,Sv=Ua,_v="__lodash_hash_undefined__",kv=Object.prototype,Mv=kv.hasOwnProperty;function Cv(n){var t=this.__data__;if(Sv){var e=t[n];return e===_v?void 0:e}return Mv.call(t,n)?t[n]:void 0}var Ov=Cv,Av=Ua,Tv=Object.prototype,Ev=Tv.hasOwnProperty;function $v(n){var t=this.__data__;return Av?t[n]!==void 0:Ev.call(t,n)}var Pv=$v,Dv=Ua,Iv="__lodash_hash_undefined__";function Nv(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Dv&&t===void 0?Iv:t,this}var Lv=Nv,Rv=xv,zv=wv,Bv=Ov,Fv=Pv,jv=Lv;function Yr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Yr.prototype.clear=Rv;Yr.prototype.delete=zv;Yr.prototype.get=Bv;Yr.prototype.has=Fv;Yr.prototype.set=jv;var Hv=Yr,wf=Hv,Vv=Wa,Wv=Tu;function Uv(){this.size=0,this.__data__={hash:new wf,map:new(Wv||Vv),string:new wf}}var qv=Uv;function Kv(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}var Jv=Kv,Gv=Jv;function Yv(n,t){var e=n.__data__;return Gv(t)?e[typeof t=="string"?"string":"hash"]:e.map}var qa=Yv,Xv=qa;function Qv(n){var t=Xv(this,n).delete(n);return this.size-=t?1:0,t}var Zv=Qv,tw=qa;function ew(n){return tw(this,n).get(n)}var nw=ew,iw=qa;function rw(n){return iw(this,n).has(n)}var sw=rw,ow=qa;function aw(n,t){var e=ow(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}var lw=aw,cw=qv,uw=Zv,hw=nw,fw=sw,dw=lw;function Xr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}Xr.prototype.clear=cw;Xr.prototype.delete=uw;Xr.prototype.get=hw;Xr.prototype.has=fw;Xr.prototype.set=dw;var Eu=Xr,pw=Wa,gw=Tu,mw=Eu,bw=200;function yw(n,t){var e=this.__data__;if(e instanceof pw){var i=e.__data__;if(!gw||i.length<bw-1)return i.push([n,t]),this.size=++e.size,this;e=this.__data__=new mw(i)}return e.set(n,t),this.size=e.size,this}var xw=yw,vw=Wa,ww=ax,Sw=cx,_w=hx,kw=dx,Mw=xw;function Qr(n){var t=this.__data__=new vw(n);this.size=t.size}Qr.prototype.clear=ww;Qr.prototype.delete=Sw;Qr.prototype.get=_w;Qr.prototype.has=kw;Qr.prototype.set=Mw;var rm=Qr,Cw=or,Ow=function(){try{var n=Cw(Object,"defineProperty");return n({},"",{}),n}catch{}}(),sm=Ow,Sf=sm;function Aw(n,t,e){t=="__proto__"&&Sf?Sf(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}var $u=Aw,Tw=$u,Ew=Ha;function $w(n,t,e){(e!==void 0&&!Ew(n[t],e)||e===void 0&&!(t in n))&&Tw(n,t,e)}var om=$w;function Pw(n){return function(t,e,i){for(var r=-1,s=Object(t),o=i(t),a=o.length;a--;){var l=o[n?a:++r];if(e(s[l],l,s)===!1)break}return t}}var Dw=Pw,Iw=Dw,Nw=Iw(),Lw=Nw,Is={},Rw={get exports(){return Is},set exports(n){Is=n}};(function(n,t){var e=In,i=t&&!t.nodeType&&t,r=i&&!0&&n&&!n.nodeType&&n,s=r&&r.exports===i,o=s?e.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var h=c.length,f=a?a(h):new c.constructor(h);return c.copy(f),f}n.exports=l})(Rw,Is);var zw=In,Bw=zw.Uint8Array,Fw=Bw,_f=Fw;function jw(n){var t=new n.constructor(n.byteLength);return new _f(t).set(new _f(n)),t}var Pu=jw,Hw=Pu;function Vw(n,t){var e=t?Hw(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var am=Vw;function Ww(n,t){var e=-1,i=n.length;for(t||(t=Array(i));++e<i;)t[e]=n[e];return t}var lm=Ww,Uw=Kn,kf=Object.create,qw=function(){function n(){}return function(t){if(!Uw(t))return{};if(kf)return kf(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}(),Kw=qw;function Jw(n,t){return function(e){return n(t(e))}}var cm=Jw,Gw=cm,Yw=Gw(Object.getPrototypeOf,Object),Du=Yw,Xw=Object.prototype;function Qw(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||Xw;return n===e}var Iu=Qw,Zw=Kw,tS=Du,eS=Iu;function nS(n){return typeof n.constructor=="function"&&!eS(n)?Zw(tS(n)):{}}var um=nS;function iS(n){return n!=null&&typeof n=="object"}var ki=iS,rS=Gr,sS=ki,oS="[object Arguments]";function aS(n){return sS(n)&&rS(n)==oS}var lS=aS,Mf=lS,cS=ki,hm=Object.prototype,uS=hm.hasOwnProperty,hS=hm.propertyIsEnumerable,fS=Mf(function(){return arguments}())?Mf:function(n){return cS(n)&&uS.call(n,"callee")&&!hS.call(n,"callee")},Ka=fS,dS=Array.isArray,Jn=dS,pS=9007199254740991;function gS(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=pS}var Nu=gS,mS=Au,bS=Nu;function yS(n){return n!=null&&bS(n.length)&&!mS(n)}var Ja=yS,xS=Ja,vS=ki;function wS(n){return vS(n)&&xS(n)}var Lu=wS,Pr={},SS={get exports(){return Pr},set exports(n){Pr=n}};function _S(){return!1}var kS=_S;(function(n,t){var e=In,i=kS,r=t&&!t.nodeType&&t,s=r&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===r,a=o?e.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||i;n.exports=c})(SS,Pr);var MS=Gr,CS=Du,OS=ki,AS="[object Object]",TS=Function.prototype,ES=Object.prototype,fm=TS.toString,$S=ES.hasOwnProperty,PS=fm.call(Object);function DS(n){if(!OS(n)||MS(n)!=AS)return!1;var t=CS(n);if(t===null)return!0;var e=$S.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&fm.call(e)==PS}var dm=DS,IS=Gr,NS=Nu,LS=ki,RS="[object Arguments]",zS="[object Array]",BS="[object Boolean]",FS="[object Date]",jS="[object Error]",HS="[object Function]",VS="[object Map]",WS="[object Number]",US="[object Object]",qS="[object RegExp]",KS="[object Set]",JS="[object String]",GS="[object WeakMap]",YS="[object ArrayBuffer]",XS="[object DataView]",QS="[object Float32Array]",ZS="[object Float64Array]",t_="[object Int8Array]",e_="[object Int16Array]",n_="[object Int32Array]",i_="[object Uint8Array]",r_="[object Uint8ClampedArray]",s_="[object Uint16Array]",o_="[object Uint32Array]",Qt={};Qt[QS]=Qt[ZS]=Qt[t_]=Qt[e_]=Qt[n_]=Qt[i_]=Qt[r_]=Qt[s_]=Qt[o_]=!0;Qt[RS]=Qt[zS]=Qt[YS]=Qt[BS]=Qt[XS]=Qt[FS]=Qt[jS]=Qt[HS]=Qt[VS]=Qt[WS]=Qt[US]=Qt[qS]=Qt[KS]=Qt[JS]=Qt[GS]=!1;function a_(n){return LS(n)&&NS(n.length)&&!!Qt[IS(n)]}var l_=a_;function c_(n){return function(t){return n(t)}}var Gs=c_,Dr={},u_={get exports(){return Dr},set exports(n){Dr=n}};(function(n,t){var e=em,i=t&&!t.nodeType&&t,r=i&&!0&&n&&!n.nodeType&&n,s=r&&r.exports===i,o=s&&e.process,a=function(){try{var l=r&&r.require&&r.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a})(u_,Dr);var h_=l_,f_=Gs,Cf=Dr,Of=Cf&&Cf.isTypedArray,d_=Of?f_(Of):h_,pm=d_;function p_(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var gm=p_,g_=$u,m_=Ha,b_=Object.prototype,y_=b_.hasOwnProperty;function x_(n,t,e){var i=n[t];(!(y_.call(n,t)&&m_(i,e))||e===void 0&&!(t in n))&&g_(n,t,e)}var Ru=x_,v_=Ru,w_=$u;function S_(n,t,e,i){var r=!e;e||(e={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=i?i(e[a],n[a],a,e,n):void 0;l===void 0&&(l=n[a]),r?w_(e,a,l):v_(e,a,l)}return e}var Zr=S_;function __(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}var k_=__,M_=9007199254740991,C_=/^(?:0|[1-9]\d*)$/;function O_(n,t){var e=typeof n;return t=t??M_,!!t&&(e=="number"||e!="symbol"&&C_.test(n))&&n>-1&&n%1==0&&n<t}var Ga=O_,A_=k_,T_=Ka,E_=Jn,$_=Pr,P_=Ga,D_=pm,I_=Object.prototype,N_=I_.hasOwnProperty;function L_(n,t){var e=E_(n),i=!e&&T_(n),r=!e&&!i&&$_(n),s=!e&&!i&&!r&&D_(n),o=e||i||r||s,a=o?A_(n.length,String):[],l=a.length;for(var c in n)(t||N_.call(n,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||P_(c,l)))&&a.push(c);return a}var mm=L_;function R_(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var z_=R_,B_=Kn,F_=Iu,j_=z_,H_=Object.prototype,V_=H_.hasOwnProperty;function W_(n){if(!B_(n))return j_(n);var t=F_(n),e=[];for(var i in n)i=="constructor"&&(t||!V_.call(n,i))||e.push(i);return e}var U_=W_,q_=mm,K_=U_,J_=Ja;function G_(n){return J_(n)?q_(n,!0):K_(n)}var Ys=G_,Y_=Zr,X_=Ys;function Q_(n){return Y_(n,X_(n))}var Z_=Q_,Af=om,tk=Is,ek=am,nk=lm,ik=um,Tf=Ka,Ef=Jn,rk=Lu,sk=Pr,ok=Au,ak=Kn,lk=dm,ck=pm,$f=gm,uk=Z_;function hk(n,t,e,i,r,s,o){var a=$f(n,e),l=$f(t,e),c=o.get(l);if(c){Af(n,e,c);return}var u=s?s(a,l,e+"",n,t,o):void 0,h=u===void 0;if(h){var f=Ef(l),d=!f&&sk(l),p=!f&&!d&&ck(l);u=l,f||d||p?Ef(a)?u=a:rk(a)?u=nk(a):d?(h=!1,u=tk(l,!0)):p?(h=!1,u=ek(l,!0)):u=[]:lk(l)||Tf(l)?(u=a,Tf(a)?u=uk(a):(!ak(a)||ok(a))&&(u=ik(l))):h=!1}h&&(o.set(l,u),r(u,l,i,s,o),o.delete(l)),Af(n,e,u)}var fk=hk,dk=rm,pk=om,gk=Lw,mk=fk,bk=Kn,yk=Ys,xk=gm;function bm(n,t,e,i,r){n!==t&&gk(t,function(s,o){if(r||(r=new dk),bk(s))mk(n,t,o,e,bm,i,r);else{var a=i?i(xk(n,o),s,o+"",n,t,r):void 0;a===void 0&&(a=s),pk(n,o,a)}},yk)}var vk=bm;function wk(n){return n}var ym=wk;function Sk(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}var _k=Sk,kk=_k,Pf=Math.max;function Mk(n,t,e){return t=Pf(t===void 0?n.length-1:t,0),function(){for(var i=arguments,r=-1,s=Pf(i.length-t,0),o=Array(s);++r<s;)o[r]=i[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=i[r];return a[t]=e(o),kk(n,this,a)}}var xm=Mk;function Ck(n){return function(){return n}}var Ok=Ck,Ak=Ok,Df=sm,Tk=ym,Ek=Df?function(n,t){return Df(n,"toString",{configurable:!0,enumerable:!1,value:Ak(t),writable:!0})}:Tk,$k=Ek,Pk=800,Dk=16,Ik=Date.now;function Nk(n){var t=0,e=0;return function(){var i=Ik(),r=Dk-(i-e);if(e=i,r>0){if(++t>=Pk)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}var Lk=Nk,Rk=$k,zk=Lk,Bk=zk(Rk),vm=Bk,Fk=ym,jk=xm,Hk=vm;function Vk(n,t){return Hk(jk(n,t,Fk),n+"")}var zu=Vk,Wk=Ha,Uk=Ja,qk=Ga,Kk=Kn;function Jk(n,t,e){if(!Kk(e))return!1;var i=typeof t;return(i=="number"?Uk(e)&&qk(t,e.length):i=="string"&&t in e)?Wk(e[t],n):!1}var Gk=Jk,Yk=zu,Xk=Gk;function Qk(n){return Yk(function(t,e){var i=-1,r=e.length,s=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,o&&Xk(e[0],e[1],o)&&(s=r<3?void 0:s,r=1),t=Object(t);++i<r;){var a=e[i];a&&n(t,a,i,s)}return t})}var Zk=Qk,tM=vk,eM=Zk,nM=eM(function(n,t,e){tM(n,t,e)}),Wo=nM;function iM(n,t){for(var e=-1,i=n==null?0:n.length,r=Array(i);++e<i;)r[e]=t(n[e],e,n);return r}var Xs=iM;function rM(n,t){for(var e=-1,i=n==null?0:n.length;++e<i&&t(n[e],e,n)!==!1;);return n}var sM=rM,oM=cm,aM=oM(Object.keys,Object),lM=aM,cM=Iu,uM=lM,hM=Object.prototype,fM=hM.hasOwnProperty;function dM(n){if(!cM(n))return uM(n);var t=[];for(var e in Object(n))fM.call(n,e)&&e!="constructor"&&t.push(e);return t}var pM=dM,gM=mm,mM=pM,bM=Ja;function yM(n){return bM(n)?gM(n):mM(n)}var Bu=yM,xM=Zr,vM=Bu;function wM(n,t){return n&&xM(t,vM(t),n)}var SM=wM,_M=Zr,kM=Ys;function MM(n,t){return n&&_M(t,kM(t),n)}var CM=MM;function OM(n,t){for(var e=-1,i=n==null?0:n.length,r=0,s=[];++e<i;){var o=n[e];t(o,e,n)&&(s[r++]=o)}return s}var AM=OM;function TM(){return[]}var wm=TM,EM=AM,$M=wm,PM=Object.prototype,DM=PM.propertyIsEnumerable,If=Object.getOwnPropertySymbols,IM=If?function(n){return n==null?[]:(n=Object(n),EM(If(n),function(t){return DM.call(n,t)}))}:$M,Fu=IM,NM=Zr,LM=Fu;function RM(n,t){return NM(n,LM(n),t)}var zM=RM;function BM(n,t){for(var e=-1,i=t.length,r=n.length;++e<i;)n[r+e]=t[e];return n}var ju=BM,FM=ju,jM=Du,HM=Fu,VM=wm,WM=Object.getOwnPropertySymbols,UM=WM?function(n){for(var t=[];n;)FM(t,HM(n)),n=jM(n);return t}:VM,Sm=UM,qM=Zr,KM=Sm;function JM(n,t){return qM(n,KM(n),t)}var GM=JM,YM=ju,XM=Jn;function QM(n,t,e){var i=t(n);return XM(n)?i:YM(i,e(n))}var _m=QM,ZM=_m,t2=Fu,e2=Bu;function n2(n){return ZM(n,e2,t2)}var i2=n2,r2=_m,s2=Sm,o2=Ys;function a2(n){return r2(n,o2,s2)}var km=a2,l2=or,c2=In,u2=l2(c2,"DataView"),h2=u2,f2=or,d2=In,p2=f2(d2,"Promise"),g2=p2,m2=or,b2=In,y2=m2(b2,"Set"),Mm=y2,x2=or,v2=In,w2=x2(v2,"WeakMap"),S2=w2,Ic=h2,Nc=Tu,Lc=g2,Rc=Mm,zc=S2,Cm=Gr,ts=im,Nf="[object Map]",_2="[object Object]",Lf="[object Promise]",Rf="[object Set]",zf="[object WeakMap]",Bf="[object DataView]",k2=ts(Ic),M2=ts(Nc),C2=ts(Lc),O2=ts(Rc),A2=ts(zc),Ni=Cm;(Ic&&Ni(new Ic(new ArrayBuffer(1)))!=Bf||Nc&&Ni(new Nc)!=Nf||Lc&&Ni(Lc.resolve())!=Lf||Rc&&Ni(new Rc)!=Rf||zc&&Ni(new zc)!=zf)&&(Ni=function(n){var t=Cm(n),e=t==_2?n.constructor:void 0,i=e?ts(e):"";if(i)switch(i){case k2:return Bf;case M2:return Nf;case C2:return Lf;case O2:return Rf;case A2:return zf}return t});var Hu=Ni,T2=Object.prototype,E2=T2.hasOwnProperty;function $2(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&E2.call(n,"index")&&(e.index=n.index,e.input=n.input),e}var P2=$2,D2=Pu;function I2(n,t){var e=t?D2(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}var N2=I2,L2=/\w*$/;function R2(n){var t=new n.constructor(n.source,L2.exec(n));return t.lastIndex=n.lastIndex,t}var z2=R2,Ff=Js,jf=Ff?Ff.prototype:void 0,Hf=jf?jf.valueOf:void 0;function B2(n){return Hf?Object(Hf.call(n)):{}}var F2=B2,j2=Pu,H2=N2,V2=z2,W2=F2,U2=am,q2="[object Boolean]",K2="[object Date]",J2="[object Map]",G2="[object Number]",Y2="[object RegExp]",X2="[object Set]",Q2="[object String]",Z2="[object Symbol]",tC="[object ArrayBuffer]",eC="[object DataView]",nC="[object Float32Array]",iC="[object Float64Array]",rC="[object Int8Array]",sC="[object Int16Array]",oC="[object Int32Array]",aC="[object Uint8Array]",lC="[object Uint8ClampedArray]",cC="[object Uint16Array]",uC="[object Uint32Array]";function hC(n,t,e){var i=n.constructor;switch(t){case tC:return j2(n);case q2:case K2:return new i(+n);case eC:return H2(n,e);case nC:case iC:case rC:case sC:case oC:case aC:case lC:case cC:case uC:return U2(n,e);case J2:return new i;case G2:case Q2:return new i(n);case Y2:return V2(n);case X2:return new i;case Z2:return W2(n)}}var fC=hC,dC=Hu,pC=ki,gC="[object Map]";function mC(n){return pC(n)&&dC(n)==gC}var bC=mC,yC=bC,xC=Gs,Vf=Dr,Wf=Vf&&Vf.isMap,vC=Wf?xC(Wf):yC,wC=vC,SC=Hu,_C=ki,kC="[object Set]";function MC(n){return _C(n)&&SC(n)==kC}var CC=MC,OC=CC,AC=Gs,Uf=Dr,qf=Uf&&Uf.isSet,TC=qf?AC(qf):OC,EC=TC,$C=rm,PC=sM,DC=Ru,IC=SM,NC=CM,LC=Is,RC=lm,zC=zM,BC=GM,FC=i2,jC=km,HC=Hu,VC=P2,WC=fC,UC=um,qC=Jn,KC=Pr,JC=wC,GC=Kn,YC=EC,XC=Bu,QC=Ys,ZC=1,tO=2,eO=4,Om="[object Arguments]",nO="[object Array]",iO="[object Boolean]",rO="[object Date]",sO="[object Error]",Am="[object Function]",oO="[object GeneratorFunction]",aO="[object Map]",lO="[object Number]",Tm="[object Object]",cO="[object RegExp]",uO="[object Set]",hO="[object String]",fO="[object Symbol]",dO="[object WeakMap]",pO="[object ArrayBuffer]",gO="[object DataView]",mO="[object Float32Array]",bO="[object Float64Array]",yO="[object Int8Array]",xO="[object Int16Array]",vO="[object Int32Array]",wO="[object Uint8Array]",SO="[object Uint8ClampedArray]",_O="[object Uint16Array]",kO="[object Uint32Array]",Jt={};Jt[Om]=Jt[nO]=Jt[pO]=Jt[gO]=Jt[iO]=Jt[rO]=Jt[mO]=Jt[bO]=Jt[yO]=Jt[xO]=Jt[vO]=Jt[aO]=Jt[lO]=Jt[Tm]=Jt[cO]=Jt[uO]=Jt[hO]=Jt[fO]=Jt[wO]=Jt[SO]=Jt[_O]=Jt[kO]=!0;Jt[sO]=Jt[Am]=Jt[dO]=!1;function To(n,t,e,i,r,s){var o,a=t&ZC,l=t&tO,c=t&eO;if(e&&(o=r?e(n,i,r,s):e(n)),o!==void 0)return o;if(!GC(n))return n;var u=qC(n);if(u){if(o=VC(n),!a)return RC(n,o)}else{var h=HC(n),f=h==Am||h==oO;if(KC(n))return LC(n,a);if(h==Tm||h==Om||f&&!r){if(o=l||f?{}:UC(n),!a)return l?BC(n,NC(o,n)):zC(n,IC(o,n))}else{if(!Jt[h])return r?n:{};o=WC(n,h,a)}}s||(s=new $C);var d=s.get(n);if(d)return d;s.set(n,o),YC(n)?n.forEach(function(v){o.add(To(v,t,e,v,n,s))}):JC(n)&&n.forEach(function(v,C){o.set(C,To(v,t,e,C,n,s))});var p=c?l?jC:FC:l?QC:XC,m=u?void 0:p(n);return PC(m||n,function(v,C){m&&(C=v,v=n[C]),DC(o,C,To(v,t,e,C,n,s))}),o}var MO=To,CO=Gr,OO=ki,AO="[object Symbol]";function TO(n){return typeof n=="symbol"||OO(n)&&CO(n)==AO}var Vu=TO,EO=Jn,$O=Vu,PO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,DO=/^\w*$/;function IO(n,t){if(EO(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||$O(n)?!0:DO.test(n)||!PO.test(n)||t!=null&&n in Object(t)}var NO=IO,Em=Eu,LO="Expected a function";function Wu(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new TypeError(LO);var e=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=e.cache;if(s.has(r))return s.get(r);var o=n.apply(this,i);return e.cache=s.set(r,o)||s,o};return e.cache=new(Wu.Cache||Em),e}Wu.Cache=Em;var RO=Wu,zO=RO,BO=500;function FO(n){var t=zO(n,function(i){return e.size===BO&&e.clear(),i}),e=t.cache;return t}var jO=FO,HO=jO,VO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,WO=/\\(\\)?/g,UO=HO(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(VO,function(e,i,r,s){t.push(r?s.replace(WO,"$1"):i||e)}),t}),qO=UO,Kf=Js,KO=Xs,JO=Jn,GO=Vu,YO=1/0,Jf=Kf?Kf.prototype:void 0,Gf=Jf?Jf.toString:void 0;function $m(n){if(typeof n=="string")return n;if(JO(n))return KO(n,$m)+"";if(GO(n))return Gf?Gf.call(n):"";var t=n+"";return t=="0"&&1/n==-YO?"-0":t}var XO=$m,QO=XO;function ZO(n){return n==null?"":QO(n)}var Uu=ZO,tA=Jn,eA=NO,nA=qO,iA=Uu;function rA(n,t){return tA(n)?n:eA(n,t)?[n]:nA(iA(n))}var es=rA;function sA(n){var t=n==null?0:n.length;return t?n[t-1]:void 0}var Ns=sA,oA=Vu,aA=1/0;function lA(n){if(typeof n=="string"||oA(n))return n;var t=n+"";return t=="0"&&1/n==-aA?"-0":t}var Ya=lA,cA=es,uA=Ya;function hA(n,t){t=cA(t,n);for(var e=0,i=t.length;n!=null&&e<i;)n=n[uA(t[e++])];return e&&e==i?n:void 0}var qu=hA;function fA(n,t,e){var i=-1,r=n.length;t<0&&(t=-t>r?0:r+t),e=e>r?r:e,e<0&&(e+=r),r=t>e?0:e-t>>>0,t>>>=0;for(var s=Array(r);++i<r;)s[i]=n[i+t];return s}var Pm=fA,dA=qu,pA=Pm;function gA(n,t){return t.length<2?n:dA(n,pA(t,0,-1))}var mA=gA,bA=es,yA=Ns,xA=mA,vA=Ya;function wA(n,t){return t=bA(t,n),n=xA(n,t),n==null||delete n[vA(yA(t))]}var SA=wA,_A=dm;function kA(n){return _A(n)?void 0:n}var MA=kA,Yf=Js,CA=Ka,OA=Jn,Xf=Yf?Yf.isConcatSpreadable:void 0;function AA(n){return OA(n)||CA(n)||!!(Xf&&n&&n[Xf])}var TA=AA,EA=ju,$A=TA;function Dm(n,t,e,i,r){var s=-1,o=n.length;for(e||(e=$A),r||(r=[]);++s<o;){var a=n[s];t>0&&e(a)?t>1?Dm(a,t-1,e,i,r):EA(r,a):i||(r[r.length]=a)}return r}var Im=Dm,PA=Im;function DA(n){var t=n==null?0:n.length;return t?PA(n,1):[]}var IA=DA,NA=IA,LA=xm,RA=vm;function zA(n){return RA(LA(n,void 0,NA),n+"")}var Nm=zA,BA=Xs,FA=MO,jA=SA,HA=es,VA=Zr,WA=MA,UA=Nm,qA=km,KA=1,JA=2,GA=4,YA=UA(function(n,t){var e={};if(n==null)return e;var i=!1;t=BA(t,function(s){return s=HA(s,n),i||(i=s.length>1),s}),VA(n,qA(n),e),i&&(e=FA(e,KA|JA|GA,WA));for(var r=t.length;r--;)jA(e,t[r]);return e}),XA=YA,QA=Ru,ZA=es,tT=Ga,Qf=Kn,eT=Ya;function nT(n,t,e,i){if(!Qf(n))return n;t=ZA(t,n);for(var r=-1,s=t.length,o=s-1,a=n;a!=null&&++r<s;){var l=eT(t[r]),c=e;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(r!=o){var u=a[l];c=i?i(u,l,a):void 0,c===void 0&&(c=Qf(u)?u:tT(t[r+1])?[]:{})}QA(a,l,c),a=a[l]}return n}var Lm=nT,iT=qu,rT=Lm,sT=es;function oT(n,t,e){for(var i=-1,r=t.length,s={};++i<r;){var o=t[i],a=iT(n,o);e(a,o)&&rT(s,sT(o,n),a)}return s}var aT=oT;function lT(n,t){return n!=null&&t in Object(n)}var cT=lT,uT=es,hT=Ka,fT=Jn,dT=Ga,pT=Nu,gT=Ya;function mT(n,t,e){t=uT(t,n);for(var i=-1,r=t.length,s=!1;++i<r;){var o=gT(t[i]);if(!(s=n!=null&&e(n,o)))break;n=n[o]}return s||++i!=r?s:(r=n==null?0:n.length,!!r&&pT(r)&&dT(o,r)&&(fT(n)||hT(n)))}var bT=mT,yT=cT,xT=bT;function vT(n,t){return n!=null&&xT(n,t,yT)}var wT=vT,ST=aT,_T=wT;function kT(n,t){return ST(n,t,function(e,i){return _T(n,i)})}var MT=kT,CT=MT,OT=Nm,AT=OT(function(n,t){return n==null?{}:CT(n,t)}),TT=AT;const Ir=Symbol("store-raw"),mi=Symbol("store-node"),Rm=Symbol("store-name");function zm(n,t){let e=n[ve];if(!e&&(Object.defineProperty(n,ve,{value:e=new Proxy(n,$T)}),!Array.isArray(n))){const i=Object.keys(n),r=Object.getOwnPropertyDescriptors(n);for(let s=0,o=i.length;s<o;s++){const a=i[s];r[a].get&&Object.defineProperty(n,a,{enumerable:r[a].enumerable,get:r[a].get.bind(e)})}}return e}function Xi(n){let t;return n!=null&&typeof n=="object"&&(n[ve]||!(t=Object.getPrototypeOf(n))||t===Object.prototype||Array.isArray(n))}function bi(n,t=new Set){let e,i,r,s;if(e=n!=null&&n[Ir])return e;if(!Xi(n)||t.has(n))return n;if(Array.isArray(n)){Object.isFrozen(n)?n=n.slice(0):t.add(n);for(let o=0,a=n.length;o<a;o++)r=n[o],(i=bi(r,t))!==r&&(n[o]=i)}else{Object.isFrozen(n)?n=Object.assign({},n):t.add(n);const o=Object.keys(n),a=Object.getOwnPropertyDescriptors(n);for(let l=0,c=o.length;l<c;l++)s=o[l],!a[s].get&&(r=n[s],(i=bi(r,t))!==r&&(n[s]=i))}return n}function Xa(n){let t=n[mi];return t||Object.defineProperty(n,mi,{value:t={}}),t}function Uo(n,t,e){return n[t]||(n[t]=Fm(e))}function ET(n,t){const e=Reflect.getOwnPropertyDescriptor(n,t);return!e||e.get||!e.configurable||t===ve||t===mi||t===Rm||(delete e.value,delete e.writable,e.get=()=>n[ve][t]),e}function Ku(n){if(Cu()){const t=Xa(n);(t._||(t._=Fm()))()}}function Bm(n){return Ku(n),Reflect.ownKeys(n)}function Fm(n){const[t,e]=ee(n,{equals:!1,internal:!0});return t.$=e,t}const $T={get(n,t,e){if(t===Ir)return n;if(t===ve)return e;if(t===Ds)return Ku(n),e;const i=Xa(n),r=i.hasOwnProperty(t);let s=r?i[t]():n[t];if(t===mi||t==="__proto__")return s;if(!r){const o=Object.getOwnPropertyDescriptor(n,t);Cu()&&(typeof s!="function"||n.hasOwnProperty(t))&&!(o&&o.get)&&(s=Uo(i,t,s)())}return Xi(s)?zm(s):s},has(n,t){return t===Ir||t===ve||t===Ds||t===mi||t==="__proto__"?!0:(this.get(n,t,n),t in n)},set(){return!0},deleteProperty(){return!0},ownKeys:Bm,getOwnPropertyDescriptor:ET};function yi(n,t,e,i=!1){if(!i&&n[t]===e)return;const r=n[t],s=n.length;e===void 0?delete n[t]:n[t]=e;let o=Xa(n),a;(a=Uo(o,t,r))&&a.$(()=>e),Array.isArray(n)&&n.length!==s&&(a=Uo(o,"length",s))&&a.$(n.length),(a=o._)&&a.$()}function jm(n,t){const e=Object.keys(t);for(let i=0;i<e.length;i+=1){const r=e[i];yi(n,r,t[r])}}function PT(n,t){if(typeof t=="function"&&(t=t(n)),t=bi(t),Array.isArray(t)){if(n===t)return;let e=0,i=t.length;for(;e<i;e++){const r=t[e];n[e]!==r&&yi(n,e,r)}yi(n,"length",i)}else jm(n,t)}function ps(n,t,e=[]){let i,r=n;if(t.length>1){i=t.shift();const o=typeof i,a=Array.isArray(n);if(Array.isArray(i)){for(let l=0;l<i.length;l++)ps(n,[i[l]].concat(t),e);return}else if(a&&o==="function"){for(let l=0;l<n.length;l++)i(n[l],l)&&ps(n,[l].concat(t),e);return}else if(a&&o==="object"){const{from:l=0,to:c=n.length-1,by:u=1}=i;for(let h=l;h<=c;h+=u)ps(n,[h].concat(t),e);return}else if(t.length>1){ps(n[i],t,[i].concat(e));return}r=n[i],e=[i].concat(e)}let s=t[0];typeof s=="function"&&(s=s(r,e),s===r)||i===void 0&&s==null||(s=bi(s),i===void 0||Xi(r)&&Xi(s)&&!Array.isArray(s)?jm(r,s):yi(n,i,s))}function Hm(...[n,t]){const e=bi(n||{}),i=Array.isArray(e),r=zm(e);function s(...o){ws(()=>{i&&o.length===1?PT(e,o[0]):ps(e,o)})}return[r,s]}function DT(n,t){const e=Reflect.getOwnPropertyDescriptor(n,t);return!e||e.get||e.set||!e.configurable||t===ve||t===mi||t===Rm||(delete e.value,delete e.writable,e.get=()=>n[ve][t],e.set=i=>n[ve][t]=i),e}const IT={get(n,t,e){if(t===Ir)return n;if(t===ve)return e;if(t===Ds)return Ku(n),e;const i=Xa(n),r=i.hasOwnProperty(t);let s=r?i[t]():n[t];if(t===mi||t==="__proto__")return s;if(!r){const o=Object.getOwnPropertyDescriptor(n,t),a=typeof s=="function";if(Cu()&&(!a||n.hasOwnProperty(t))&&!(o&&o.get))s=Uo(i,t,s)();else if(s!=null&&a&&s===Array.prototype[t])return(...l)=>ws(()=>Array.prototype[t].apply(e,l))}return Xi(s)?Vm(s):s},has(n,t){return t===Ir||t===ve||t===Ds||t===mi||t==="__proto__"?!0:(this.get(n,t,n),t in n)},set(n,t,e){return ws(()=>yi(n,t,bi(e))),!0},deleteProperty(n,t){return ws(()=>yi(n,t,void 0,!0)),!0},ownKeys:Bm,getOwnPropertyDescriptor:DT};function Vm(n,t){let e=n[ve];if(!e){Object.defineProperty(n,ve,{value:e=new Proxy(n,IT)});const i=Object.keys(n),r=Object.getOwnPropertyDescriptors(n);for(let s=0,o=i.length;s<o;s++){const a=i[s];if(r[a].get){const l=r[a].get.bind(e);Object.defineProperty(n,a,{get:l})}if(r[a].set){const l=r[a].set;Object.defineProperty(n,a,{set:u=>ws(()=>l.call(e,u))})}}}return e}function NT(n,t){const e=bi(n||{});return Vm(e)}const qo=new WeakMap,Wm={get(n,t){if(t===Ir)return n;const e=n[t];let i;return Xi(e)?qo.get(e)||(qo.set(e,i=new Proxy(e,Wm)),i):e},set(n,t,e){return yi(n,t,bi(e)),!0},deleteProperty(n,t){return yi(n,t,void 0,!0),!0}};function Ko(n){return t=>{if(Xi(t)){let e;(e=qo.get(t))||qo.set(t,e=new Proxy(t,Wm)),n(e)}return t}}var Jo={},LT={get exports(){return Jo},set exports(n){Jo=n}};(function(n){var t=function(){var e=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function o(l,c){if(!s[l]){s[l]={};for(var u=0;u<l.length;u++)s[l][l.charAt(u)]=u}return s[l][c]}var a={compressToBase64:function(l){if(l==null)return"";var c=a._compress(l,6,function(u){return i.charAt(u)});switch(c.length%4){default:case 0:return c;case 1:return c+"===";case 2:return c+"==";case 3:return c+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:a._decompress(l.length,32,function(c){return o(i,l.charAt(c))})},compressToUTF16:function(l){return l==null?"":a._compress(l,15,function(c){return e(c+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:a._decompress(l.length,16384,function(c){return l.charCodeAt(c)-32})},compressToUint8Array:function(l){for(var c=a.compress(l),u=new Uint8Array(c.length*2),h=0,f=c.length;h<f;h++){var d=c.charCodeAt(h);u[h*2]=d>>>8,u[h*2+1]=d%256}return u},decompressFromUint8Array:function(l){if(l==null)return a.decompress(l);for(var c=new Array(l.length/2),u=0,h=c.length;u<h;u++)c[u]=l[u*2]*256+l[u*2+1];var f=[];return c.forEach(function(d){f.push(e(d))}),a.decompress(f.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":a._compress(l,6,function(c){return r.charAt(c)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),a._decompress(l.length,32,function(c){return o(r,l.charAt(c))}))},compress:function(l){return a._compress(l,16,function(c){return e(c)})},_compress:function(l,c,u){if(l==null)return"";var h,f,d={},p={},m="",v="",C="",E=2,F=3,q=2,j=[],A=0,R=0,L;for(L=0;L<l.length;L+=1)if(m=l.charAt(L),Object.prototype.hasOwnProperty.call(d,m)||(d[m]=F++,p[m]=!0),v=C+m,Object.prototype.hasOwnProperty.call(d,v))C=v;else{if(Object.prototype.hasOwnProperty.call(p,C)){if(C.charCodeAt(0)<256){for(h=0;h<q;h++)A=A<<1,R==c-1?(R=0,j.push(u(A)),A=0):R++;for(f=C.charCodeAt(0),h=0;h<8;h++)A=A<<1|f&1,R==c-1?(R=0,j.push(u(A)),A=0):R++,f=f>>1}else{for(f=1,h=0;h<q;h++)A=A<<1|f,R==c-1?(R=0,j.push(u(A)),A=0):R++,f=0;for(f=C.charCodeAt(0),h=0;h<16;h++)A=A<<1|f&1,R==c-1?(R=0,j.push(u(A)),A=0):R++,f=f>>1}E--,E==0&&(E=Math.pow(2,q),q++),delete p[C]}else for(f=d[C],h=0;h<q;h++)A=A<<1|f&1,R==c-1?(R=0,j.push(u(A)),A=0):R++,f=f>>1;E--,E==0&&(E=Math.pow(2,q),q++),d[v]=F++,C=String(m)}if(C!==""){if(Object.prototype.hasOwnProperty.call(p,C)){if(C.charCodeAt(0)<256){for(h=0;h<q;h++)A=A<<1,R==c-1?(R=0,j.push(u(A)),A=0):R++;for(f=C.charCodeAt(0),h=0;h<8;h++)A=A<<1|f&1,R==c-1?(R=0,j.push(u(A)),A=0):R++,f=f>>1}else{for(f=1,h=0;h<q;h++)A=A<<1|f,R==c-1?(R=0,j.push(u(A)),A=0):R++,f=0;for(f=C.charCodeAt(0),h=0;h<16;h++)A=A<<1|f&1,R==c-1?(R=0,j.push(u(A)),A=0):R++,f=f>>1}E--,E==0&&(E=Math.pow(2,q),q++),delete p[C]}else for(f=d[C],h=0;h<q;h++)A=A<<1|f&1,R==c-1?(R=0,j.push(u(A)),A=0):R++,f=f>>1;E--,E==0&&(E=Math.pow(2,q),q++)}for(f=2,h=0;h<q;h++)A=A<<1|f&1,R==c-1?(R=0,j.push(u(A)),A=0):R++,f=f>>1;for(;;)if(A=A<<1,R==c-1){j.push(u(A));break}else R++;return j.join("")},decompress:function(l){return l==null?"":l==""?null:a._decompress(l.length,32768,function(c){return l.charCodeAt(c)})},_decompress:function(l,c,u){var h=[],f=4,d=4,p=3,m="",v=[],C,E,F,q,j,A,R,L={val:u(0),position:c,index:1};for(C=0;C<3;C+=1)h[C]=C;for(F=0,j=Math.pow(2,2),A=1;A!=j;)q=L.val&L.position,L.position>>=1,L.position==0&&(L.position=c,L.val=u(L.index++)),F|=(q>0?1:0)*A,A<<=1;switch(F){case 0:for(F=0,j=Math.pow(2,8),A=1;A!=j;)q=L.val&L.position,L.position>>=1,L.position==0&&(L.position=c,L.val=u(L.index++)),F|=(q>0?1:0)*A,A<<=1;R=e(F);break;case 1:for(F=0,j=Math.pow(2,16),A=1;A!=j;)q=L.val&L.position,L.position>>=1,L.position==0&&(L.position=c,L.val=u(L.index++)),F|=(q>0?1:0)*A,A<<=1;R=e(F);break;case 2:return""}for(h[3]=R,E=R,v.push(R);;){if(L.index>l)return"";for(F=0,j=Math.pow(2,p),A=1;A!=j;)q=L.val&L.position,L.position>>=1,L.position==0&&(L.position=c,L.val=u(L.index++)),F|=(q>0?1:0)*A,A<<=1;switch(R=F){case 0:for(F=0,j=Math.pow(2,8),A=1;A!=j;)q=L.val&L.position,L.position>>=1,L.position==0&&(L.position=c,L.val=u(L.index++)),F|=(q>0?1:0)*A,A<<=1;h[d++]=e(F),R=d-1,f--;break;case 1:for(F=0,j=Math.pow(2,16),A=1;A!=j;)q=L.val&L.position,L.position>>=1,L.position==0&&(L.position=c,L.val=u(L.index++)),F|=(q>0?1:0)*A,A<<=1;h[d++]=e(F),R=d-1,f--;break;case 2:return v.join("")}if(f==0&&(f=Math.pow(2,p),p++),h[R])m=h[R];else if(R===d)m=E+E.charAt(0);else return null;v.push(m),h[d++]=E+m.charAt(0),f--,E=m,f==0&&(f=Math.pow(2,p),p++)}}};return a}();n!=null?n.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(LT);const Um={title:"Curriculum Vitae",person:{name:"Someone Awesome"},cv:{experience:[],profile:{grouped:!1,scope:[0,1]}},keywords:{}},[lo,Ll]=Hm(Um),[RT,Zf]=ee(!1),td=["person.contacts","person.documents","person.location","cv.profile"],Mt={store:lo,init:n=>{const t=()=>{try{return JSON.parse(window.localStorage.getItem("data")??"")}catch{return{}}},e=()=>{try{return JSON.parse(Jo.decompressFromBase64(document.location.hash.substring(1)))}catch{return{}}},i=Wo({},Um,n,t(),e());for(const r of Object.keys(i))Ll(r,i[r])},isModified:RT,export:()=>({persisted:XA(lo,td),exported:TT(lo,td)}),import:()=>Ll(Ko(n=>Wo(n,lo))),update:n=>{Ll(Ko(t=>{n(t),Zf(!0)}))},persist(){window.localStorage.setItem("data",JSON.stringify(Mt.export().persisted)),Zf(!1)}};const zT=St('<nav class="toggle"><ul><li></li><li><input type="checkbox" role="switch"></li><li></li></ul></nav>',11),Qa=n=>{const[t,e]=yn(n,["value","offIcon","onIcon","handler"]);return(()=>{const i=zT.cloneNode(!0),r=i.firstChild,s=r.firstChild,o=s.nextSibling,a=o.firstChild,l=o.nextSibling;return _i(i,e,!1,!0),J(s,I(De,{get name(){return t.offIcon}})),a.addEventListener("change",({target:c})=>{c instanceof HTMLInputElement&&t.handler(!n.value)}),J(l,I(De,{get name(){return t.onIcon}})),Oe(()=>a.checked=n.value),i})()},BT=()=>I(Qa,{offIcon:"preview",onIcon:"edit_note",get value(){return fe.get()==="edit"},get classList(){return{invisible:!Zg("admin")}},handler:n=>{n?(fe.set("edit"),window.onbeforeunload=()=>Mt.persist()):(window.onbeforeunload=null,Mt.persist(),fe.set("view"))}});const Qs=(...n)=>n.filter(t=>!!t).join(" "),Ju=()=>`#${Jo.compressToBase64(JSON.stringify(Mt.export().exported))}`,qm=()=>`${document.location.protocol}//${document.location.host}/${Ju()}`;const FT=St("<button></button>",2),Lt=n=>{const[t,e]=yn(n,["icon","class","action"]);return(()=>{const i=FT.cloneNode(!0);return i.$$click=()=>t.action(),_i(i,Un({get class(){return Qs("material-symbols-outlined",t.class)}},e),!1,!0),J(i,()=>t.icon),i})()};Si(["click"]);const jT=St("<dialog></dialog>",2),br=NT([]),HT=()=>{const[n,t]=Hm([]);return()=>(()=>{const e=jT.cloneNode(!0);return J(e,()=>(br.length<n.length&&t(Ko(i=>i.pop())),br.length>n.length&&t(Ko(i=>i.push(Ns(br)()))),Ns(n))),Oe(()=>e.open=!!br.length),e})()};Yg(()=>I(HT,{}),document.body);const oe={push(n){br.push(n)},back(){br.pop()}},VT=St("<article><header><h1>Are you sure?</h1></header><p>This action will reset all the data to it's initial state and reload the page.</p><p><i><b>If you've done any edits, they will be lost.</b></i></p><footer><nav><ul><li></li></ul><ul><li></li></ul></nav></footer></article>",26),WT=()=>I(Lt,{icon:"restart_alt",action:()=>{oe.push(()=>(()=>{const n=VT.cloneNode(!0),t=n.firstChild,e=t.nextSibling,i=e.nextSibling,r=i.nextSibling,s=r.firstChild,o=s.firstChild,a=o.firstChild,l=o.nextSibling,c=l.firstChild;return J(a,I(Lt,{icon:"close",get action(){return oe.back}})),J(c,I(Lt,{icon:"done",action:()=>{window.localStorage.clear(),window.location.reload()}})),n})())},class:"danger outline"});var Bc=function(n,t){return Bc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])},Bc(n,t)};function Za(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Bc(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Fc(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Go(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var i=e.call(n),r,s=[],o;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s}function Yo(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return n.concat(s||Array.prototype.slice.call(t))}function Vn(n){return typeof n=="function"}function Km(n){var t=function(i){Error.call(i),i.stack=new Error().stack},e=n(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Rl=Km(function(n){return function(e){n(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(i,r){return r+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function jc(n,t){if(n){var e=n.indexOf(t);0<=e&&n.splice(e,1)}}var tl=function(){function n(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var t,e,i,r,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Fc(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(m){t={error:m}}finally{try{l&&!l.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}else o.remove(this);var u=this.initialTeardown;if(Vn(u))try{u()}catch(m){s=m instanceof Rl?m.errors:[m]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var f=Fc(h),d=f.next();!d.done;d=f.next()){var p=d.value;try{ed(p)}catch(m){s=s??[],m instanceof Rl?s=Yo(Yo([],Go(s)),Go(m.errors)):s.push(m)}}}catch(m){i={error:m}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(i)throw i.error}}}if(s)throw new Rl(s)}},n.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)ed(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},n.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},n.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},n.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&jc(e,t)},n.prototype.remove=function(t){var e=this._finalizers;e&&jc(e,t),t instanceof n&&t._removeParent(this)},n.EMPTY=function(){var t=new n;return t.closed=!0,t}(),n}(),Jm=tl.EMPTY;function Gm(n){return n instanceof tl||n&&"closed"in n&&Vn(n.remove)&&Vn(n.add)&&Vn(n.unsubscribe)}function ed(n){Vn(n)?n():n.unsubscribe()}var Ym={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Hc={setTimeout:function(n,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];var r=Hc.delegate;return r?.setTimeout?r.setTimeout.apply(r,Yo([n,t],Go(e))):setTimeout.apply(void 0,Yo([n,t],Go(e)))},clearTimeout:function(n){var t=Hc.delegate;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function UT(n){Hc.setTimeout(function(){throw n})}function nd(){}function Eo(n){n()}var Xm=function(n){Za(t,n);function t(e){var i=n.call(this)||this;return i.isStopped=!1,e?(i.destination=e,Gm(e)&&e.add(i)):i.destination=GT,i}return t.create=function(e,i,r){return new Vc(e,i,r)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(tl),qT=Function.prototype.bind;function zl(n,t){return qT.call(n,t)}var KT=function(){function n(t){this.partialObserver=t}return n.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(i){co(i)}},n.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(i){co(i)}else co(t)},n.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){co(e)}},n}(),Vc=function(n){Za(t,n);function t(e,i,r){var s=n.call(this)||this,o;if(Vn(e)||!e)o={next:e??void 0,error:i??void 0,complete:r??void 0};else{var a;s&&Ym.useDeprecatedNextContext?(a=Object.create(e),a.unsubscribe=function(){return s.unsubscribe()},o={next:e.next&&zl(e.next,a),error:e.error&&zl(e.error,a),complete:e.complete&&zl(e.complete,a)}):o=e}return s.destination=new KT(o),s}return t}(Xm);function co(n){UT(n)}function JT(n){throw n}var GT={closed:!0,next:nd,error:JT,complete:nd},YT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function XT(n){return n}function QT(n){return n.length===0?XT:n.length===1?n[0]:function(e){return n.reduce(function(i,r){return r(i)},e)}}var id=function(){function n(t){t&&(this._subscribe=t)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(t,e,i){var r=this,s=tE(t)?t:new Vc(t,e,i);return Eo(function(){var o=r,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?r._subscribe(s):r._trySubscribe(s))}),s},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},n.prototype.forEach=function(t,e){var i=this;return e=rd(e),new e(function(r,s){var o=new Vc({next:function(a){try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});i.subscribe(o)})},n.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},n.prototype[YT]=function(){return this},n.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return QT(t)(this)},n.prototype.toPromise=function(t){var e=this;return t=rd(t),new t(function(i,r){var s;e.subscribe(function(o){return s=o},function(o){return r(o)},function(){return i(s)})})},n.create=function(t){return new n(t)},n}();function rd(n){var t;return(t=n??Ym.Promise)!==null&&t!==void 0?t:Promise}function ZT(n){return n&&Vn(n.next)&&Vn(n.error)&&Vn(n.complete)}function tE(n){return n&&n instanceof Xm||ZT(n)&&Gm(n)}var eE=Km(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Qm=function(n){Za(t,n);function t(){var e=n.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype.lift=function(e){var i=new sd(this,this);return i.operator=e,i},t.prototype._throwIfClosed=function(){if(this.closed)throw new eE},t.prototype.next=function(e){var i=this;Eo(function(){var r,s;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var o=Fc(i.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(e)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}}})},t.prototype.error=function(e){var i=this;Eo(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=e;for(var r=i.observers;r.length;)r.shift().error(e)}})},t.prototype.complete=function(){var e=this;Eo(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var i=e.observers;i.length;)i.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(e){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var i=this,r=this,s=r.hasError,o=r.isStopped,a=r.observers;return s||o?Jm:(this.currentObservers=null,a.push(e),new tl(function(){i.currentObservers=null,jc(a,e)}))},t.prototype._checkFinalizedStatuses=function(e){var i=this,r=i.hasError,s=i.thrownError,o=i.isStopped;r?e.error(s):o&&e.complete()},t.prototype.asObservable=function(){var e=new id;return e.source=this,e},t.create=function(e,i){return new sd(e,i)},t}(id),sd=function(n){Za(t,n);function t(e,i){var r=n.call(this)||this;return r.destination=e,r.source=i,r}return t.prototype.next=function(e){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.next)===null||r===void 0||r.call(i,e)},t.prototype.error=function(e){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.error)===null||r===void 0||r.call(i,e)},t.prototype.complete=function(){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||i===void 0||i.call(e)},t.prototype._subscribe=function(e){var i,r;return(r=(i=this.source)===null||i===void 0?void 0:i.subscribe(e))!==null&&r!==void 0?r:Jm},t}(Qm);const[Zm,t0]=ee(!1),[e0,nE]=ee(window.matchMedia("(prefers-color-scheme: dark)").matches),n0=new Qm,ur=()=>Xo.value,Mn={isInversed:Zm,setInversed(n){t0(n),Gu()},getCurrent:ur,getInversed:()=>e0()?"light":"dark",getColor(n){switch(n){case"professional":return ur()==="light"?"#00897b":"#43a047";case"education":return ur()==="light"?"#f4511e":"#fdd835";case"hobby":return ur()==="light","#546e7a";case"primary":return ur()==="light","#039be5"}return ur()==="light"?"#000":"#fff"},observe(n){n0.subscribe(n)}},Xo=document.createAttribute("data-theme");document.body.parentElement?.attributes.setNamedItem(Xo);const Gu=()=>{Xo.value=e0()!==Zm()?"dark":"light",n0.next(Xo.value)};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:n})=>{nE(!!n),t0(!1),Gu()});Gu();const iE=()=>I(Qa,{get value(){return Mn.isInversed()},offIcon:"auto_mode",get onIcon(){return`${Mn.getInversed()}_mode`},handler:n=>Mn.setInversed(n)}),rE=St("<blockquote><aside></aside>please don't print me on a paper!&nbsp;<br>this is to create <span>PDF</span> files<br>share function is available on mobile devices<br>or just scan or click the <!>QR code below<br><footer><br><i>sincerly yours,<br>planet Earth</i></footer></blockquote>",17),sE=St("<header></header>",2),oE=St("<ul><li></li></ul>",4),aE=St("<nav><ul><li></li></ul><ul><li></li></ul></nav>",10),lE=()=>(()=>{const n=sE.cloneNode(!0);return J(n,I(Ce,{get when(){return fe.get()==="print"},get fallback(){return(()=>{const t=aE.cloneNode(!0),e=t.firstChild,i=e.firstChild,r=e.nextSibling,s=r.firstChild;return J(i,I(BT,{})),J(t,I(Ce,{get when(){return fe.get()==="edit"},get children(){const o=oE.cloneNode(!0),a=o.firstChild;return J(a,I(WT,{})),o}}),r),J(s,I(iE,{})),t})()},get children(){const t=rE.cloneNode(!0),e=t.firstChild,i=e.nextSibling,r=i.nextSibling,s=r.nextSibling,o=s.nextSibling,a=o.nextSibling,l=a.nextSibling,c=l.nextSibling,u=c.nextSibling,h=u.nextSibling,f=h.nextSibling;return f.nextSibling,J(e,I(De,{name:"eco",style:{color:"#43a047"}})),J(t,I(De,{name:"block",style:{color:"#e53935"}}),r),J(t,I(De,{name:"print",style:{color:"#546e7a"}}),r),o.style.setProperty("color","var(--primary)"),J(t,I(De,{name:"share",style:{color:"var(--primary)"}}),c),J(t,I(De,{name:"qr_code_2",style:{color:"var(--primary)"}}),f),t}})),n})(),cE=()=>I(Qa,{offIcon:"workspaces",onIcon:"group_work",get value(){return Mt.store.cv.profile.grouped},handler:n=>Mt.update(t=>t.cv.profile.grouped=n)});var Qo={},uE={get exports(){return Qo},set exports(n){Qo=n}};(function(n,t){(function(e,i){i(t)})(ds,function(e){e.PipsMode=void 0,function(_){_.Range="range",_.Steps="steps",_.Positions="positions",_.Count="count",_.Values="values"}(e.PipsMode||(e.PipsMode={})),e.PipsType=void 0,function(_){_[_.None=-1]="None",_[_.NoValue=0]="NoValue",_[_.LargeValue=1]="LargeValue",_[_.SmallValue=2]="SmallValue"}(e.PipsType||(e.PipsType={}));function i(_){return r(_)&&typeof _.from=="function"}function r(_){return typeof _=="object"&&typeof _.to=="function"}function s(_){_.parentElement.removeChild(_)}function o(_){return _!=null}function a(_){_.preventDefault()}function l(_){return _.filter(function(b){return this[b]?!1:this[b]=!0},{})}function c(_,b){return Math.round(_/b)*b}function u(_,b){var X=_.getBoundingClientRect(),Y=_.ownerDocument,tt=Y.documentElement,lt=F(Y);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(lt.x=0),b?X.top+lt.y-tt.clientTop:X.left+lt.x-tt.clientLeft}function h(_){return typeof _=="number"&&!isNaN(_)&&isFinite(_)}function f(_,b,X){X>0&&(v(_,b),setTimeout(function(){C(_,b)},X))}function d(_){return Math.max(Math.min(_,100),0)}function p(_){return Array.isArray(_)?_:[_]}function m(_){_=String(_);var b=_.split(".");return b.length>1?b[1].length:0}function v(_,b){_.classList&&!/\s/.test(b)?_.classList.add(b):_.className+=" "+b}function C(_,b){_.classList&&!/\s/.test(b)?_.classList.remove(b):_.className=_.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")}function E(_,b){return _.classList?_.classList.contains(b):new RegExp("\\b"+b+"\\b").test(_.className)}function F(_){var b=window.pageXOffset!==void 0,X=(_.compatMode||"")==="CSS1Compat",Y=b?window.pageXOffset:X?_.documentElement.scrollLeft:_.body.scrollLeft,tt=b?window.pageYOffset:X?_.documentElement.scrollTop:_.body.scrollTop;return{x:Y,y:tt}}function q(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function j(){var _=!1;try{var b=Object.defineProperty({},"passive",{get:function(){_=!0}});window.addEventListener("test",null,b)}catch{}return _}function A(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function R(_,b){return 100/(b-_)}function L(_,b,X){return b*100/(_[X+1]-_[X])}function rt(_,b){return L(_,_[0]<0?b+Math.abs(_[0]):b-_[0],0)}function pt(_,b){return b*(_[1]-_[0])/100+_[0]}function ut(_,b){for(var X=1;_>=b[X];)X+=1;return X}function kt(_,b,X){if(X>=_.slice(-1)[0])return 100;var Y=ut(X,_),tt=_[Y-1],lt=_[Y],ht=b[Y-1],Tt=b[Y];return ht+rt([tt,lt],X)/R(ht,Tt)}function Dt(_,b,X){if(X>=100)return _.slice(-1)[0];var Y=ut(X,b),tt=_[Y-1],lt=_[Y],ht=b[Y-1],Tt=b[Y];return pt([tt,lt],(X-ht)*R(ht,Tt))}function U(_,b,X,Y){if(Y===100)return Y;var tt=ut(Y,_),lt=_[tt-1],ht=_[tt];return X?Y-lt>(ht-lt)/2?ht:lt:b[tt-1]?_[tt-1]+c(Y-_[tt-1],b[tt-1]):Y}var V=function(){function _(b,X,Y){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[Y||!1],this.xNumSteps=[!1],this.snap=X;var tt,lt=[];for(Object.keys(b).forEach(function(ht){lt.push([p(b[ht]),ht])}),lt.sort(function(ht,Tt){return ht[0][0]-Tt[0][0]}),tt=0;tt<lt.length;tt++)this.handleEntryPoint(lt[tt][1],lt[tt][0]);for(this.xNumSteps=this.xSteps.slice(0),tt=0;tt<this.xNumSteps.length;tt++)this.handleStepPoint(tt,this.xNumSteps[tt])}return _.prototype.getDistance=function(b){for(var X=[],Y=0;Y<this.xNumSteps.length-1;Y++)X[Y]=L(this.xVal,b,Y);return X},_.prototype.getAbsoluteDistance=function(b,X,Y){var tt=0;if(b<this.xPct[this.xPct.length-1])for(;b>this.xPct[tt+1];)tt++;else b===this.xPct[this.xPct.length-1]&&(tt=this.xPct.length-2);!Y&&b===this.xPct[tt+1]&&tt++,X===null&&(X=[]);var lt,ht=1,Tt=X[tt],yt=0,xt=0,Yt=0,Bt=0;for(Y?lt=(b-this.xPct[tt])/(this.xPct[tt+1]-this.xPct[tt]):lt=(this.xPct[tt+1]-b)/(this.xPct[tt+1]-this.xPct[tt]);Tt>0;)yt=this.xPct[tt+1+Bt]-this.xPct[tt+Bt],X[tt+Bt]*ht+100-lt*100>100?(xt=yt*lt,ht=(Tt-100*lt)/X[tt+Bt],lt=1):(xt=X[tt+Bt]*yt/100*ht,ht=0),Y?(Yt=Yt-xt,this.xPct.length+Bt>=1&&Bt--):(Yt=Yt+xt,this.xPct.length-Bt>=1&&Bt++),Tt=X[tt+Bt]*ht;return b+Yt},_.prototype.toStepping=function(b){return b=kt(this.xVal,this.xPct,b),b},_.prototype.fromStepping=function(b){return Dt(this.xVal,this.xPct,b)},_.prototype.getStep=function(b){return b=U(this.xPct,this.xSteps,this.snap,b),b},_.prototype.getDefaultStep=function(b,X,Y){var tt=ut(b,this.xPct);return(b===100||X&&b===this.xPct[tt-1])&&(tt=Math.max(tt-1,1)),(this.xVal[tt]-this.xVal[tt-1])/Y},_.prototype.getNearbySteps=function(b){var X=ut(b,this.xPct);return{stepBefore:{startValue:this.xVal[X-2],step:this.xNumSteps[X-2],highestStep:this.xHighestCompleteStep[X-2]},thisStep:{startValue:this.xVal[X-1],step:this.xNumSteps[X-1],highestStep:this.xHighestCompleteStep[X-1]},stepAfter:{startValue:this.xVal[X],step:this.xNumSteps[X],highestStep:this.xHighestCompleteStep[X]}}},_.prototype.countStepDecimals=function(){var b=this.xNumSteps.map(m);return Math.max.apply(null,b)},_.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},_.prototype.convert=function(b){return this.getStep(this.toStepping(b))},_.prototype.handleEntryPoint=function(b,X){var Y;if(b==="min"?Y=0:b==="max"?Y=100:Y=parseFloat(b),!h(Y)||!h(X[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(Y),this.xVal.push(X[0]);var tt=Number(X[1]);Y?this.xSteps.push(isNaN(tt)?!1:tt):isNaN(tt)||(this.xSteps[0]=tt),this.xHighestCompleteStep.push(0)},_.prototype.handleStepPoint=function(b,X){if(X){if(this.xVal[b]===this.xVal[b+1]){this.xSteps[b]=this.xHighestCompleteStep[b]=this.xVal[b];return}this.xSteps[b]=L([this.xVal[b],this.xVal[b+1]],X,0)/R(this.xPct[b],this.xPct[b+1]);var Y=(this.xVal[b+1]-this.xVal[b])/this.xNumSteps[b],tt=Math.ceil(Number(Y.toFixed(3))-1),lt=this.xVal[b]+this.xNumSteps[b]*tt;this.xHighestCompleteStep[b]=lt}},_}(),W={to:function(_){return _===void 0?"":_.toFixed(2)},from:Number},H={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},z={tooltips:".__tooltips",aria:".__aria"};function G(_,b){if(!h(b))throw new Error("noUiSlider: 'step' is not numeric.");_.singleStep=b}function st(_,b){if(!h(b))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");_.keyboardPageMultiplier=b}function Z(_,b){if(!h(b))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");_.keyboardMultiplier=b}function ct(_,b){if(!h(b))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");_.keyboardDefaultStep=b}function Nt(_,b){if(typeof b!="object"||Array.isArray(b))throw new Error("noUiSlider: 'range' is not an object.");if(b.min===void 0||b.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");_.spectrum=new V(b,_.snap||!1,_.singleStep)}function Wt(_,b){if(b=p(b),!Array.isArray(b)||!b.length)throw new Error("noUiSlider: 'start' option is incorrect.");_.handles=b.length,_.start=b}function mt(_,b){if(typeof b!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");_.snap=b}function y(_,b){if(typeof b!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");_.animate=b}function g(_,b){if(typeof b!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");_.animationDuration=b}function x(_,b){var X=[!1],Y;if(b==="lower"?b=[!0,!1]:b==="upper"&&(b=[!1,!0]),b===!0||b===!1){for(Y=1;Y<_.handles;Y++)X.push(b);X.push(!1)}else{if(!Array.isArray(b)||!b.length||b.length!==_.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");X=b}_.connect=X}function S(_,b){switch(b){case"horizontal":_.ort=0;break;case"vertical":_.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function w(_,b){if(!h(b))throw new Error("noUiSlider: 'margin' option must be numeric.");b!==0&&(_.margin=_.spectrum.getDistance(b))}function O(_,b){if(!h(b))throw new Error("noUiSlider: 'limit' option must be numeric.");if(_.limit=_.spectrum.getDistance(b),!_.limit||_.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function k(_,b){var X;if(!h(b)&&!Array.isArray(b))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(b)&&!(b.length===2||h(b[0])||h(b[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(b!==0){for(Array.isArray(b)||(b=[b,b]),_.padding=[_.spectrum.getDistance(b[0]),_.spectrum.getDistance(b[1])],X=0;X<_.spectrum.xNumSteps.length-1;X++)if(_.padding[0][X]<0||_.padding[1][X]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var Y=b[0]+b[1],tt=_.spectrum.xVal[0],lt=_.spectrum.xVal[_.spectrum.xVal.length-1];if(Y/(lt-tt)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function T(_,b){switch(b){case"ltr":_.dir=0;break;case"rtl":_.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function D(_,b){if(typeof b!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var X=b.indexOf("tap")>=0,Y=b.indexOf("drag")>=0,tt=b.indexOf("fixed")>=0,lt=b.indexOf("snap")>=0,ht=b.indexOf("hover")>=0,Tt=b.indexOf("unconstrained")>=0,yt=b.indexOf("drag-all")>=0,xt=b.indexOf("smooth-steps")>=0;if(tt){if(_.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");w(_,_.start[1]-_.start[0])}if(Tt&&(_.margin||_.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");_.events={tap:X||lt,drag:Y,dragAll:yt,smoothSteps:xt,fixed:tt,snap:lt,hover:ht,unconstrained:Tt}}function $(_,b){if(b!==!1)if(b===!0||r(b)){_.tooltips=[];for(var X=0;X<_.handles;X++)_.tooltips.push(b)}else{if(b=p(b),b.length!==_.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");b.forEach(function(Y){if(typeof Y!="boolean"&&!r(Y))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),_.tooltips=b}}function P(_,b){if(b.length!==_.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");_.handleAttributes=b}function K(_,b){if(!r(b))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");_.ariaFormat=b}function nt(_,b){if(!i(b))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");_.format=b}function dt(_,b){if(typeof b!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");_.keyboardSupport=b}function wt(_,b){_.documentElement=b}function _t(_,b){if(typeof b!="string"&&b!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");_.cssPrefix=b}function Ot(_,b){if(typeof b!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof _.cssPrefix=="string"?(_.cssClasses={},Object.keys(b).forEach(function(X){_.cssClasses[X]=_.cssPrefix+b[X]})):_.cssClasses=b}function Zt(_){var b={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:W,format:W},X={step:{r:!1,t:G},keyboardPageMultiplier:{r:!1,t:st},keyboardMultiplier:{r:!1,t:Z},keyboardDefaultStep:{r:!1,t:ct},start:{r:!0,t:Wt},connect:{r:!0,t:x},direction:{r:!0,t:T},snap:{r:!1,t:mt},animate:{r:!1,t:y},animationDuration:{r:!1,t:g},range:{r:!0,t:Nt},orientation:{r:!1,t:S},margin:{r:!1,t:w},limit:{r:!1,t:O},padding:{r:!1,t:k},behaviour:{r:!0,t:D},ariaFormat:{r:!1,t:K},format:{r:!1,t:nt},tooltips:{r:!1,t:$},keyboardSupport:{r:!0,t:dt},documentElement:{r:!1,t:wt},cssPrefix:{r:!0,t:_t},cssClasses:{r:!0,t:Ot},handleAttributes:{r:!1,t:P}},Y={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:H,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};_.format&&!_.ariaFormat&&(_.ariaFormat=_.format),Object.keys(X).forEach(function(yt){if(!o(_[yt])&&Y[yt]===void 0){if(X[yt].r)throw new Error("noUiSlider: '"+yt+"' is required.");return}X[yt].t(b,o(_[yt])?_[yt]:Y[yt])}),b.pips=_.pips;var tt=document.createElement("div"),lt=tt.style.msTransform!==void 0,ht=tt.style.transform!==void 0;b.transformRule=ht?"transform":lt?"msTransform":"webkitTransform";var Tt=[["left","top"],["right","bottom"]];return b.style=Tt[b.dir][b.ort],b}function te(_,b,X){var Y=q(),tt=A(),lt=tt&&j(),ht=_,Tt,yt,xt,Yt,Bt,It=b.spectrum,Qe=[],jt=[],Ve=[],xl=0,Nn={},lr=_.ownerDocument,no=b.documentElement||lr.documentElement,io=lr.body,Py=lr.dir==="rtl"||b.ort===1?0:100;function Ln(M,N){var B=lr.createElement("div");return N&&v(B,N),M.appendChild(B),B}function Dy(M,N){var B=Ln(M,b.cssClasses.origin),Q=Ln(B,b.cssClasses.handle);if(Ln(Q,b.cssClasses.touchArea),Q.setAttribute("data-handle",String(N)),b.keyboardSupport&&(Q.setAttribute("tabindex","0"),Q.addEventListener("keydown",function(ot){return Gy(ot,N)})),b.handleAttributes!==void 0){var at=b.handleAttributes[N];Object.keys(at).forEach(function(ot){Q.setAttribute(ot,at[ot])})}return Q.setAttribute("role","slider"),Q.setAttribute("aria-orientation",b.ort?"vertical":"horizontal"),N===0?v(Q,b.cssClasses.handleLower):N===b.handles-1&&v(Q,b.cssClasses.handleUpper),B.handle=Q,B}function Uh(M,N){return N?Ln(M,b.cssClasses.connect):!1}function Iy(M,N){var B=Ln(N,b.cssClasses.connects);yt=[],xt=[],xt.push(Uh(B,M[0]));for(var Q=0;Q<b.handles;Q++)yt.push(Dy(N,Q)),Ve[Q]=Q,xt.push(Uh(B,M[Q+1]))}function Ny(M){v(M,b.cssClasses.target),b.dir===0?v(M,b.cssClasses.ltr):v(M,b.cssClasses.rtl),b.ort===0?v(M,b.cssClasses.horizontal):v(M,b.cssClasses.vertical);var N=getComputedStyle(M).direction;return N==="rtl"?v(M,b.cssClasses.textDirectionRtl):v(M,b.cssClasses.textDirectionLtr),Ln(M,b.cssClasses.base)}function Ly(M,N){return!b.tooltips||!b.tooltips[N]?!1:Ln(M.firstChild,b.cssClasses.tooltip)}function qh(){return ht.hasAttribute("disabled")}function vl(M){var N=yt[M];return N.hasAttribute("disabled")}function Ry(M){M!=null?(yt[M].setAttribute("disabled",""),yt[M].handle.removeAttribute("tabindex")):(ht.setAttribute("disabled",""),yt.forEach(function(N){N.handle.removeAttribute("tabindex")}))}function zy(M){M!=null?(yt[M].removeAttribute("disabled"),yt[M].handle.setAttribute("tabindex","0")):(ht.removeAttribute("disabled"),yt.forEach(function(N){N.removeAttribute("disabled"),N.handle.setAttribute("tabindex","0")}))}function wl(){Bt&&(rs("update"+z.tooltips),Bt.forEach(function(M){M&&s(M)}),Bt=null)}function Kh(){wl(),Bt=yt.map(Ly),Cl("update"+z.tooltips,function(M,N,B){if(!(!Bt||!b.tooltips)&&Bt[N]!==!1){var Q=M[N];b.tooltips[N]!==!0&&(Q=b.tooltips[N].to(B[N])),Bt[N].innerHTML=Q}})}function By(){rs("update"+z.aria),Cl("update"+z.aria,function(M,N,B,Q,at){Ve.forEach(function(ot){var At=yt[ot],bt=ro(jt,ot,0,!0,!0,!0),Xt=ro(jt,ot,100,!0,!0,!0),qt=at[ot],ne=String(b.ariaFormat.to(B[ot]));bt=It.fromStepping(bt).toFixed(1),Xt=It.fromStepping(Xt).toFixed(1),qt=It.fromStepping(qt).toFixed(1),At.children[0].setAttribute("aria-valuemin",bt),At.children[0].setAttribute("aria-valuemax",Xt),At.children[0].setAttribute("aria-valuenow",qt),At.children[0].setAttribute("aria-valuetext",ne)})})}function Fy(M){if(M.mode===e.PipsMode.Range||M.mode===e.PipsMode.Steps)return It.xVal;if(M.mode===e.PipsMode.Count){if(M.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var N=M.values-1,B=100/N,Q=[];N--;)Q[N]=N*B;return Q.push(100),Jh(Q,M.stepped)}return M.mode===e.PipsMode.Positions?Jh(M.values,M.stepped):M.mode===e.PipsMode.Values?M.stepped?M.values.map(function(at){return It.fromStepping(It.getStep(It.toStepping(at)))}):M.values:[]}function Jh(M,N){return M.map(function(B){return It.fromStepping(N?It.getStep(B):B)})}function jy(M){function N(qt,ne){return Number((qt+ne).toFixed(7))}var B=Fy(M),Q={},at=It.xVal[0],ot=It.xVal[It.xVal.length-1],At=!1,bt=!1,Xt=0;return B=l(B.slice().sort(function(qt,ne){return qt-ne})),B[0]!==at&&(B.unshift(at),At=!0),B[B.length-1]!==ot&&(B.push(ot),bt=!0),B.forEach(function(qt,ne){var ie,Ht,de,Te=qt,be=B[ne+1],_e,Tl,El,$l,rf,Pl,sf,of=M.mode===e.PipsMode.Steps;for(of&&(ie=It.xNumSteps[ne]),ie||(ie=be-Te),be===void 0&&(be=Te),ie=Math.max(ie,1e-7),Ht=Te;Ht<=be;Ht=N(Ht,ie)){for(_e=It.toStepping(Ht),Tl=_e-Xt,rf=Tl/(M.density||1),Pl=Math.round(rf),sf=Tl/Pl,de=1;de<=Pl;de+=1)El=Xt+de*sf,Q[El.toFixed(5)]=[It.fromStepping(El),0];$l=B.indexOf(Ht)>-1?e.PipsType.LargeValue:of?e.PipsType.SmallValue:e.PipsType.NoValue,!ne&&At&&Ht!==be&&($l=0),Ht===be&&bt||(Q[_e.toFixed(5)]=[Ht,$l]),Xt=_e}}),Q}function Hy(M,N,B){var Q,at,ot=lr.createElement("div"),At=(Q={},Q[e.PipsType.None]="",Q[e.PipsType.NoValue]=b.cssClasses.valueNormal,Q[e.PipsType.LargeValue]=b.cssClasses.valueLarge,Q[e.PipsType.SmallValue]=b.cssClasses.valueSub,Q),bt=(at={},at[e.PipsType.None]="",at[e.PipsType.NoValue]=b.cssClasses.markerNormal,at[e.PipsType.LargeValue]=b.cssClasses.markerLarge,at[e.PipsType.SmallValue]=b.cssClasses.markerSub,at),Xt=[b.cssClasses.valueHorizontal,b.cssClasses.valueVertical],qt=[b.cssClasses.markerHorizontal,b.cssClasses.markerVertical];v(ot,b.cssClasses.pips),v(ot,b.ort===0?b.cssClasses.pipsHorizontal:b.cssClasses.pipsVertical);function ne(Ht,de){var Te=de===b.cssClasses.value,be=Te?Xt:qt,_e=Te?At:bt;return de+" "+be[b.ort]+" "+_e[Ht]}function ie(Ht,de,Te){if(Te=N?N(de,Te):Te,Te!==e.PipsType.None){var be=Ln(ot,!1);be.className=ne(Te,b.cssClasses.marker),be.style[b.style]=Ht+"%",Te>e.PipsType.NoValue&&(be=Ln(ot,!1),be.className=ne(Te,b.cssClasses.value),be.setAttribute("data-value",String(de)),be.style[b.style]=Ht+"%",be.innerHTML=String(B.to(de)))}}return Object.keys(M).forEach(function(Ht){ie(Ht,M[Ht][0],M[Ht][1])}),ot}function Sl(){Yt&&(s(Yt),Yt=null)}function _l(M){Sl();var N=jy(M),B=M.filter,Q=M.format||{to:function(at){return String(Math.round(at))}};return Yt=ht.appendChild(Hy(N,B,Q)),Yt}function Gh(){var M=Tt.getBoundingClientRect(),N="offset"+["Width","Height"][b.ort];return b.ort===0?M.width||Tt[N]:M.height||Tt[N]}function Ai(M,N,B,Q){var at=function(At){var bt=Vy(At,Q.pageOffset,Q.target||N);if(!bt||qh()&&!Q.doNotReject||E(ht,b.cssClasses.tap)&&!Q.doNotReject||M===Y.start&&bt.buttons!==void 0&&bt.buttons>1||Q.hover&&bt.buttons)return!1;lt||bt.preventDefault(),bt.calcPoint=bt.points[b.ort],B(bt,Q)},ot=[];return M.split(" ").forEach(function(At){N.addEventListener(At,at,lt?{passive:!0}:!1),ot.push([At,at])}),ot}function Vy(M,N,B){var Q=M.type.indexOf("touch")===0,at=M.type.indexOf("mouse")===0,ot=M.type.indexOf("pointer")===0,At=0,bt=0;if(M.type.indexOf("MSPointer")===0&&(ot=!0),M.type==="mousedown"&&!M.buttons&&!M.touches)return!1;if(Q){var Xt=function(ie){var Ht=ie.target;return Ht===B||B.contains(Ht)||M.composed&&M.composedPath().shift()===B};if(M.type==="touchstart"){var qt=Array.prototype.filter.call(M.touches,Xt);if(qt.length>1)return!1;At=qt[0].pageX,bt=qt[0].pageY}else{var ne=Array.prototype.find.call(M.changedTouches,Xt);if(!ne)return!1;At=ne.pageX,bt=ne.pageY}}return N=N||F(lr),(at||ot)&&(At=M.clientX+N.x,bt=M.clientY+N.y),M.pageOffset=N,M.points=[At,bt],M.cursor=at||ot,M}function Yh(M){var N=M-u(Tt,b.ort),B=N*100/Gh();return B=d(B),b.dir?100-B:B}function Wy(M){var N=100,B=!1;return yt.forEach(function(Q,at){if(!vl(at)){var ot=jt[at],At=Math.abs(ot-M),bt=At===100&&N===100,Xt=At<N,qt=At<=N&&M>ot;(Xt||qt||bt)&&(B=at,N=At)}}),B}function Uy(M,N){M.type==="mouseout"&&M.target.nodeName==="HTML"&&M.relatedTarget===null&&kl(M,N)}function qy(M,N){if(navigator.appVersion.indexOf("MSIE 9")===-1&&M.buttons===0&&N.buttonsProperty!==0)return kl(M,N);var B=(b.dir?-1:1)*(M.calcPoint-N.startCalcPoint),Q=B*100/N.baseSize;Xh(B>0,Q,N.locations,N.handleNumbers,N.connect)}function kl(M,N){N.handle&&(C(N.handle,b.cssClasses.active),xl-=1),N.listeners.forEach(function(B){no.removeEventListener(B[0],B[1])}),xl===0&&(C(ht,b.cssClasses.drag),Al(),M.cursor&&(io.style.cursor="",io.removeEventListener("selectstart",a))),b.events.smoothSteps&&(N.handleNumbers.forEach(function(B){Ti(B,jt[B],!0,!0,!1,!1)}),N.handleNumbers.forEach(function(B){ue("update",B)})),N.handleNumbers.forEach(function(B){ue("change",B),ue("set",B),ue("end",B)})}function Ml(M,N){if(!N.handleNumbers.some(vl)){var B;if(N.handleNumbers.length===1){var Q=yt[N.handleNumbers[0]];B=Q.children[0],xl+=1,v(B,b.cssClasses.active)}M.stopPropagation();var at=[],ot=Ai(Y.move,no,qy,{target:M.target,handle:B,connect:N.connect,listeners:at,startCalcPoint:M.calcPoint,baseSize:Gh(),pageOffset:M.pageOffset,handleNumbers:N.handleNumbers,buttonsProperty:M.buttons,locations:jt.slice()}),At=Ai(Y.end,no,kl,{target:M.target,handle:B,listeners:at,doNotReject:!0,handleNumbers:N.handleNumbers}),bt=Ai("mouseout",no,Uy,{target:M.target,handle:B,listeners:at,doNotReject:!0,handleNumbers:N.handleNumbers});at.push.apply(at,ot.concat(At,bt)),M.cursor&&(io.style.cursor=getComputedStyle(M.target).cursor,yt.length>1&&v(ht,b.cssClasses.drag),io.addEventListener("selectstart",a,!1)),N.handleNumbers.forEach(function(Xt){ue("start",Xt)})}}function Ky(M){M.stopPropagation();var N=Yh(M.calcPoint),B=Wy(N);B!==!1&&(b.events.snap||f(ht,b.cssClasses.tap,b.animationDuration),Ti(B,N,!0,!0),Al(),ue("slide",B,!0),ue("update",B,!0),b.events.snap?Ml(M,{handleNumbers:[B]}):(ue("change",B,!0),ue("set",B,!0)))}function Jy(M){var N=Yh(M.calcPoint),B=It.getStep(N),Q=It.fromStepping(B);Object.keys(Nn).forEach(function(at){at.split(".")[0]==="hover"&&Nn[at].forEach(function(ot){ot.call(oo,Q)})})}function Gy(M,N){if(qh()||vl(N))return!1;var B=["Left","Right"],Q=["Down","Up"],at=["PageDown","PageUp"],ot=["Home","End"];b.dir&&!b.ort?B.reverse():b.ort&&!b.dir&&(Q.reverse(),at.reverse());var At=M.key.replace("Arrow",""),bt=At===at[0],Xt=At===at[1],qt=At===Q[0]||At===B[0]||bt,ne=At===Q[1]||At===B[1]||Xt,ie=At===ot[0],Ht=At===ot[1];if(!qt&&!ne&&!ie&&!Ht)return!0;M.preventDefault();var de;if(ne||qt){var Te=qt?0:1,be=nf(N),_e=be[Te];if(_e===null)return!1;_e===!1&&(_e=It.getDefaultStep(jt[N],qt,b.keyboardDefaultStep)),Xt||bt?_e*=b.keyboardPageMultiplier:_e*=b.keyboardMultiplier,_e=Math.max(_e,1e-7),_e=(qt?-1:1)*_e,de=Qe[N]+_e}else Ht?de=b.spectrum.xVal[b.spectrum.xVal.length-1]:de=b.spectrum.xVal[0];return Ti(N,It.toStepping(de),!0,!0),ue("slide",N),ue("update",N),ue("change",N),ue("set",N),!1}function Yy(M){M.fixed||yt.forEach(function(N,B){Ai(Y.start,N.children[0],Ml,{handleNumbers:[B]})}),M.tap&&Ai(Y.start,Tt,Ky,{}),M.hover&&Ai(Y.move,Tt,Jy,{hover:!0}),M.drag&&xt.forEach(function(N,B){if(!(N===!1||B===0||B===xt.length-1)){var Q=yt[B-1],at=yt[B],ot=[N],At=[Q,at],bt=[B-1,B];v(N,b.cssClasses.draggable),M.fixed&&(ot.push(Q.children[0]),ot.push(at.children[0])),M.dragAll&&(At=yt,bt=Ve),ot.forEach(function(Xt){Ai(Y.start,Xt,Ml,{handles:At,handleNumbers:bt,connect:N})})}})}function Cl(M,N){Nn[M]=Nn[M]||[],Nn[M].push(N),M.split(".")[0]==="update"&&yt.forEach(function(B,Q){ue("update",Q)})}function Xy(M){return M===z.aria||M===z.tooltips}function rs(M){var N=M&&M.split(".")[0],B=N?M.substring(N.length):M;Object.keys(Nn).forEach(function(Q){var at=Q.split(".")[0],ot=Q.substring(at.length);(!N||N===at)&&(!B||B===ot)&&(!Xy(ot)||B===ot)&&delete Nn[Q]})}function ue(M,N,B){Object.keys(Nn).forEach(function(Q){var at=Q.split(".")[0];M===at&&Nn[Q].forEach(function(ot){ot.call(oo,Qe.map(b.format.to),N,Qe.slice(),B||!1,jt.slice(),oo)})})}function ro(M,N,B,Q,at,ot,At){var bt;return yt.length>1&&!b.events.unconstrained&&(Q&&N>0&&(bt=It.getAbsoluteDistance(M[N-1],b.margin,!1),B=Math.max(B,bt)),at&&N<yt.length-1&&(bt=It.getAbsoluteDistance(M[N+1],b.margin,!0),B=Math.min(B,bt))),yt.length>1&&b.limit&&(Q&&N>0&&(bt=It.getAbsoluteDistance(M[N-1],b.limit,!1),B=Math.min(B,bt)),at&&N<yt.length-1&&(bt=It.getAbsoluteDistance(M[N+1],b.limit,!0),B=Math.max(B,bt))),b.padding&&(N===0&&(bt=It.getAbsoluteDistance(0,b.padding[0],!1),B=Math.max(B,bt)),N===yt.length-1&&(bt=It.getAbsoluteDistance(100,b.padding[1],!0),B=Math.min(B,bt))),At||(B=It.getStep(B)),B=d(B),B===M[N]&&!ot?!1:B}function Ol(M,N){var B=b.ort;return(B?N:M)+", "+(B?M:N)}function Xh(M,N,B,Q,at){var ot=B.slice(),At=Q[0],bt=b.events.smoothSteps,Xt=[!M,M],qt=[M,!M];Q=Q.slice(),M&&Q.reverse(),Q.length>1?Q.forEach(function(ie,Ht){var de=ro(ot,ie,ot[ie]+N,Xt[Ht],qt[Ht],!1,bt);de===!1?N=0:(N=de-ot[ie],ot[ie]=de)}):Xt=qt=[!0];var ne=!1;Q.forEach(function(ie,Ht){ne=Ti(ie,B[ie]+N,Xt[Ht],qt[Ht],!1,bt)||ne}),ne&&(Q.forEach(function(ie){ue("update",ie),ue("slide",ie)}),at!=null&&ue("drag",At))}function Qh(M,N){return b.dir?100-M-N:M}function Qy(M,N){jt[M]=N,Qe[M]=It.fromStepping(N);var B=Qh(N,0)-Py,Q="translate("+Ol(B+"%","0")+")";yt[M].style[b.transformRule]=Q,Zh(M),Zh(M+1)}function Al(){Ve.forEach(function(M){var N=jt[M]>50?-1:1,B=3+(yt.length+N*M);yt[M].style.zIndex=String(B)})}function Ti(M,N,B,Q,at,ot){return at||(N=ro(jt,M,N,B,Q,!1,ot)),N===!1?!1:(Qy(M,N),!0)}function Zh(M){if(xt[M]){var N=0,B=100;M!==0&&(N=jt[M-1]),M!==xt.length-1&&(B=jt[M]);var Q=B-N,at="translate("+Ol(Qh(N,Q)+"%","0")+")",ot="scale("+Ol(Q/100,"1")+")";xt[M].style[b.transformRule]=at+" "+ot}}function tf(M,N){return M===null||M===!1||M===void 0||(typeof M=="number"&&(M=String(M)),M=b.format.from(M),M!==!1&&(M=It.toStepping(M)),M===!1||isNaN(M))?jt[N]:M}function so(M,N,B){var Q=p(M),at=jt[0]===void 0;N=N===void 0?!0:N,b.animate&&!at&&f(ht,b.cssClasses.tap,b.animationDuration),Ve.forEach(function(bt){Ti(bt,tf(Q[bt],bt),!0,!1,B)});var ot=Ve.length===1?0:1;if(at&&It.hasNoSize()&&(B=!0,jt[0]=0,Ve.length>1)){var At=100/(Ve.length-1);Ve.forEach(function(bt){jt[bt]=bt*At})}for(;ot<Ve.length;++ot)Ve.forEach(function(bt){Ti(bt,jt[bt],!0,!0,B)});Al(),Ve.forEach(function(bt){ue("update",bt),Q[bt]!==null&&N&&ue("set",bt)})}function Zy(M){so(b.start,M)}function t1(M,N,B,Q){if(M=Number(M),!(M>=0&&M<Ve.length))throw new Error("noUiSlider: invalid handle number, got: "+M);Ti(M,tf(N,M),!0,!0,Q),ue("update",M),B&&ue("set",M)}function ef(M){if(M===void 0&&(M=!1),M)return Qe.length===1?Qe[0]:Qe.slice(0);var N=Qe.map(b.format.to);return N.length===1?N[0]:N}function e1(){for(rs(z.aria),rs(z.tooltips),Object.keys(b.cssClasses).forEach(function(M){C(ht,b.cssClasses[M])});ht.firstChild;)ht.removeChild(ht.firstChild);delete ht.noUiSlider}function nf(M){var N=jt[M],B=It.getNearbySteps(N),Q=Qe[M],at=B.thisStep.step,ot=null;if(b.snap)return[Q-B.stepBefore.startValue||null,B.stepAfter.startValue-Q||null];at!==!1&&Q+at>B.stepAfter.startValue&&(at=B.stepAfter.startValue-Q),Q>B.thisStep.startValue?ot=B.thisStep.step:B.stepBefore.step===!1?ot=!1:ot=Q-B.stepBefore.highestStep,N===100?at=null:N===0&&(ot=null);var At=It.countStepDecimals();return at!==null&&at!==!1&&(at=Number(at.toFixed(At))),ot!==null&&ot!==!1&&(ot=Number(ot.toFixed(At))),[ot,at]}function n1(){return Ve.map(nf)}function i1(M,N){var B=ef(),Q=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];Q.forEach(function(ot){M[ot]!==void 0&&(X[ot]=M[ot])});var at=Zt(X);Q.forEach(function(ot){M[ot]!==void 0&&(b[ot]=at[ot])}),It=at.spectrum,b.margin=at.margin,b.limit=at.limit,b.padding=at.padding,b.pips?_l(b.pips):Sl(),b.tooltips?Kh():wl(),jt=[],so(o(M.start)?M.start:B,N)}function r1(){Tt=Ny(ht),Iy(b.connect,Tt),Yy(b.events),so(b.start),b.pips&&_l(b.pips),b.tooltips&&Kh(),By()}r1();var oo={destroy:e1,steps:n1,on:Cl,off:rs,get:ef,set:so,setHandle:t1,reset:Zy,disable:Ry,enable:zy,__moveHandles:function(M,N,B){Xh(M,N,jt,B)},options:X,updateOptions:i1,target:ht,removePips:Sl,removeTooltips:wl,getPositions:function(){return jt.slice()},getTooltips:function(){return Bt},getOrigins:function(){return yt},pips:_l};return oo}function zt(_,b){if(!_||!_.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+_);if(_.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var X=Zt(b),Y=te(_,X,b);return _.noUiSlider=Y,Y}var Rt={__spectrum:V,cssClasses:H,create:zt};e.create=zt,e.cssClasses=H,e.default=Rt,Object.defineProperty(e,"__esModule",{value:!0})})})(uE,Qo);const hE=tm(Qo);const fE=St("<div></div>",2),dE=n=>{const[t,e]=yn(n,["onChange"]);return(()=>{const i=fE.cloneNode(!0);return Qg(r=>{document.adoptNode(r),hE.create(r,e).on("set",t.onChange)},i),i})()};const pE={professional:"work",education:"school",hobby:"self_improvement"},$o=n=>I(De,{get name(){return pE[typeof n.record=="string"?n.record:n.record.type]},class:"record-icon"});const gE=St('<div class="scope"><nav><ul><li class="professional"></li><li class="education"></li><li class="hobby"></li></ul></nav><nav><ul><li></li></ul></nav></div>',18),mE=()=>(()=>{const n=gE.cloneNode(!0),t=n.firstChild,e=t.firstChild,i=e.firstChild,r=i.nextSibling,s=r.nextSibling,o=t.nextSibling,a=o.firstChild,l=a.firstChild;return J(i,I($o,{record:"professional"})),J(r,I($o,{record:"education"})),J(s,I($o,{record:"hobby"})),J(l,I(dE,{onChange:c=>{Mt.update(u=>u.cv.profile.scope=c.sort().map(h=>+h))},get start(){return Mt.store.cv.profile.scope},connect:!0,step:1,range:{min:0,max:2}})),Oe(()=>n.style.setProperty("visibility",Zg("friend")?void 0:"hidden")),n})();const bE=()=>I(Kr,{get fallback(){return I(yE,{})},get children(){return[I(Je,{get when(){return fe.get()==="edit"},get children(){return I(vE,{})}}),I(Je,{get when(){return wE()},get children(){return I(xE,{})}})]}}),yE=()=>I(Lt,{icon:"print",action:()=>{fe.set("print"),print(),fe.set("view")}}),xE=()=>I(Lt,{icon:"share",action:async()=>{fe.set("print");try{await navigator.share({url:qm()})}catch{}finally{await new Promise(n=>setTimeout(n,1e3))}fe.set("view")},children:"share"}),vE=()=>I(Lt,{icon:"cloud_upload",action:()=>{const n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(Mt.export().persisted,null,2)),t=document.createElement("a");t.setAttribute("href",n),t.setAttribute("download","data.json"),document.adoptNode(t),t.click(),t.remove()}}),wE=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent),SE=St("<footer><nav><ul><li></li></ul><ul><li></li></ul></nav></footer>",12),_E=()=>(()=>{const n=SE.cloneNode(!0),t=n.firstChild,e=t.firstChild,i=e.firstChild,r=e.nextSibling,s=r.firstChild;return J(i,I(cE,{})),J(t,I(mE,{}),r),J(s,I(bE,{})),Oe(()=>e.style.setProperty("visibility",Mt.store.cv.profile.scope[0]===Mt.store.cv.profile.scope[1]?"hidden":"inherit")),n})();const kE=St("<span></span>",2),Qi=n=>{const[t,e]=yn(n,["class","vertical"]);return(()=>{const i=kE.cloneNode(!0);return _i(i,Un({get class(){return Qs(t.vertical?"vgroup":"hgroup",t.class)}},e),!1,!1),i})()};const ME=St("<span></span>",2),i0=n=>{const[t,e]=yn(n,["class","children","nowrap"]);return(()=>{const i=ME.cloneNode(!0);return _i(i,Un({get class(){return Qs("row",t.class,n.nowrap?"nowrap":void 0)}},e),!1,!0),J(i,()=>t.children),i})()};var CE=qu;function OE(n,t,e){var i=n==null?void 0:CE(n,t);return i===void 0?e:i}var $n=OE,AE=Lm;function TE(n,t,e){return n==null?n:AE(n,t,e)}var Yu=TE;const EE=St('<input type="text" size="1" minlength="0">',1),$E=St("<span></span>",2),PE=St('<span class="inline-editor"></span>',2),DE=St('<span class="inline-viewer"></span>',2),IE=n=>{const t=n.path.endsWith("]")?"...":Ns(n.path.split(".")),[e,i]=ee(!1),[r,s]=ee($n(Mt.store,n.path));sr(()=>s($n(Mt.store,n.path)));const[o,a]=yn(n,["path","children"]),l=(()=>{const d=EE.cloneNode(!0);return d.$$input=({target:p})=>{p instanceof HTMLInputElement&&(c.dataset.value=p.value)},d.$$keydown=({key:p})=>{switch(p){case"Enter":h();break;case"Escape":f();break}},Cr(d,"placeholder",t),_i(d,Un({get value(){return $n(Mt.store,o.path)}},a),!1,!1),d})(),c=(()=>{const d=$E.cloneNode(!0);return J(d,l),d})();function u(){c.dataset.value=r()??t,l.value=r()??"",i(!0),l.focus()}function h(){Mt.update(d=>Yu(d,n.path,l.value)),i(!1)}function f(){i(!1)}return I(Kr,{get children(){return[I(Je,{get when(){return fe.get()!=="edit"},get children(){return I(Ce,{get when(){return r()},get children(){return Re(()=>!!n.children)()?n.children(r()):r()}})}}),I(Je,{get when(){return e()},get children(){const d=PE.cloneNode(!0);return J(d,c,null),J(d,I(Qi,{get children(){return[I(Lt,{icon:"done",action:()=>h(),class:"outline green"}),I(Lt,{icon:"close",action:()=>f(),class:"outline red"})]}}),null),d}}),I(Je,{get when(){return!e()},get children(){const d=DE.cloneNode(!0);return J(d,(()=>{const p=Re(()=>!!n.children);return()=>p()?n.children(r()):r()})(),null),J(d,I(Lt,{icon:"edit",action:u,class:"outline blue"}),null),d}})]}})};Si(["keydown","input"]);function ke(n){this.content=n}ke.prototype={constructor:ke,find:function(n){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===n)return t;return-1},get:function(n){var t=this.find(n);return t==-1?void 0:this.content[t+1]},update:function(n,t,e){var i=e&&e!=n?this.remove(e):this,r=i.find(n),s=i.content.slice();return r==-1?s.push(e||n,t):(s[r+1]=t,e&&(s[r]=e)),new ke(s)},remove:function(n){var t=this.find(n);if(t==-1)return this;var e=this.content.slice();return e.splice(t,2),new ke(e)},addToStart:function(n,t){return new ke([n,t].concat(this.remove(n).content))},addToEnd:function(n,t){var e=this.remove(n).content.slice();return e.push(n,t),new ke(e)},addBefore:function(n,t,e){var i=this.remove(t),r=i.content.slice(),s=i.find(n);return r.splice(s==-1?r.length:s,0,t,e),new ke(r)},forEach:function(n){for(var t=0;t<this.content.length;t+=2)n(this.content[t],this.content[t+1])},prepend:function(n){return n=ke.from(n),n.size?new ke(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=ke.from(n),n.size?new ke(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var t=this;n=ke.from(n);for(var e=0;e<n.content.length;e+=2)t=t.remove(n.content[e]);return t},toObject:function(){var n={};return this.forEach(function(t,e){n[t]=e}),n},get size(){return this.content.length>>1}};ke.from=function(n){if(n instanceof ke)return n;var t=[];if(n)for(var e in n)t.push(e,n[e]);return new ke(t)};function r0(n,t,e){for(let i=0;;i++){if(i==n.childCount||i==t.childCount)return n.childCount==t.childCount?null:e;let r=n.child(i),s=t.child(i);if(r==s){e+=r.nodeSize;continue}if(!r.sameMarkup(s))return e;if(r.isText&&r.text!=s.text){for(let o=0;r.text[o]==s.text[o];o++)e++;return e}if(r.content.size||s.content.size){let o=r0(r.content,s.content,e+1);if(o!=null)return o}e+=r.nodeSize}}function s0(n,t,e,i){for(let r=n.childCount,s=t.childCount;;){if(r==0||s==0)return r==s?null:{a:e,b:i};let o=n.child(--r),a=t.child(--s),l=o.nodeSize;if(o==a){e-=l,i-=l;continue}if(!o.sameMarkup(a))return{a:e,b:i};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,e--,i--;return{a:e,b:i}}if(o.content.size||a.content.size){let c=s0(o.content,a.content,e-1,i-1);if(c)return c}e-=l,i-=l}}class et{constructor(t,e){if(this.content=t,this.size=e||0,e==null)for(let i=0;i<t.length;i++)this.size+=t[i].nodeSize}nodesBetween(t,e,i,r=0,s){for(let o=0,a=0;a<e;o++){let l=this.content[o],c=a+l.nodeSize;if(c>t&&i(l,r+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,e-u),i,r+u)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,i,r){let s="",o=!0;return this.nodesBetween(t,e,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(t,l)-l,e-l),o=!i):a.isLeaf?(r?s+=typeof r=="function"?r(a):r:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!i):!o&&a.isBlock&&(s+=i,o=!0)},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,i=t.firstChild,r=this.content.slice(),s=0;for(e.isText&&e.sameMarkup(i)&&(r[r.length-1]=e.withText(e.text+i.text),s=1);s<t.content.length;s++)r.push(t.content[s]);return new et(r,this.size+t.size)}cut(t,e=this.size){if(t==0&&e==this.size)return this;let i=[],r=0;if(e>t)for(let s=0,o=0;o<e;s++){let a=this.content[s],l=o+a.nodeSize;l>t&&((o<t||l>e)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,e-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,e-o-1))),i.push(a),r+=a.nodeSize),o=l}return new et(i,r)}cutByIndex(t,e){return t==e?et.empty:t==0&&e==this.content.length?this:new et(this.content.slice(t,e))}replaceChild(t,e){let i=this.content[t];if(i==e)return this;let r=this.content.slice(),s=this.size+e.nodeSize-i.nodeSize;return r[t]=e,new et(r,s)}addToStart(t){return new et([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new et(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,i=0;e<this.content.length;e++){let r=this.content[e];t(r,i,e),i+=r.nodeSize}}findDiffStart(t,e=0){return r0(this,t,e)}findDiffEnd(t,e=this.size,i=t.size){return s0(this,t,e,i)}findIndex(t,e=-1){if(t==0)return uo(0,t);if(t==this.size)return uo(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let i=0,r=0;;i++){let s=this.child(i),o=r+s.nodeSize;if(o>=t)return o==t||e>0?uo(i+1,o):uo(i,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return et.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new et(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return et.empty;let e,i=0;for(let r=0;r<t.length;r++){let s=t[r];i+=s.nodeSize,r&&s.isText&&t[r-1].sameMarkup(s)?(e||(e=t.slice(0,r)),e[e.length-1]=s.withText(e[e.length-1].text+s.text)):e&&e.push(s)}return new et(e||t,i)}static from(t){if(!t)return et.empty;if(t instanceof et)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new et([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}et.empty=new et([],0);const Bl={index:0,offset:0};function uo(n,t){return Bl.index=n,Bl.offset=t,Bl}function Zo(n,t){if(n===t)return!0;if(!(n&&typeof n=="object")||!(t&&typeof t=="object"))return!1;let e=Array.isArray(n);if(Array.isArray(t)!=e)return!1;if(e){if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(!Zo(n[i],t[i]))return!1}else{for(let i in n)if(!(i in t)||!Zo(n[i],t[i]))return!1;for(let i in t)if(!(i in n))return!1}return!0}let Ut=class Wc{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,i=!1;for(let r=0;r<t.length;r++){let s=t[r];if(this.eq(s))return t;if(this.type.excludes(s.type))e||(e=t.slice(0,r));else{if(s.type.excludes(this.type))return t;!i&&s.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),i=!0),e&&e.push(s)}}return e||(e=t.slice()),i||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Zo(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let i=t.marks[e.type];if(!i)throw new RangeError(`There is no mark type ${e.type} in this schema`);return i.create(e.attrs)}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].eq(e[i]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Wc.none;if(t instanceof Wc)return[t];let e=t.slice();return e.sort((i,r)=>i.type.rank-r.type.rank),e}};Ut.none=[];class ta extends Error{}class ft{constructor(t,e,i){this.content=t,this.openStart=e,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let i=a0(this.content,t+this.openStart,e);return i&&new ft(i,this.openStart,this.openEnd)}removeBetween(t,e){return new ft(o0(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return ft.empty;let i=e.openStart||0,r=e.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ft(et.fromJSON(t,e.content),i,r)}static maxOpen(t,e=!0){let i=0,r=0;for(let s=t.firstChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=t.lastChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.lastChild)r++;return new ft(t,i,r)}}ft.empty=new ft(et.empty,0,0);function o0(n,t,e){let{index:i,offset:r}=n.findIndex(t),s=n.maybeChild(i),{index:o,offset:a}=n.findIndex(e);if(r==t||s.isText){if(a!=e&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,t).append(n.cut(e))}if(i!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(i,s.copy(o0(s.content,t-r-1,e-r-1)))}function a0(n,t,e,i){let{index:r,offset:s}=n.findIndex(t),o=n.maybeChild(r);if(s==t||o.isText)return i&&!i.canReplace(r,r,e)?null:n.cut(0,t).append(e).append(n.cut(t));let a=a0(o.content,t-s-1,e);return a&&n.replaceChild(r,o.copy(a))}function NE(n,t,e){if(e.openStart>n.depth)throw new ta("Inserted content deeper than insertion position");if(n.depth-e.openStart!=t.depth-e.openEnd)throw new ta("Inconsistent open depths");return l0(n,t,e,0)}function l0(n,t,e,i){let r=n.index(i),s=n.node(i);if(r==t.index(i)&&i<n.depth-e.openStart){let o=l0(n,t,e,i+1);return s.copy(s.content.replaceChild(r,o))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&n.depth==i&&t.depth==i){let o=n.parent,a=o.content;return qi(o,a.cut(0,n.parentOffset).append(e.content).append(a.cut(t.parentOffset)))}else{let{start:o,end:a}=LE(e,n);return qi(s,u0(n,o,a,t,i))}else return qi(s,ea(n,t,i))}function c0(n,t){if(!t.type.compatibleContent(n.type))throw new ta("Cannot join "+t.type.name+" onto "+n.type.name)}function Uc(n,t,e){let i=n.node(e);return c0(i,t.node(e)),i}function Ui(n,t){let e=t.length-1;e>=0&&n.isText&&n.sameMarkup(t[e])?t[e]=n.withText(t[e].text+n.text):t.push(n)}function Ss(n,t,e,i){let r=(t||n).node(e),s=0,o=t?t.index(e):r.childCount;n&&(s=n.index(e),n.depth>e?s++:n.textOffset&&(Ui(n.nodeAfter,i),s++));for(let a=s;a<o;a++)Ui(r.child(a),i);t&&t.depth==e&&t.textOffset&&Ui(t.nodeBefore,i)}function qi(n,t){return n.type.checkContent(t),n.copy(t)}function u0(n,t,e,i,r){let s=n.depth>r&&Uc(n,t,r+1),o=i.depth>r&&Uc(e,i,r+1),a=[];return Ss(null,n,r,a),s&&o&&t.index(r)==e.index(r)?(c0(s,o),Ui(qi(s,u0(n,t,e,i,r+1)),a)):(s&&Ui(qi(s,ea(n,t,r+1)),a),Ss(t,e,r,a),o&&Ui(qi(o,ea(e,i,r+1)),a)),Ss(i,null,r,a),new et(a)}function ea(n,t,e){let i=[];if(Ss(null,n,e,i),n.depth>e){let r=Uc(n,t,e+1);Ui(qi(r,ea(n,t,e+1)),i)}return Ss(t,null,e,i),new et(i)}function LE(n,t){let e=t.depth-n.openStart,r=t.node(e).copy(n.content);for(let s=e-1;s>=0;s--)r=t.node(s).copy(et.from(r));return{start:r.resolveNoCache(n.openStart+e),end:r.resolveNoCache(r.content.size-n.openEnd-e)}}class Ls{constructor(t,e,i){this.pos=t,this.path=e,this.parentOffset=i,this.depth=e.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=t.child(e);return i?t.child(e).cut(i):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):t==0?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let i=this.path[e*3],r=e==0?0:this.path[e*3-1]+1;for(let s=0;s<t;s++)r+=i.child(s).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(t.content.size==0)return Ut.none;if(this.textOffset)return t.child(e).marks;let i=t.maybeChild(e-1),r=t.maybeChild(e);if(!i){let a=i;i=r,r=a}let s=i.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!r||!s[o].isInSet(r.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let i=e.marks,r=t.parent.maybeChild(t.index());for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!r||!i[s].isInSet(r.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!e||e(this.node(i))))return new na(this,t,i);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let i=[],r=0,s=e;for(let o=t;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(i.push(o,a,r+l),!c||(o=o.child(a),o.isText))break;s=c-1,r+=l+1}return new Ls(e,i,s)}static resolveCached(t,e){for(let r=0;r<Fl.length;r++){let s=Fl[r];if(s.pos==e&&s.doc==t)return s}let i=Fl[jl]=Ls.resolve(t,e);return jl=(jl+1)%RE,i}}let Fl=[],jl=0,RE=12;class na{constructor(t,e,i){this.$from=t,this.$to=e,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const zE=Object.create(null);let Ki=class qc{constructor(t,e,i,r=Ut.none){this.type=t,this.attrs=e,this.marks=r,this.content=i||et.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,i,r=0){this.content.nodesBetween(t,e,i,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,i,r){return this.content.textBetween(t,e,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,i){return this.type==t&&Zo(this.attrs,e||t.defaultAttrs||zE)&&Ut.sameSet(this.marks,i||Ut.none)}copy(t=null){return t==this.content?this:new qc(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new qc(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return t==0&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,i=!1){if(t==e)return ft.empty;let r=this.resolve(t),s=this.resolve(e),o=i?0:r.sharedDepth(e),a=r.start(o),c=r.node(o).content.cut(r.pos-a,s.pos-a);return new ft(c,r.depth-o,s.depth-o)}replace(t,e,i){return NE(this.resolve(t),this.resolve(e),i)}nodeAt(t){for(let e=this;;){let{index:i,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(i),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:i}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:i}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:e,offset:i}=this.content.findIndex(t);if(i<t)return{node:this.content.child(e),index:e,offset:i};let r=this.content.child(e-1);return{node:r,index:e-1,offset:i-r.nodeSize}}resolve(t){return Ls.resolveCached(this,t)}resolveNoCache(t){return Ls.resolve(this,t)}rangeHasMark(t,e,i){let r=!1;return e>t&&this.nodesBetween(t,e,s=>(i.isInSet(s.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),h0(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,i=et.empty,r=0,s=i.childCount){let o=this.contentMatchAt(t).matchFragment(i,r,s),a=o&&o.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(let l=r;l<s;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(t,e,i,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(t).matchType(i),o=s&&s.matchFragment(this.content,e);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content);let t=Ut.none;for(let e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!Ut.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let i=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=e.marks.map(t.markFromJSON)}if(e.type=="text"){if(typeof e.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(e.text,i)}let r=et.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,i)}};Ki.prototype.text=void 0;class ia extends Ki{constructor(t,e,i,r){if(super(t,e,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):h0(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new ia(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new ia(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return t==0&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function h0(n,t){for(let e=n.length-1;e>=0;e--)t=n[e].type.name+"("+t+")";return t}class Zi{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let i=new BE(t,e);if(i.next==null)return Zi.empty;let r=f0(i);i.next&&i.err("Unexpected trailing text");let s=qE(UE(r));return KE(s,i),s}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,i=t.childCount){let r=this;for(let s=e;r&&s<i;s++)r=r.matchType(t.child(s).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!(e.isText||e.hasRequiredAttrs()))return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let i=0;i<t.next.length;i++)if(this.next[e].type==t.next[i].type)return!0;return!1}fillBefore(t,e=!1,i=0){let r=[this];function s(o,a){let l=o.matchFragment(t,i);if(l&&(!e||l.validEnd))return et.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:h}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&r.indexOf(h)==-1){r.push(h);let f=s(h,a.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(t){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==t)return this.wrapCache[i+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),s=r.match;if(s.matchType(t)){let o=[];for(let a=r;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in e)&&(!r.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:r}),e[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(i){t.push(i);for(let r=0;r<i.next.length;r++)t.indexOf(i.next[r].next)==-1&&e(i.next[r].next)}return e(this),t.map((i,r)=>{let s=r+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)s+=(o?", ":"")+i.next[o].type.name+"->"+t.indexOf(i.next[o].next);return s}).join(`
`)}}Zi.empty=new Zi(!0);class BE{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function f0(n){let t=[];do t.push(FE(n));while(n.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function FE(n){let t=[];do t.push(jE(n));while(n.next&&n.next!=")"&&n.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function jE(n){let t=WE(n);for(;;)if(n.eat("+"))t={type:"plus",expr:t};else if(n.eat("*"))t={type:"star",expr:t};else if(n.eat("?"))t={type:"opt",expr:t};else if(n.eat("{"))t=HE(n,t);else break;return t}function od(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let t=Number(n.next);return n.pos++,t}function HE(n,t){let e=od(n),i=e;return n.eat(",")&&(n.next!="}"?i=od(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:e,max:i,expr:t}}function VE(n,t){let e=n.nodeTypes,i=e[t];if(i)return[i];let r=[];for(let s in e){let o=e[s];o.groups.indexOf(t)>-1&&r.push(o)}return r.length==0&&n.err("No node type or group '"+t+"' found"),r}function WE(n){if(n.eat("(")){let t=f0(n);return n.eat(")")||n.err("Missing closing paren"),t}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let t=VE(n,n.next).map(e=>(n.inline==null?n.inline=e.isInline:n.inline!=e.isInline&&n.err("Mixing inline and block content"),{type:"name",value:e}));return n.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function UE(n){let t=[[]];return r(s(n,0),e()),t;function e(){return t.push([])-1}function i(o,a,l){let c={term:l,to:a};return t[o].push(c),c}function r(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;r(c,a=e())}else if(o.type=="star"){let l=e();return i(a,l),r(s(o.expr,l),l),[i(l)]}else if(o.type=="plus"){let l=e();return r(s(o.expr,a),l),r(s(o.expr,l),l),[i(l)]}else{if(o.type=="opt")return[i(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=e();r(s(o.expr,l),u),l=u}if(o.max==-1)r(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=e();i(l,u),r(s(o.expr,l),u),l=u}return[i(l)]}else{if(o.type=="name")return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function d0(n,t){return t-n}function ad(n,t){let e=[];return i(t),e.sort(d0);function i(r){let s=n[r];if(s.length==1&&!s[0].term)return i(s[0].to);e.push(r);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&e.indexOf(l)==-1&&i(l)}}}function qE(n){let t=Object.create(null);return e(ad(n,0));function e(i){let r=[];i.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<r.length;u++)r[u][0]==a&&(c=r[u][1]);ad(n,l).forEach(u=>{c||r.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=t[i.join(",")]=new Zi(i.indexOf(n.length-1)>-1);for(let o=0;o<r.length;o++){let a=r[o][1].sort(d0);s.next.push({type:r[o][0],next:t[a.join(",")]||e(a)})}return s}}function KE(n,t){for(let e=0,i=[n];e<i.length;e++){let r=i[e],s=!r.validEnd,o=[];for(let a=0;a<r.next.length;a++){let{type:l,next:c}=r.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),i.indexOf(c)==-1&&i.push(c)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function p0(n){let t=Object.create(null);for(let e in n){let i=n[e];if(!i.hasDefault)return null;t[e]=i.default}return t}function g0(n,t){let e=Object.create(null);for(let i in n){let r=t&&t[i];if(r===void 0){let s=n[i];if(s.hasDefault)r=s.default;else throw new RangeError("No value supplied for attribute "+i)}e[i]=r}return e}function m0(n){let t=Object.create(null);if(n)for(let e in n)t[e]=new JE(n[e]);return t}let ld=class b0{constructor(t,e,i){this.name=t,this.schema=e,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=m0(i.attrs),this.defaultAttrs=p0(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Zi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:g0(this.attrs,t)}create(t=null,e,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ki(this,this.computeAttrs(t),et.from(e),Ut.setFrom(i))}createChecked(t=null,e,i){return e=et.from(e),this.checkContent(e),new Ki(this,this.computeAttrs(t),e,Ut.setFrom(i))}createAndFill(t=null,e,i){if(t=this.computeAttrs(t),e=et.from(e),e.size){let o=this.contentMatch.fillBefore(e);if(!o)return null;e=o.append(e)}let r=this.contentMatch.matchFragment(e),s=r&&r.fillBefore(et.empty,!0);return s?new Ki(this,t,e.append(s),Ut.setFrom(i)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let i=0;i<t.childCount;i++)if(!this.allowsMarks(t.child(i).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let e;for(let i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?e&&e.push(t[i]):e||(e=t.slice(0,i));return e?e.length?e:Ut.none:t}static compile(t,e){let i=Object.create(null);t.forEach((s,o)=>i[s]=new b0(s,e,o));let r=e.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};class JE{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class el{constructor(t,e,i,r){this.name=t,this.rank=e,this.schema=i,this.spec=r,this.attrs=m0(r.attrs),this.excluded=null;let s=p0(this.attrs);this.instance=s?new Ut(this,s):null}create(t=null){return!t&&this.instance?this.instance:new Ut(this,g0(this.attrs,t))}static compile(t,e){let i=Object.create(null),r=0;return t.forEach((s,o)=>i[s]=new el(s,r++,e,o)),i}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}excludes(t){return this.excluded.indexOf(t)>-1}}class GE{constructor(t){this.cached=Object.create(null);let e=this.spec={};for(let r in t)e[r]=t[r];e.nodes=ke.from(t.nodes),e.marks=ke.from(t.marks||{}),this.nodes=ld.compile(this.spec.nodes,this),this.marks=el.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let s=this.nodes[r],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=i[o]||(i[o]=Zi.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?cd(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let r in this.marks){let s=this.marks[r],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:cd(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,i,r){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof ld){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(e,i,r)}text(t,e){let i=this.nodes.text;return new ia(i,i.defaultAttrs,t,Ut.setFrom(e))}mark(t,e){return typeof t=="string"&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return Ki.fromJSON(this,t)}markFromJSON(t){return Ut.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function cd(n,t){let e=[];for(let i=0;i<t.length;i++){let r=t[i],s=n.marks[r],o=s;if(s)e.push(s);else for(let a in n.marks){let l=n.marks[a];(r=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&e.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[i]+"'")}return e}class Nr{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach(i=>{i.tag?this.tags.push(i):i.style&&this.styles.push(i)}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let r=t.nodes[i.node];return r.contentMatch.matchType(r)})}parse(t,e={}){let i=new hd(this,e,!1);return i.addAll(t,e.from,e.to),i.finish()}parseSlice(t,e={}){let i=new hd(this,e,!0);return i.addAll(t,e.from,e.to),ft.maxOpen(i.finish())}matchTag(t,e,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let s=this.tags[r];if(QE(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||e.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,e,i,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!i.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=e))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(t){let e=[];function i(r){let s=r.priority==null?50:r.priority,o=0;for(;o<e.length;o++){let a=e[o];if((a.priority==null?50:a.priority)<s)break}e.splice(o,0,r)}for(let r in t.marks){let s=t.marks[r].spec.parseDOM;s&&s.forEach(o=>{i(o=fd(o)),o.mark||o.ignore||o.clearMark||(o.mark=r)})}for(let r in t.nodes){let s=t.nodes[r].spec.parseDOM;s&&s.forEach(o=>{i(o=fd(o)),o.node||o.ignore||o.mark||(o.node=r)})}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Nr(t,Nr.schemaRules(t)))}}const y0={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},YE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},x0={ol:!0,ul:!0},ra=1,sa=2,_s=4;function ud(n,t,e){return t!=null?(t?ra:0)|(t==="full"?sa:0):n&&n.whitespace=="pre"?ra|sa:e&~_s}class ho{constructor(t,e,i,r,s,o,a){this.type=t,this.attrs=e,this.marks=i,this.pendingMarks=r,this.solid=s,this.options=a,this.content=[],this.activeMarks=Ut.none,this.stashMarks=[],this.match=o||(a&_s?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(et.from(t));if(e)this.match=this.type.contentMatch.matchFragment(e);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(t.type))?(this.match=i,r):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&ra)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-r[0].length))}}let e=et.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(et.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}popFromStashMark(t){for(let e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}applyPending(t){for(let e=0,i=this.pendingMarks;e<i.length;e++){let r=i[e];(this.type?this.type.allowsMarkType(r.type):t$(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!y0.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class hd{constructor(t,e,i){this.parser=t,this.options=e,this.isOpen=i,this.open=0;let r=e.topNode,s,o=ud(null,e.preserveWhitespace,0)|(i?_s:0);r?s=new ho(r.type,r.attrs,Ut.none,Ut.none,!0,e.topMatch||r.type.contentMatch,o):i?s=new ho(null,null,Ut.none,Ut.none,!0,null,o):s=new ho(t.schema.topNodeType,null,Ut.none,Ut.none,!0,null,o),this.nodes=[s],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){if(t.nodeType==3)this.addTextNode(t);else if(t.nodeType==1){let e=t.getAttribute("style");if(!e)this.addElement(t);else{let i=this.readStyles(ZE(e));if(!i)return;let[r,s]=i,o=this.top;for(let a=0;a<s.length;a++)this.removePendingMark(s[a],o);for(let a=0;a<r.length;a++)this.addPendingMark(r[a]);this.addElement(t);for(let a=0;a<r.length;a++)this.removePendingMark(r[a],o);for(let a=0;a<s.length;a++)this.addPendingMark(s[a])}}}addTextNode(t){let e=t.nodeValue,i=this.top;if(i.options&sa||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(i.options&ra)i.options&sa?e=e.replace(/\r\n?/g,`
`):e=e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let r=i.content[i.content.length-1],s=t.previousSibling;(!r||s&&s.nodeName=="BR"||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}addElement(t,e){let i=t.nodeName.toLowerCase(),r;x0.hasOwnProperty(i)&&this.parser.normalizeLists&&XE(t);let s=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(r=this.parser.matchTag(t,this,e));if(s?s.ignore:YE.hasOwnProperty(i))this.findInside(t),this.ignoreFallback(t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(t=s.skip);let o,a=this.top,l=this.needsBlock;if(y0.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t);return}this.addAll(t),o&&this.sync(a),this.needsBlock=l}else this.addElementByRule(t,s,s.consuming===!1?r:void 0)}leafFallback(t){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`))}ignoreFallback(t){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(t){let e=Ut.none,i=Ut.none;t:for(let r=0;r<t.length;r+=2)for(let s=void 0;;){let o=this.parser.matchStyle(t[r],t[r+1],this,s);if(!o)continue t;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.forEach(a=>{o.clearMark(a)&&(i=a.addToSet(i))}):e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),o.consuming===!1)s=o;else break}return[e,i]}addElementByRule(t,e,i){let r,s,o;e.node?(s=this.parser.schema.nodes[e.node],s.isLeaf?this.insertNode(s.create(e.attrs))||this.leafFallback(t):r=this.enter(s,e.attrs||null,e.preserveWhitespace)):(o=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(t);else if(i)this.addElement(t,i);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=t;typeof e.contentElement=="string"?l=t.querySelector(e.contentElement):typeof e.contentElement=="function"?l=e.contentElement(t):e.contentElement&&(l=e.contentElement),this.findAround(t,l,!0),this.addAll(l)}r&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(t,e,i){let r=e||0;for(let s=e?t.childNodes[e]:t.firstChild,o=i==null?null:t.childNodes[i];s!=o;s=s.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(s);this.findAtPoint(t,r)}findPlace(t){let e,i;for(let r=this.open;r>=0;r--){let s=this.nodes[r],o=s.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,i=s,!o.length)||s.solid)break}if(!e)return!1;this.sync(i);for(let r=0;r<e.length;r++)this.enterInner(e[r],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();let e=this.top;e.applyPending(t.type),e.match&&(e.match=e.match.matchType(t.type));let i=e.activeMarks;for(let r=0;r<t.marks.length;r++)(!e.type||e.type.allowsMarkType(t.marks[r].type))&&(i=t.marks[r].addToSet(i));return e.content.push(t.mark(i)),!0}return!1}enter(t,e,i){let r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,i),r}enterInner(t,e=null,i=!1,r){this.closeExtra();let s=this.top;s.applyPending(t),s.match=s.match&&s.match.matchType(t);let o=ud(t,r,s.options);s.options&_s&&s.content.length==0&&(o|=_s),this.nodes.push(new ho(t,e,s.activeMarks,s.pendingMarks,i,null,o)),this.open++}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let i=this.nodes[e].content;for(let r=i.length-1;r>=0;r--)t+=i[r].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==e&&(this.find[i].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&t.nodeType==1&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,i){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&t.nodeType==1&&t.contains(this.find[r].node)&&e.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),s=-(i?i.depth+1:0)+(r?0:1),o=(a,l)=>{for(;a>=0;a--){let c=e[a];if(c==""){if(a==e.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&r?this.nodes[l].type:i&&l>=s?i.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let i=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let e in this.parser.schema.nodes){let i=this.parser.schema.nodes[e];if(i.isTextblock&&i.defaultAttrs)return i}}addPendingMark(t){let e=e$(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,e){for(let i=this.open;i>=0;i--){let r=this.nodes[i];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);let o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}}}function XE(n){for(let t=n.firstChild,e=null;t;t=t.nextSibling){let i=t.nodeType==1?t.nodeName.toLowerCase():null;i&&x0.hasOwnProperty(i)&&e?(e.appendChild(t),t=e):i=="li"?e=t:i&&(e=null)}}function QE(n,t){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,t)}function ZE(n){let t=/\s*([\w-]+)\s*:\s*([^;]+)/g,e,i=[];for(;e=t.exec(n);)i.push(e[1],e[2].trim());return i}function fd(n){let t={};for(let e in n)t[e]=n[e];return t}function t$(n,t){let e=t.schema.nodes;for(let i in e){let r=e[i];if(!r.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==t||s.indexOf(u)<0&&o(u))return!0}};if(o(r.contentMatch))return!0}}function e$(n,t){for(let e=0;e<t.length;e++)if(n.eq(t[e]))return t[e]}class An{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},i){i||(i=Hl(e).createDocumentFragment());let r=i,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)r=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,e);u&&(s.push([c,r]),r.appendChild(u.dom),r=u.contentDOM||u.dom)}}r.appendChild(this.serializeNodeInner(o,e))}),i}serializeNodeInner(t,e){let{dom:i,contentDOM:r}=An.renderSpec(Hl(e),this.nodes[t.type.name](t));if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return i}serializeNode(t,e={}){let i=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let s=this.serializeMark(t.marks[r],t.isInline,e);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(t,e,i={}){let r=this.marks[t.type.name];return r&&An.renderSpec(Hl(i),r(t,e))}static renderSpec(t,e,i=null){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let r=e[0],s=r.indexOf(" ");s>0&&(i=r.slice(0,s),r=r.slice(s+1));let o,a=i?t.createElementNS(i,r):t.createElement(r),l=e[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let h=u.indexOf(" ");h>0?a.setAttributeNS(u.slice(0,h),u.slice(h+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<e.length;u++){let h=e[u];if(h===0){if(u<e.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:d}=An.renderSpec(t,h,i);if(a.appendChild(f),d){if(o)throw new RangeError("Multiple content holes");o=d}}}return{dom:a,contentDOM:o}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new An(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=dd(t.nodes);return e.text||(e.text=i=>i.text),e}static marksFromSchema(t){return dd(t.marks)}}function dd(n){let t={};for(let e in n){let i=n[e].spec.toDOM;i&&(t[e]=i)}return t}function Hl(n){return n.document||window.document}const v0=65535,w0=Math.pow(2,16);function n$(n,t){return n+t*w0}function pd(n){return n&v0}function i$(n){return(n-(n&v0))/w0}const S0=1,_0=2,Po=4,k0=8;class Kc{constructor(t,e,i){this.pos=t,this.delInfo=e,this.recover=i}get deleted(){return(this.delInfo&k0)>0}get deletedBefore(){return(this.delInfo&(S0|Po))>0}get deletedAfter(){return(this.delInfo&(_0|Po))>0}get deletedAcross(){return(this.delInfo&Po)>0}}class an{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&an.empty)return an.empty}recover(t){let e=0,i=pd(t);if(!this.inverted)for(let r=0;r<i;r++)e+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+e+i$(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,i){let r=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[a+s],u=this.ranges[a+o],h=l+c;if(t<=h){let f=c?t==l?-1:t==h?1:e:e,d=l+r+(f<0?0:u);if(i)return d;let p=t==(e<0?l:h)?null:n$(a/3,t-l),m=t==l?_0:t==h?S0:Po;return(e<0?t!=l:t!=h)&&(m|=k0),new Kc(d,m,p)}r+=u-c}return i?t+r:new Kc(t+r,0,null)}touches(t,e){let i=0,r=pd(e),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[a+s],u=l+c;if(t<=u&&a==r*3)return!0;i+=this.ranges[a+o]-c}return!1}forEach(t){let e=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let o=this.ranges[r],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[r+e],u=this.ranges[r+i];t(a,a+c,l,l+u),s+=u-c}}invert(){return new an(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?an.empty:new an(t<0?[0,-t,0]:[0,0,t])}}an.empty=new an([]);class Or{constructor(t=[],e,i=0,r=t.length){this.maps=t,this.mirror=e,this.from=i,this.to=r}slice(t=0,e=this.maps.length){return new Or(this.maps,this.mirror,t,e)}copy(){return new Or(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),e!=null&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,i=this.maps.length;e<t.maps.length;e++){let r=t.getMirror(e);this.appendMap(t.maps[e],r!=null&&r<e?i+r:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,i=this.maps.length+t.maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t.maps[e].invert(),r!=null&&r>e?i-r-1:void 0)}}invert(){let t=new Or;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let i=this.from;i<this.to;i++)t=this.maps[i].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,i){let r=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(t,e);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this.maps[l].recover(a.recover);continue}}r|=a.delInfo,t=a.pos}return i?t:new Kc(t,r,null)}}const Vl=Object.create(null);class Ye{getMap(){return an.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=Vl[e.stepType];if(!i)throw new RangeError(`No step type ${e.stepType} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in Vl)throw new RangeError("Duplicate use of step JSON ID "+t);return Vl[t]=e,e.prototype.jsonID=t,e}}class me{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new me(t,null)}static fail(t){return new me(null,t)}static fromReplace(t,e,i,r){try{return me.ok(t.replace(e,i,r))}catch(s){if(s instanceof ta)return me.fail(s.message);throw s}}}function Xu(n,t,e){let i=[];for(let r=0;r<n.childCount;r++){let s=n.child(r);s.content.size&&(s=s.copy(Xu(s.content,t,s))),s.isInline&&(s=t(s,e,r)),i.push(s)}return et.fromArray(i)}class ni extends Ye{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=t.resolve(this.from),r=i.node(i.sharedDepth(this.to)),s=new ft(Xu(e.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),r),e.openStart,e.openEnd);return me.fromReplace(t,this.from,this.to,s)}invert(){return new Tn(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new ni(e.pos,i.pos,this.mark)}merge(t){return t instanceof ni&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new ni(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ni(e.from,e.to,t.markFromJSON(e.mark))}}Ye.jsonID("addMark",ni);class Tn extends Ye{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=new ft(Xu(e.content,r=>r.mark(this.mark.removeFromSet(r.marks)),t),e.openStart,e.openEnd);return me.fromReplace(t,this.from,this.to,i)}invert(){return new ni(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new Tn(e.pos,i.pos,this.mark)}merge(t){return t instanceof Tn&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Tn(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Tn(e.from,e.to,t.markFromJSON(e.mark))}}Ye.jsonID("removeMark",Tn);class ii extends Ye{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return me.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return me.fromReplace(t,this.pos,this.pos+1,new ft(et.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let i=this.mark.addToSet(e.marks);if(i.length==e.marks.length){for(let r=0;r<e.marks.length;r++)if(!e.marks[r].isInSet(i))return new ii(this.pos,e.marks[r]);return new ii(this.pos,this.mark)}}return new Lr(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new ii(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ii(e.pos,t.markFromJSON(e.mark))}}Ye.jsonID("addNodeMark",ii);class Lr extends Ye{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return me.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return me.fromReplace(t,this.pos,this.pos+1,new ft(et.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new ii(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Lr(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Lr(e.pos,t.markFromJSON(e.mark))}}Ye.jsonID("removeNodeMark",Lr);class Pe extends Ye{constructor(t,e,i,r=!1){super(),this.from=t,this.to=e,this.slice=i,this.structure=r}apply(t){return this.structure&&Jc(t,this.from,this.to)?me.fail("Structure replace would overwrite content"):me.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new an([this.from,this.to-this.from,this.slice.size])}invert(t){return new Pe(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deletedAcross&&i.deletedAcross?null:new Pe(e.pos,Math.max(e.pos,i.pos),this.slice)}merge(t){if(!(t instanceof Pe)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let e=this.slice.size+t.slice.size==0?ft.empty:new ft(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Pe(this.from,this.to+(t.to-t.from),e,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let e=this.slice.size+t.slice.size==0?ft.empty:new ft(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Pe(t.from,this.to,e,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Pe(e.from,e.to,ft.fromJSON(t,e.slice),!!e.structure)}}Ye.jsonID("replace",Pe);class we extends Ye{constructor(t,e,i,r,s,o,a=!1){super(),this.from=t,this.to=e,this.gapFrom=i,this.gapTo=r,this.slice=s,this.insert=o,this.structure=a}apply(t){if(this.structure&&(Jc(t,this.from,this.gapFrom)||Jc(t,this.gapTo,this.to)))return me.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return me.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,e.content);return i?me.fromReplace(t,this.from,this.to,i):me.fail("Content does not fit in gap")}getMap(){return new an([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new we(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1),r=t.map(this.gapFrom,-1),s=t.map(this.gapTo,1);return e.deletedAcross&&i.deletedAcross||r<e.pos||s>i.pos?null:new we(e.pos,i.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new we(e.from,e.to,e.gapFrom,e.gapTo,ft.fromJSON(t,e.slice),e.insert,!!e.structure)}}Ye.jsonID("replaceAround",we);function Jc(n,t,e){let i=n.resolve(t),r=e-t,s=i.depth;for(;r>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,r--;if(r>0){let o=i.node(s).maybeChild(i.indexAfter(s));for(;r>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,r--}}return!1}function r$(n,t,e,i){let r=[],s=[],o,a;n.doc.nodesBetween(t,e,(l,c,u)=>{if(!l.isInline)return;let h=l.marks;if(!i.isInSet(h)&&u.type.allowsMarkType(i.type)){let f=Math.max(c,t),d=Math.min(c+l.nodeSize,e),p=i.addToSet(h);for(let m=0;m<h.length;m++)h[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(h[m])?o.to=d:r.push(o=new Tn(f,d,h[m])));a&&a.to==f?a.to=d:s.push(a=new ni(f,d,i))}}),r.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function s$(n,t,e,i){let r=[],s=0;n.doc.nodesBetween(t,e,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(i instanceof el){let c=o.marks,u;for(;u=i.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else i?i.isInSet(o.marks)&&(l=[i]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,e);for(let u=0;u<l.length;u++){let h=l[u],f;for(let d=0;d<r.length;d++){let p=r[d];p.step==s-1&&h.eq(r[d].style)&&(f=p)}f?(f.to=c,f.step=s):r.push({style:h,from:Math.max(a,t),to:c,step:s})}}}),r.forEach(o=>n.step(new Tn(o.from,o.to,o.style)))}function o$(n,t,e,i=e.contentMatch){let r=n.doc.nodeAt(t),s=[],o=t+1;for(let a=0;a<r.childCount;a++){let l=r.child(a),c=o+l.nodeSize,u=i.matchType(l.type);if(!u)s.push(new Pe(o,c,ft.empty));else{i=u;for(let h=0;h<l.marks.length;h++)e.allowsMarkType(l.marks[h].type)||n.step(new Tn(o,c,l.marks[h]))}o=c}if(!i.validEnd){let a=i.fillBefore(et.empty,!0);n.replace(o,o,new ft(a,0,0))}for(let a=s.length-1;a>=0;a--)n.step(s[a])}function a$(n,t,e){return(t==0||n.canReplace(t,n.childCount))&&(e==n.childCount||n.canReplace(0,e))}function ns(n){let e=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let r=n.$from.node(i),s=n.$from.index(i),o=n.$to.indexAfter(i);if(i<n.depth&&r.canReplace(s,o,e))return i;if(i==0||r.type.spec.isolating||!a$(r,s,o))break}return null}function l$(n,t,e){let{$from:i,$to:r,depth:s}=t,o=i.before(s+1),a=r.after(s+1),l=o,c=a,u=et.empty,h=0;for(let p=s,m=!1;p>e;p--)m||i.index(p)>0?(m=!0,u=et.from(i.node(p).copy(u)),h++):l--;let f=et.empty,d=0;for(let p=s,m=!1;p>e;p--)m||r.after(p+1)<r.end(p)?(m=!0,f=et.from(r.node(p).copy(f)),d++):c++;n.step(new we(l,c,o,a,new ft(u.append(f),h,d),u.size-h,!0))}function Qu(n,t,e=null,i=n){let r=c$(n,t),s=r&&u$(i,t);return s?r.map(gd).concat({type:t,attrs:e}).concat(s.map(gd)):null}function gd(n){return{type:n,attrs:null}}function c$(n,t){let{parent:e,startIndex:i,endIndex:r}=n,s=e.contentMatchAt(i).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return e.canReplaceWith(i,r,o)?s:null}function u$(n,t){let{parent:e,startIndex:i,endIndex:r}=n,s=e.child(i),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let c=i;l&&c<r;c++)l=l.matchType(e.child(c).type);return!l||!l.validEnd?null:o}function h$(n,t,e){let i=et.empty;for(let o=e.length-1;o>=0;o--){if(i.size){let a=e[o].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=et.from(e[o].type.create(e[o].attrs,i))}let r=t.start,s=t.end;n.step(new we(r,s,r,s,new ft(i,0,0),e.length,!0))}function f$(n,t,e,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(t,e,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(i,r)&&d$(n.doc,n.mapping.slice(s).map(a),i)){n.clearIncompatible(n.mapping.slice(s).map(a,1),i);let l=n.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return n.step(new we(c,u,c+1,u-1,new ft(et.from(i.create(r,null,o.marks)),0,0),1,!0)),!1}})}function d$(n,t,e){let i=n.resolve(t),r=i.index();return i.parent.canReplaceWith(r,r+1,e)}function p$(n,t,e,i,r){let s=n.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");e||(e=s.type);let o=e.create(i,null,r||s.marks);if(s.isLeaf)return n.replaceWith(t,t+s.nodeSize,o);if(!e.validContent(s.content))throw new RangeError("Invalid content for node type "+e.name);n.step(new we(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new ft(et.from(o),0,0),1,!0))}function Ar(n,t,e=1,i){let r=n.resolve(t),s=r.depth-e,o=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,u=e-2;c>s;c--,u--){let h=r.node(c),f=r.index(c);if(h.type.spec.isolating)return!1;let d=h.content.cutByIndex(f,h.childCount),p=i&&i[u]||h;if(p!=h&&(d=d.replaceChild(0,p.type.create(p.attrs))),!h.canReplace(f+1,h.childCount)||!p.type.validContent(d))return!1}let a=r.indexAfter(s),l=i&&i[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}function g$(n,t,e=1,i){let r=n.doc.resolve(t),s=et.empty,o=et.empty;for(let a=r.depth,l=r.depth-e,c=e-1;a>l;a--,c--){s=et.from(r.node(a).copy(s));let u=i&&i[c];o=et.from(u?u.type.create(u.attrs,o):r.node(a).copy(o))}n.step(new Pe(t,t,new ft(s.append(o),e,e),!0))}function Mi(n,t){let e=n.resolve(t),i=e.index();return M0(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(i,i+1)}function M0(n,t){return!!(n&&t&&!n.isLeaf&&n.canAppend(t))}function C0(n,t,e=-1){let i=n.resolve(t);for(let r=i.depth;;r--){let s,o,a=i.index(r);if(r==i.depth?(s=i.nodeBefore,o=i.nodeAfter):e>0?(s=i.node(r+1),a++,o=i.node(r).maybeChild(a)):(s=i.node(r).maybeChild(a-1),o=i.node(r+1)),s&&!s.isTextblock&&M0(s,o)&&i.node(r).canReplace(a,a+1))return t;if(r==0)break;t=e<0?i.before(r):i.after(r)}}function m$(n,t,e){let i=new Pe(t-e,t+e,ft.empty,!0);n.step(i)}function b$(n,t,e){let i=n.resolve(t);if(i.parent.canReplaceWith(i.index(),i.index(),e))return t;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let s=i.index(r);if(i.node(r).canReplaceWith(s,s,e))return i.before(r+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let s=i.indexAfter(r);if(i.node(r).canReplaceWith(s,s,e))return i.after(r+1);if(s<i.node(r).childCount)return null}return null}function O0(n,t,e){let i=n.resolve(t);if(!e.content.size)return t;let r=e.content;for(let s=0;s<e.openStart;s++)r=r.firstChild.content;for(let s=1;s<=(e.openStart==0&&e.size?2:1);s++)for(let o=i.depth;o>=0;o--){let a=o==i.depth?0:i.pos<=(i.start(o+1)+i.end(o+1))/2?-1:1,l=i.index(o)+(a>0?1:0),c=i.node(o),u=!1;if(s==1)u=c.canReplace(l,l,r);else{let h=c.contentMatchAt(l).findWrapping(r.firstChild.type);u=h&&c.canReplaceWith(l,l,h[0])}if(u)return a==0?i.pos:a<0?i.before(o+1):i.after(o+1)}return null}function Zu(n,t,e=t,i=ft.empty){if(t==e&&!i.size)return null;let r=n.resolve(t),s=n.resolve(e);return A0(r,s,i)?new Pe(t,e,i):new y$(r,s,i).fit()}function A0(n,t,e){return!e.openStart&&!e.openEnd&&n.start()==t.start()&&n.parent.canReplace(n.index(),t.index(),e.content)}class y${constructor(t,e,i){this.$from=t,this.$to=e,this.unplaced=i,this.frontier=[],this.placed=et.empty;for(let r=0;r<=t.depth;r++){let s=t.node(r);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(r))})}for(let r=t.depth;r>0;r--)this.placed=et.from(t.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(t<0?this.$to:i.doc.resolve(t));if(!r)return null;let s=this.placed,o=i.depth,a=r.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new ft(s,o,a);return t>-1?new we(i.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||i.pos!=this.$to.pos?new Pe(i.pos,r.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<t;i++){let s=e.firstChild;if(e.childCount>1&&(r=0),s.type.spec.isolating&&r<=i){t=i;break}e=s.content}for(let e=1;e<=2;e++)for(let i=e==1?t:this.unplaced.openStart;i>=0;i--){let r,s=null;i?(s=Wl(this.unplaced.content,i-1).firstChild,r=s.content):r=this.unplaced.content;let o=r.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,h=null;if(e==1&&(o?c.matchType(o.type)||(h=c.fillBefore(et.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:a,parent:s,inject:h};if(e==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=Wl(t,e);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new ft(t,e+1,Math.max(i,r.size+e>=t.size-i?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=Wl(t,e);if(r.childCount<=1&&e>0){let s=t.size-e<=e+r.size;this.unplaced=new ft(gs(t,e-1,1),e-1,s?e-1:i)}else this.unplaced=new ft(gs(t,e,1),e,i)}placeNodes({sliceDepth:t,frontierDepth:e,parent:i,inject:r,wrap:s}){for(;this.depth>e;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-t,c=0,u=[],{match:h,type:f}=this.frontier[e];if(r){for(let m=0;m<r.childCount;m++)u.push(r.child(m));h=h.matchFragment(r)}let d=a.size+t-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),v=h.matchType(m.type);if(!v)break;c++,(c>1||l==0||m.content.size)&&(h=v,u.push(T0(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?d:-1)))}let p=c==a.childCount;p||(d=-1),this.placed=ms(this.placed,e,et.from(u)),this.frontier[e].match=h,p&&d<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,v=a;m<d;m++){let C=v.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),v=C.content}this.unplaced=p?t==0?ft.empty:new ft(gs(o.content,t-1,1),t-1,d<0?o.openEnd:t-1):new ft(gs(o.content,t,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!Ul(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:i,type:r}=this.frontier[e],s=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=Ul(t,e,r,i,s);if(o){for(let a=e-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Ul(t,a,c,l,!0);if(!u||u.childCount)continue t}return{depth:e,fit:o,move:s?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=ms(this.placed,e.depth,e.fit)),t=e.move;for(let i=e.depth+1;i<=t.depth;i++){let r=t.node(i),s=r.type.contentMatch.fillBefore(r.content,!0,t.index(i));this.openFrontierNode(r.type,r.attrs,s)}return t}openFrontierNode(t,e=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=ms(this.placed,this.depth,et.from(t.create(e,i))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(et.empty,!0);e.childCount&&(this.placed=ms(this.placed,this.frontier.length,e))}}function gs(n,t,e){return t==0?n.cutByIndex(e,n.childCount):n.replaceChild(0,n.firstChild.copy(gs(n.firstChild.content,t-1,e)))}function ms(n,t,e){return t==0?n.append(e):n.replaceChild(n.childCount-1,n.lastChild.copy(ms(n.lastChild.content,t-1,e)))}function Wl(n,t){for(let e=0;e<t;e++)n=n.firstChild.content;return n}function T0(n,t,e){if(t<=0)return n;let i=n.content;return t>1&&(i=i.replaceChild(0,T0(i.firstChild,t-1,i.childCount==1?e-1:0))),t>0&&(i=n.type.contentMatch.fillBefore(i).append(i),e<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(et.empty,!0)))),n.copy(i)}function Ul(n,t,e,i,r){let s=n.node(t),o=r?n.indexAfter(t):n.index(t);if(o==s.childCount&&!e.compatibleContent(s.type))return null;let a=i.fillBefore(s.content,!0,o);return a&&!x$(e,s.content,o)?a:null}function x$(n,t,e){for(let i=e;i<t.childCount;i++)if(!n.allowsMarks(t.child(i).marks))return!0;return!1}function v$(n){return n.spec.defining||n.spec.definingForContent}function w$(n,t,e,i){if(!i.size)return n.deleteRange(t,e);let r=n.doc.resolve(t),s=n.doc.resolve(e);if(A0(r,s,i))return n.step(new Pe(t,e,i));let o=$0(r,n.doc.resolve(e));o[o.length-1]==0&&o.pop();let a=-(r.depth+1);o.unshift(a);for(let f=r.depth,d=r.pos-1;f>0;f--,d--){let p=r.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:r.before(f)==d&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=i.openStart;for(let f=i.content,d=0;;d++){let p=f.firstChild;if(c.push(p),d==i.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let d=c[f].type,p=v$(d);if(p&&r.node(l).type!=d)u=f;else if(p||!d.isTextblock)break}for(let f=i.openStart;f>=0;f--){let d=(f+u+1)%(i.openStart+1),p=c[d];if(p)for(let m=0;m<o.length;m++){let v=o[(m+l)%o.length],C=!0;v<0&&(C=!1,v=-v);let E=r.node(v-1),F=r.index(v-1);if(E.canReplaceWith(F,F,p.type,p.marks))return n.replace(r.before(v),C?s.after(v):e,new ft(E0(i.content,0,i.openStart,d),d,i.openEnd))}}let h=n.steps.length;for(let f=o.length-1;f>=0&&(n.replace(t,e,i),!(n.steps.length>h));f--){let d=o[f];d<0||(t=r.before(d),e=s.after(d))}}function E0(n,t,e,i,r){if(t<e){let s=n.firstChild;n=n.replaceChild(0,s.copy(E0(s.content,t+1,e,i,s)))}if(t>i){let s=r.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(et.empty,!0))}return n}function S$(n,t,e,i){if(!i.isInline&&t==e&&n.doc.resolve(t).parent.content.size){let r=b$(n.doc,t,i.type);r!=null&&(t=e=r)}n.replaceRange(t,e,new ft(et.from(i),0,0))}function _$(n,t,e){let i=n.doc.resolve(t),r=n.doc.resolve(e),s=$0(i,r);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||i.node(a).type.contentMatch.validEnd)return n.delete(i.start(a),r.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),r.indexAfter(a-1))))return n.delete(i.before(a),r.after(a))}for(let o=1;o<=i.depth&&o<=r.depth;o++)if(t-i.start(o)==i.depth-o&&e>i.end(o)&&r.end(o)-e!=r.depth-o)return n.delete(i.before(o),e);n.delete(t,e)}function $0(n,t){let e=[],i=Math.min(n.depth,t.depth);for(let r=i;r>=0;r--){let s=n.start(r);if(s<n.pos-(n.depth-r)||t.end(r)>t.pos+(t.depth-r)||n.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(s==t.start(r)||r==n.depth&&r==t.depth&&n.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==s-1)&&e.push(r)}return e}class Tr extends Ye{constructor(t,e,i){super(),this.pos=t,this.attr=e,this.value=i}apply(t){let e=t.nodeAt(this.pos);if(!e)return me.fail("No node at attribute step's position");let i=Object.create(null);for(let s in e.attrs)i[s]=e.attrs[s];i[this.attr]=this.value;let r=e.type.create(i,null,e.marks);return me.fromReplace(t,this.pos,this.pos+1,new ft(et.from(r),0,e.isLeaf?0:1))}getMap(){return an.empty}invert(t){return new Tr(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Tr(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Tr(e.pos,e.attr,e.value)}}Ye.jsonID("attr",Tr);let Rr=class extends Error{};Rr=function n(t){let e=Error.call(this,t);return e.__proto__=n.prototype,e};Rr.prototype=Object.create(Error.prototype);Rr.prototype.constructor=Rr;Rr.prototype.name="TransformError";class P0{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Or}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new Rr(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,i=ft.empty){let r=Zu(this.doc,t,e,i);return r&&this.step(r),this}replaceWith(t,e,i){return this.replace(t,e,new ft(et.from(i),0,0))}delete(t,e){return this.replace(t,e,ft.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,i){return w$(this,t,e,i),this}replaceRangeWith(t,e,i){return S$(this,t,e,i),this}deleteRange(t,e){return _$(this,t,e),this}lift(t,e){return l$(this,t,e),this}join(t,e=1){return m$(this,t,e),this}wrap(t,e){return h$(this,t,e),this}setBlockType(t,e=t,i,r=null){return f$(this,t,e,i,r),this}setNodeMarkup(t,e,i=null,r){return p$(this,t,e,i,r),this}setNodeAttribute(t,e,i){return this.step(new Tr(t,e,i)),this}addNodeMark(t,e){return this.step(new ii(t,e)),this}removeNodeMark(t,e){if(!(e instanceof Ut)){let i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at position "+t);if(e=e.isInSet(i.marks),!e)return this}return this.step(new Lr(t,e)),this}split(t,e=1,i){return g$(this,t,e,i),this}addMark(t,e,i){return r$(this,t,e,i),this}removeMark(t,e,i){return s$(this,t,e,i),this}clearIncompatible(t,e,i){return o$(this,t,e,i),this}}const ql=Object.create(null);class $t{constructor(t,e,i){this.$anchor=t,this.$head=e,this.ranges=i||[new k$(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=ft.empty){let i=e.content.lastChild,r=null;for(let a=0;a<e.openEnd;a++)r=i,i=i.lastChild;let s=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=t.mapping.slice(s);t.replaceRange(u.map(l.pos),u.map(c.pos),a?ft.empty:e),a==0&&yd(t,s,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(t,e){let i=t.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:o,$to:a}=r[s],l=t.mapping.slice(i),c=l.map(o.pos),u=l.map(a.pos);s?t.deleteRange(c,u):(t.replaceRangeWith(c,u,e),yd(t,i,e.isInline?-1:1))}}static findFrom(t,e,i=!1){let r=t.parent.inlineContent?new Pt(t):pr(t.node(0),t.parent,t.pos,t.index(),e,i);if(r)return r;for(let s=t.depth-1;s>=0;s--){let o=e<0?pr(t.node(0),t.node(s),t.before(s+1),t.index(s),e,i):pr(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,e,i);if(o)return o}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new pn(t.node(0))}static atStart(t){return pr(t,t,0,0,1)||new pn(t)}static atEnd(t){return pr(t,t,t.content.size,t.childCount,-1)||new pn(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=ql[e.type];if(!i)throw new RangeError(`No selection type ${e.type} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in ql)throw new RangeError("Duplicate use of selection JSON ID "+t);return ql[t]=e,e.prototype.jsonID=t,e}getBookmark(){return Pt.between(this.$anchor,this.$head).getBookmark()}}$t.prototype.visible=!0;class k${constructor(t,e){this.$from=t,this.$to=e}}let md=!1;function bd(n){!md&&!n.parent.inlineContent&&(md=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Pt extends $t{constructor(t,e=t){bd(t),bd(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let i=t.resolve(e.map(this.head));if(!i.parent.inlineContent)return $t.near(i);let r=t.resolve(e.map(this.anchor));return new Pt(r.parent.inlineContent?r:i,i)}replace(t,e=ft.empty){if(super.replace(t,e),e==ft.empty){let i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}}eq(t){return t instanceof Pt&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new nl(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if(typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Pt(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,i=e){let r=t.resolve(e);return new this(r,i==e?r:t.resolve(i))}static between(t,e,i){let r=t.pos-e.pos;if((!i||r)&&(i=r>=0?1:-1),!e.parent.inlineContent){let s=$t.findFrom(e,i,!0)||$t.findFrom(e,-i,!0);if(s)e=s.$head;else return $t.near(e,i)}return t.parent.inlineContent||(r==0?t=e:(t=($t.findFrom(t,-i,!0)||$t.findFrom(t,i,!0)).$anchor,t.pos<e.pos!=r<0&&(t=e))),new Pt(t,e)}}$t.jsonID("text",Pt);class nl{constructor(t,e){this.anchor=t,this.head=e}map(t){return new nl(t.map(this.anchor),t.map(this.head))}resolve(t){return Pt.between(t.resolve(this.anchor),t.resolve(this.head))}}class Ct extends $t{constructor(t){let e=t.nodeAfter,i=t.node(0).resolve(t.pos+e.nodeSize);super(t,i),this.node=e}map(t,e){let{deleted:i,pos:r}=e.mapResult(this.anchor),s=t.resolve(r);return i?$t.near(s):new Ct(s)}content(){return new ft(et.from(this.node),0,0)}eq(t){return t instanceof Ct&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new th(this.anchor)}static fromJSON(t,e){if(typeof e.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ct(t.resolve(e.anchor))}static create(t,e){return new Ct(t.resolve(e))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Ct.prototype.visible=!1;$t.jsonID("node",Ct);class th{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:i}=t.mapResult(this.anchor);return e?new nl(i,i):new th(i)}resolve(t){let e=t.resolve(this.anchor),i=e.nodeAfter;return i&&Ct.isSelectable(i)?new Ct(e):$t.near(e)}}class pn extends $t{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=ft.empty){if(e==ft.empty){t.delete(0,t.doc.content.size);let i=$t.atStart(t.doc);i.eq(t.selection)||t.setSelection(i)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new pn(t)}map(t){return new pn(t)}eq(t){return t instanceof pn}getBookmark(){return M$}}$t.jsonID("all",pn);const M$={map(){return this},resolve(n){return new pn(n)}};function pr(n,t,e,i,r,s=!1){if(t.inlineContent)return Pt.create(n,e);for(let o=i-(r>0?0:1);r>0?o<t.childCount:o>=0;o+=r){let a=t.child(o);if(a.isAtom){if(!s&&Ct.isSelectable(a))return Ct.create(n,e-(r<0?a.nodeSize:0))}else{let l=pr(n,a,e+r,r<0?a.childCount:0,r,s);if(l)return l}e+=a.nodeSize*r}return null}function yd(n,t,e){let i=n.steps.length-1;if(i<t)return;let r=n.steps[i];if(!(r instanceof Pe||r instanceof we))return;let s=n.mapping.maps[i],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection($t.near(n.doc.resolve(o),e))}const xd=1,fo=2,vd=4;class C$ extends P0{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|xd)&~fo,this.storedMarks=null,this}get selectionSet(){return(this.updated&xd)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=fo,this}ensureMarks(t){return Ut.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&fo)>0}addStep(t,e){super.addStep(t,e),this.updated=this.updated&~fo,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let i=this.selection;return e&&(t=t.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Ut.none))),i.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,i){let r=this.doc.type.schema;if(e==null)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();{if(i==null&&(i=e),i=i??e,!t)return this.deleteRange(e,i);let s=this.storedMarks;if(!s){let o=this.doc.resolve(e);s=i==e?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(e,i,r.text(t,s)),this.selection.empty||this.setSelection($t.near(this.selection.$to)),this}}setMeta(t,e){return this.meta[typeof t=="string"?t:t.key]=e,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=vd,this}get scrolledIntoView(){return(this.updated&vd)>0}}function wd(n,t){return!t||!n?n:n.bind(t)}class bs{constructor(t,e,i){this.name=t,this.init=wd(e.init,i),this.apply=wd(e.apply,i)}}const O$=[new bs("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new bs("selection",{init(n,t){return n.selection||$t.atStart(t.doc)},apply(n){return n.selection}}),new bs("storedMarks",{init(n){return n.storedMarks||null},apply(n,t,e,i){return i.selection.$cursor?n.storedMarks:null}}),new bs("scrollToSelection",{init(){return 0},apply(n,t){return n.scrolledIntoView?t+1:t}})];class Kl{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=O$.slice(),e&&e.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new bs(i.key,i.spec.state,i))})}}class yr{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=e){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],i=this.applyInner(t),r=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=r?r[o].n:0,c=r?r[o].state:this,u=l<e.length&&a.spec.appendTransaction.call(a,l?e.slice(l):e,c,i);if(u&&i.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",t),!r){r=[];for(let h=0;h<this.config.plugins.length;h++)r.push(h<o?{state:i,n:e.length}:{state:this,n:0})}e.push(u),i=i.applyInner(u),s=!0}r&&(r[o]={state:i,n:e.length})}}if(!s)return{state:i,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new yr(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let s=i[r];e[s.name]=s.apply(t,this[s.name],this,e)}return e}get tr(){return new C$(this)}static create(t){let e=new Kl(t.doc?t.doc.type.schema:t.schema,t.plugins),i=new yr(e);for(let r=0;r<e.fields.length;r++)i[e.fields[r].name]=e.fields[r].init(t,i);return i}reconfigure(t){let e=new Kl(this.schema,t.plugins),i=e.fields,r=new yr(e);for(let s=0;s<i.length;s++){let o=i[s].name;r[o]=this.hasOwnProperty(o)?this[o]:i[s].init(t,r)}return r}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(i=>i.toJSON())),t&&typeof t=="object")for(let i in t){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=t[i],s=r.spec.state;s&&s.toJSON&&(e[i]=s.toJSON.call(r,this[r.key]))}return e}static fromJSON(t,e,i){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let r=new Kl(t.schema,t.plugins),s=new yr(r);return r.fields.forEach(o=>{if(o.name=="doc")s.doc=Ki.fromJSON(t.schema,e.doc);else if(o.name=="selection")s.selection=$t.fromJSON(s.doc,e.selection);else if(o.name=="storedMarks")e.storedMarks&&(s.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(e,a)){s[o.name]=c.fromJSON.call(l,t,e[a],s);return}}s[o.name]=o.init(t,s)}}),s}}function D0(n,t,e){for(let i in n){let r=n[i];r instanceof Function?r=r.bind(t):i=="handleDOMEvents"&&(r=D0(r,t,{})),e[i]=r}return e}class He{constructor(t){this.spec=t,this.props={},t.props&&D0(t.props,this,this.props),this.key=t.key?t.key.key:I0("plugin")}getState(t){return t[this.key]}}const Jl=Object.create(null);function I0(n){return n in Jl?n+"$"+ ++Jl[n]:(Jl[n]=0,n+"$")}class xn{constructor(t="key"){this.key=I0(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const en=function(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t},Rs=function(n){let t=n.assignedSlot||n.parentNode;return t&&t.nodeType==11?t.host:t};let Sd=null;const Bn=function(n,t,e){let i=Sd||(Sd=document.createRange());return i.setEnd(n,e??n.nodeValue.length),i.setStart(n,t||0),i},tr=function(n,t,e,i){return e&&(_d(n,t,e,i,-1)||_d(n,t,e,i,1))},A$=/^(img|br|input|textarea|hr)$/i;function _d(n,t,e,i,r){for(;;){if(n==e&&t==i)return!0;if(t==(r<0?0:On(n))){let s=n.parentNode;if(!s||s.nodeType!=1||E$(n)||A$.test(n.nodeName)||n.contentEditable=="false")return!1;t=en(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[t+(r<0?-1:0)],n.contentEditable=="false")return!1;t=r<0?On(n):0}else return!1}}function On(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function T$(n,t,e){for(let i=t==0,r=t==On(n);i||r;){if(n==e)return!0;let s=en(n);if(n=n.parentNode,!n)return!1;i=i&&s==0,r=r&&s==On(n)}}function E$(n){let t;for(let e=n;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==n||t.contentDOM==n)}const il=function(n){return n.focusNode&&tr(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Ri(n,t){let e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=n,e.key=e.code=t,e}function $$(n){let t=n.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}const xi=typeof navigator<"u"?navigator:null,kd=typeof document<"u"?document:null,Ci=xi&&xi.userAgent||"",Gc=/Edge\/(\d+)/.exec(Ci),N0=/MSIE \d/.exec(Ci),Yc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ci),Ge=!!(N0||Yc||Gc),ui=N0?document.documentMode:Yc?+Yc[1]:Gc?+Gc[1]:0,bn=!Ge&&/gecko\/(\d+)/i.test(Ci);bn&&+(/Firefox\/(\d+)/.exec(Ci)||[0,0])[1];const Xc=!Ge&&/Chrome\/(\d+)/.exec(Ci),Le=!!Xc,P$=Xc?+Xc[1]:0,ze=!Ge&&!!xi&&/Apple Computer/.test(xi.vendor),zr=ze&&(/Mobile\/\w+/.test(Ci)||!!xi&&xi.maxTouchPoints>2),on=zr||(xi?/Mac/.test(xi.platform):!1),fn=/Android \d/.test(Ci),rl=!!kd&&"webkitFontSmoothing"in kd.documentElement.style,D$=rl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function I$(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Gn(n,t){return typeof n=="number"?n:n[t]}function N$(n){let t=n.getBoundingClientRect(),e=t.width/n.offsetWidth||1,i=t.height/n.offsetHeight||1;return{left:t.left,right:t.left+n.clientWidth*e,top:t.top,bottom:t.top+n.clientHeight*i}}function Md(n,t,e){let i=n.someProp("scrollThreshold")||0,r=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=e||n.dom;o;o=Rs(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?I$(s):N$(a),u=0,h=0;if(t.top<c.top+Gn(i,"top")?h=-(c.top-t.top+Gn(r,"top")):t.bottom>c.bottom-Gn(i,"bottom")&&(h=t.bottom-c.bottom+Gn(r,"bottom")),t.left<c.left+Gn(i,"left")?u=-(c.left-t.left+Gn(r,"left")):t.right>c.right-Gn(i,"right")&&(u=t.right-c.right+Gn(r,"right")),u||h)if(l)s.defaultView.scrollBy(u,h);else{let f=a.scrollLeft,d=a.scrollTop;h&&(a.scrollTop+=h),u&&(a.scrollLeft+=u);let p=a.scrollLeft-f,m=a.scrollTop-d;t={left:t.left-p,top:t.top-m,right:t.right-p,bottom:t.bottom-m}}if(l)break}}function L$(n){let t=n.dom.getBoundingClientRect(),e=Math.max(0,t.top),i,r;for(let s=(t.left+t.right)/2,o=e+1;o<Math.min(innerHeight,t.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=e-20){i=a,r=l.top;break}}return{refDOM:i,refTop:r,stack:L0(n.dom)}}function L0(n){let t=[],e=n.ownerDocument;for(let i=n;i&&(t.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=e);i=Rs(i));return t}function R$({refDOM:n,refTop:t,stack:e}){let i=n?n.getBoundingClientRect().top:0;R0(e,i==0?0:i-t)}function R0(n,t){for(let e=0;e<n.length;e++){let{dom:i,top:r,left:s}=n[e];i.scrollTop!=r+t&&(i.scrollTop=r+t),i.scrollLeft!=s&&(i.scrollLeft=s)}}let hr=null;function z$(n){if(n.setActive)return n.setActive();if(hr)return n.focus(hr);let t=L0(n);n.focus(hr==null?{get preventScroll(){return hr={preventScroll:!0},!0}}:void 0),hr||(hr=!1,R0(t,0))}function z0(n,t){let e,i=2e8,r,s=0,o=t.top,a=t.top;for(let l=n.firstChild,c=0;l;l=l.nextSibling,c++){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=Bn(l).getClientRects();else continue;for(let h=0;h<u.length;h++){let f=u[h];if(f.top<=o&&f.bottom>=a){o=Math.max(f.bottom,o),a=Math.min(f.top,a);let d=f.left>t.left?f.left-t.left:f.right<t.left?t.left-f.right:0;if(d<i){e=l,i=d,r=d&&e.nodeType==3?{left:f.right<t.left?f.right:f.left,top:t.top}:t,l.nodeType==1&&d&&(s=c+(t.left>=(f.left+f.right)/2?1:0));continue}}!e&&(t.left>=f.right&&t.top>=f.top||t.left>=f.left&&t.top>=f.bottom)&&(s=c+1)}}return e&&e.nodeType==3?B$(e,r):!e||i&&e.nodeType==1?{node:n,offset:s}:z0(e,r)}function B$(n,t){let e=n.nodeValue.length,i=document.createRange();for(let r=0;r<e;r++){i.setEnd(n,r+1),i.setStart(n,r);let s=Xn(i,1);if(s.top!=s.bottom&&eh(t,s))return{node:n,offset:r+(t.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function eh(n,t){return n.left>=t.left-1&&n.left<=t.right+1&&n.top>=t.top-1&&n.top<=t.bottom+1}function F$(n,t){let e=n.parentNode;return e&&/^li$/i.test(e.nodeName)&&t.left<n.getBoundingClientRect().left?e:n}function j$(n,t,e){let{node:i,offset:r}=z0(t,e),s=-1;if(i.nodeType==1&&!i.firstChild){let o=i.getBoundingClientRect();s=o.left!=o.right&&e.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(i,r,s)}function H$(n,t,e,i){let r=-1;for(let s=t,o=!1;s!=n.dom;){let a=n.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>i.left||l.top>i.top?r=a.posBefore:(l.right<i.left||l.bottom<i.top)&&(r=a.posAfter)),!a.contentDOM&&r<0)return(a.node.isBlock?i.top<(l.top+l.bottom)/2:i.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return r>-1?r:n.docView.posFromDOM(t,e,-1)}function B0(n,t,e){let i=n.childNodes.length;if(i&&e.top<e.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(t.top-e.top)/(e.bottom-e.top))-2)),s=r;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(eh(t,c))return B0(o,t,c)}}if((s=(s+1)%i)==r)break}return n}function V$(n,t){let e=n.dom.ownerDocument,i,r=0;if(e.caretPositionFromPoint)try{let l=e.caretPositionFromPoint(t.left,t.top);l&&({offsetNode:i,offset:r}=l)}catch{}if(!i&&e.caretRangeFromPoint){let l=e.caretRangeFromPoint(t.left,t.top);l&&({startContainer:i,startOffset:r}=l)}let s=(n.root.elementFromPoint?n.root:e).elementFromPoint(t.left,t.top),o;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let l=n.dom.getBoundingClientRect();if(!eh(t,l)||(s=B0(n.dom,t,l),!s))return null}if(ze)for(let l=s;i&&l;l=Rs(l))l.draggable&&(i=void 0);if(s=F$(s,t),i){if(bn&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let l=i.childNodes[r],c;l.nodeName=="IMG"&&(c=l.getBoundingClientRect()).right<=t.left&&c.bottom>t.top&&r++}i==n.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&t.top>i.lastChild.getBoundingClientRect().bottom?o=n.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(o=H$(n,i,r,t))}o==null&&(o=j$(n,s,t));let a=n.docView.nearestDesc(s,!0);return{pos:o,inside:a?a.posAtStart-a.border:-1}}function Xn(n,t){let e=n.getClientRects();return e.length?e[t<0?0:e.length-1]:n.getBoundingClientRect()}const W$=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function F0(n,t,e){let{node:i,offset:r,atom:s}=n.docView.domFromPos(t,e<0?-1:1),o=rl||bn;if(i.nodeType==3)if(o&&(W$.test(i.nodeValue)||(e<0?!r:r==i.nodeValue.length))){let l=Xn(Bn(i,r,r),e);if(bn&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let c=Xn(Bn(i,r-1,r-1),-1);if(c.top==l.top){let u=Xn(Bn(i,r,r+1),-1);if(u.top!=l.top)return as(u,u.left<c.left)}}return l}else{let l=r,c=r,u=e<0?1:-1;return e<0&&!r?(c++,u=-1):e>=0&&r==i.nodeValue.length?(l--,u=1):e<0?l--:c++,as(Xn(Bn(i,l,c),1),u<0)}if(!n.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&r&&(e<0||r==On(i))){let l=i.childNodes[r-1];if(l.nodeType==1)return Gl(l.getBoundingClientRect(),!1)}if(s==null&&r<On(i)){let l=i.childNodes[r];if(l.nodeType==1)return Gl(l.getBoundingClientRect(),!0)}return Gl(i.getBoundingClientRect(),e>=0)}if(s==null&&r&&(e<0||r==On(i))){let l=i.childNodes[r-1],c=l.nodeType==3?Bn(l,On(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return as(Xn(c,1),!1)}if(s==null&&r<On(i)){let l=i.childNodes[r];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Bn(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return as(Xn(c,-1),!0)}return as(Xn(i.nodeType==3?Bn(i):i,-e),e>=0)}function as(n,t){if(n.width==0)return n;let e=t?n.left:n.right;return{top:n.top,bottom:n.bottom,left:e,right:e}}function Gl(n,t){if(n.height==0)return n;let e=t?n.top:n.bottom;return{top:e,bottom:e,left:n.left,right:n.right}}function j0(n,t,e){let i=n.state,r=n.root.activeElement;i!=t&&n.updateState(t),r!=n.dom&&n.focus();try{return e()}finally{i!=t&&n.updateState(i),r!=n.dom&&r&&r.focus()}}function U$(n,t,e){let i=t.selection,r=e=="up"?i.$from:i.$to;return j0(n,t,()=>{let{node:s}=n.docView.domFromPos(r.pos,e=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=F0(n,r.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Bn(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(e=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const q$=/[\u0590-\u08ac]/;function K$(n,t,e){let{$head:i}=t.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,s=!r,o=r==i.parent.content.size,a=n.domSelection();return!q$.test(i.parent.textContent)||!a.modify?e=="left"||e=="backward"?s:o:j0(n,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:h}=n.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",e,"character");let d=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),v=p&&!d.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,h),l&&(l!=u||c!=h)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),v})}let Cd=null,Od=null,Ad=!1;function J$(n,t,e){return Cd==t&&Od==e?Ad:(Cd=t,Od=e,Ad=e=="up"||e=="down"?U$(n,t,e):K$(n,t,e))}const gn=0,Td=1,xr=2,Dn=3;class Zs{constructor(t,e,i,r){this.parent=t,this.children=e,this.dom=i,this.contentDOM=r,this.dirty=gn,i.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,i){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,i=this.posAtStart;;e++){let r=this.children[e];if(r==t)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,i){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(i<0){let s,o;if(t==this.contentDOM)s=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let r;if(t==this.dom&&this.contentDOM)r=e>en(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(e==0)for(let s=t;;s=s.parentNode){if(s==this.dom){r=!1;break}if(s.previousSibling)break}if(r==null&&e==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){r=!0;break}if(s.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let i=!0,r=t;r;r=r.parentNode){let s=this.getDesc(r),o;if(s&&(!e||s.node))if(i&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))i=!1;else return s}}getDesc(t){let e=t.pmViewDesc;for(let i=e;i;i=i.parent)if(i==this)return e}posFromDOM(t,e,i){for(let r=t;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(t,e,i)}return-1}descAt(t){for(let e=0,i=0;e<this.children.length;e++){let r=this.children[e],s=i+r.size;if(i==t&&s!=i){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<s)return r.descAt(t-i-r.border);i=s}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let i=0,r=0;for(let s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.size;if(a>t||o instanceof V0){r=t-s;break}s=a}if(r)return this.children[i].domFromPos(r-this.children[i].border,e);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof H0&&s.side>=0;i--);if(e<=0){let s,o=!0;for(;s=i?this.children[i-1]:null,!(!s||s.dom.parentNode==this.contentDOM);i--,o=!1);return s&&e&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,e):{node:this.contentDOM,offset:s?en(s.dom)+1:0}}else{let s,o=!0;for(;s=i<this.children.length?this.children[i]:null,!(!s||s.dom.parentNode==this.contentDOM);i++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,e):{node:this.contentDOM,offset:s?en(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,i=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let o=i,a=0;;a++){let l=this.children[a],c=o+l.size;if(r==-1&&t<=c){let u=o+l.border;if(t>=u&&e<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,e,u);t=o;for(let h=a;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){r=en(f.dom)+1;break}t-=f.size}r==-1&&(r=0)}if(r>-1&&(c>e||a==this.children.length-1)){e=c;for(let u=a+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=en(h.dom);break}e+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return e.size==0||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:i}=this.domFromPos(t,0);if(e.nodeType!=1||i==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[i]}setSelection(t,e,i,r=!1){let s=Math.min(t,e),o=Math.max(t,e);for(let f=0,d=0;f<this.children.length;f++){let p=this.children[f],m=d+p.size;if(s>d&&o<m)return p.setSelection(t-d-p.border,e-d-p.border,i,r);d=m}let a=this.domFromPos(t,t?-1:1),l=e==t?a:this.domFromPos(e,e?-1:1),c=i.getSelection(),u=!1;if((bn||ze)&&t==e){let{node:f,offset:d}=a;if(f.nodeType==3){if(u=!!(d&&f.nodeValue[d-1]==`
`),u&&d==f.nodeValue.length)for(let p=f,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:en(m)+1});break}let v=p.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let p=f.childNodes[d-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(bn&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(r=!0)}if(!(r||u&&ze)&&tr(a.node,a.offset,c.anchorNode,c.anchorOffset)&&tr(l.node,l.offset,c.focusNode,c.focusOffset))return;let h=!1;if((c.extend||t==e)&&!u){c.collapse(a.node,a.offset);try{t!=e&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(t>e){let d=a;a=l,l=d}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let i=0,r=0;r<this.children.length;r++){let s=this.children[r],o=i+s.size;if(i==o?t<=o&&e>=i:t<o&&e>i){let a=i+s.border,l=o-s.border;if(t>=a&&e<=l){this.dirty=t==i||e==o?xr:Td,t==a&&e==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Dn:s.markDirty(t-a,e-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?xr:Dn}i=o}this.dirty=xr}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let i=t==1?xr:Td;e.dirty<i&&(e.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class H0 extends Zs{constructor(t,e,i,r){let s,o=e.type.toDOM;if(typeof o=="function"&&(o=o(i,()=>{if(!s)return r;if(s.parent)return s.parent.posBeforeChild(s)})),!e.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=e,this.widget=e,s=this}matchesWidget(t){return this.dirty==gn&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return e?e(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class G$ extends Zs{constructor(t,e,i,r){super(t,[],e,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class er extends Zs{constructor(t,e,i,r){super(t,[],i,r),this.mark=e}static create(t,e,i,r){let s=r.nodeViews[e.type.name],o=s&&s(e,r,i);return(!o||!o.dom)&&(o=An.renderSpec(document,e.type.spec.toDOM(e,i))),new er(t,e,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&Dn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(t){return this.dirty!=Dn&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),this.dirty!=gn){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=gn}}slice(t,e,i){let r=er.create(this.parent,this.mark,!0,i),s=this.children,o=this.size;e<o&&(s=tu(s,e,o,i)),t>0&&(s=tu(s,0,t,i));for(let a=0;a<s.length;a++)s[a].parent=r;return r.children=s,r}}class nr extends Zs{constructor(t,e,i,r,s,o,a,l,c){super(t,[],s,o),this.node=e,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=a,o&&this.updateChildren(l,c)}static create(t,e,i,r,s,o){let a=s.nodeViews[e.type.name],l,c=a&&a(e,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},i,r),u=c&&c.dom,h=c&&c.contentDOM;if(e.isText){if(!u)u=document.createTextNode(e.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=An.renderSpec(document,e.type.spec.toDOM(e)));!h&&!e.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),e.type.spec.draggable&&(u.draggable=!0));let f=u;return u=q0(u,i,e),c?l=new Y$(t,e,i,r,u,h||null,f,c,s,o+1):e.isText?new sl(t,e,i,r,u,f,s):new nr(t,e,i,r,u,h||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let e=this.children.length-1;e>=0;e--){let i=this.children[e];if(this.dom.contains(i.dom.parentNode)){t.contentElement=i.dom.parentNode;break}}t.contentElement||(t.getContent=()=>et.empty)}return t}matchesNode(t,e,i){return this.dirty==gn&&t.eq(this.node)&&Zc(e,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let i=this.node.inlineContent,r=e,s=t.composing?this.localCompositionInfo(t,e):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Q$(this,o&&o.node,t);eP(this.node,this.innerDeco,(c,u,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,i,t):c.type.side>=0&&!h&&l.syncToMarks(u==this.node.childCount?Ut.none:this.node.child(u).marks,i,t),l.placeWidget(c,t,r)},(c,u,h,f)=>{l.syncToMarks(c.marks,i,t);let d;l.findNodeMatch(c,u,h,f)||a&&t.state.selection.from>r&&t.state.selection.to<r+c.nodeSize&&(d=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,h,d,t)||l.updateNextNode(c,u,h,t,f)||l.addNode(c,u,h,t,r),r+=c.nodeSize}),l.syncToMarks([],i,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==xr)&&(o&&this.protectLocalComposition(t,o),W0(this.contentDOM,this.children,t),zr&&nP(this.dom))}localCompositionInfo(t,e){let{from:i,to:r}=t.state.selection;if(!(t.state.selection instanceof Pt)||i<e||r>e+this.node.content.size)return null;let s=t.domSelectionRange(),o=iP(s.focusNode,s.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,l=rP(this.node.content,a,i-e,r-e);return l<0?null:{node:o,pos:l,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:i,text:r}){if(this.getDesc(e))return;let s=e;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new G$(this,s,e,r);t.input.compositionNodes.push(o),this.children=tu(this.children,i,i+r.length,t,o)}update(t,e,i,r){return this.dirty==Dn||!t.sameMarkup(this.node)?!1:(this.updateInner(t,e,i,r),!0)}updateInner(t,e,i,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=gn}updateOuterDeco(t){if(Zc(t,this.outerDeco))return;let e=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=U0(this.dom,this.nodeDOM,Qc(this.outerDeco,this.node,e),Qc(t,this.node,e)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Ed(n,t,e,i,r){return q0(i,t,n),new nr(void 0,n,t,e,i,i,i,r,0)}class sl extends nr{constructor(t,e,i,r,s,o,a){super(t,e,i,r,s,null,o,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,i,r){return this.dirty==Dn||this.dirty!=gn&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(e),(this.dirty!=gn||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=gn,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,i){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,i)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,e,i){let r=this.node.cut(t,e),s=document.createTextNode(r.text);return new sl(this.parent,r,this.outerDeco,this.innerDeco,s,s,i)}markDirty(t,e){super.markDirty(t,e),this.dom!=this.nodeDOM&&(t==0||e==this.nodeDOM.nodeValue.length)&&(this.dirty=Dn)}get domAtom(){return!1}}class V0 extends Zs{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==gn&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Y$ extends nr{constructor(t,e,i,r,s,o,a,l,c,u){super(t,e,i,r,s,o,a,c,u),this.spec=l}update(t,e,i,r){if(this.dirty==Dn)return!1;if(this.spec.update){let s=this.spec.update(t,e,i);return s&&this.updateInner(t,e,i,r),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,e,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,i,r){this.spec.setSelection?this.spec.setSelection(t,e,i):super.setSelection(t,e,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function W0(n,t,e){let i=n.firstChild,r=!1;for(let s=0;s<t.length;s++){let o=t[s],a=o.dom;if(a.parentNode==n){for(;a!=i;)i=$d(i),r=!0;i=i.nextSibling}else r=!0,n.insertBefore(a,i);if(o instanceof er){let l=i?i.previousSibling:n.lastChild;W0(o.contentDOM,o.children,e),i=l?l.nextSibling:n.firstChild}}for(;i;)i=$d(i),r=!0;r&&e.trackWrites==n&&(e.trackWrites=null)}const ks=function(n){n&&(this.nodeName=n)};ks.prototype=Object.create(null);const ji=[new ks];function Qc(n,t,e){if(n.length==0)return ji;let i=e?ji[0]:new ks,r=[i];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&r.push(i=new ks(o.nodeName));for(let a in o){let l=o[a];l!=null&&(e&&r.length==1&&r.push(i=new ks(t.isInline?"span":"div")),a=="class"?i.class=(i.class?i.class+" ":"")+l:a=="style"?i.style=(i.style?i.style+";":"")+l:a!="nodeName"&&(i[a]=l))}}}return r}function U0(n,t,e,i){if(e==ji&&i==ji)return t;let r=t;for(let s=0;s<i.length;s++){let o=i[s],a=e[s];if(s){let l;a&&a.nodeName==o.nodeName&&r!=n&&(l=r.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(r),a=ji[0]),r=l}X$(r,a||ji[0],o)}return r}function X$(n,t,e){for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&!(i in e)&&n.removeAttribute(i);for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&e[i]!=t[i]&&n.setAttribute(i,e[i]);if(t.class!=e.class){let i=t.class?t.class.split(" ").filter(Boolean):[],r=e.class?e.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.remove(i[s]);for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.add(r[s]);n.classList.length==0&&n.removeAttribute("class")}if(t.style!=e.style){if(t.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(t.style);)n.style.removeProperty(r[1])}e.style&&(n.style.cssText+=e.style)}}function q0(n,t,e){return U0(n,n,ji,Qc(t,e,n.nodeType!=1))}function Zc(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].type.eq(t[e].type))return!1;return!0}function $d(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}class Q${constructor(t,e,i){this.lock=e,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Z$(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let i=t;i<e;i++)this.top.children[i].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,i){let r=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;r<o&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&t[r].type.spec.spanning!==!1;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=gn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=er.create(this.top,t[s],e,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(t,e,i,r){let s=-1,o;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(t,e,i))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,e,i)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,e,i,r,s){let o=this.top.children[r];return o.dirty==Dn&&o.dom==o.contentDOM&&(o.dirty=xr),o.update(t,e,i,s)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let i=t.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}t=e}}updateNextNode(t,e,i,r,s){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a instanceof nr){let l=this.preMatch.matched.get(a);if(l!=null&&l!=s)return!1;let c=a.dom;if(!(this.isLocked(c)&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&a.dirty!=Dn&&Zc(e,a.outerDeco)))&&a.update(t,e,i,r))return this.destroyBetween(this.index,o),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(t,e,i,r,s){this.top.children.splice(this.index++,0,nr.create(this.top,t,e,i,r,s)),this.changed=!0}placeWidget(t,e,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(t)&&(t==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let s=new H0(this.top,t,e,i);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof er;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof sl)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((ze||Le)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let i=document.createElement(t);t=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),t=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new V0(this.top,[],i,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function Z$(n,t){let e=t,i=e.children.length,r=n.childCount,s=new Map,o=[];t:for(;r>0;){let a;for(;;)if(i){let c=e.children[i-1];if(c instanceof er)e=c,i=c.children.length;else{a=c,i--;break}}else{if(e==t)break t;i=e.parent.children.indexOf(e),e=e.parent}let l=a.node;if(l){if(l!=n.child(r-1))break;--r,s.set(a,r),o.push(a)}}return{index:r,matched:s,matches:o.reverse()}}function tP(n,t){return n.type.side-t.type.side}function eP(n,t,e,i){let r=t.locals(n),s=0;if(r.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);i(u,r,t.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){if(o<r.length&&r[o].to==s){let p=r[o++],m;for(;o<r.length&&r[o].to==s;)(m||(m=[p])).push(r[o++]);if(m){m.sort(tP);for(let v=0;v<m.length;v++)e(m[v],c,!!l)}else e(p,c,!!l)}let u,h;if(l)h=-1,u=l,l=null;else if(c<n.childCount)h=c,u=n.child(c++);else break;for(let p=0;p<a.length;p++)a[p].to<=s&&a.splice(p--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);let f=s+u.nodeSize;if(u.isText){let p=f;o<r.length&&r[o].from<p&&(p=r[o].from);for(let m=0;m<a.length;m++)a[m].to<p&&(p=a[m].to);p<f&&(l=u.cut(p-s),u=u.cut(0,p-s),f=p,h=-1)}let d=u.isInline&&!u.isLeaf?a.filter(p=>!p.inline):a.slice();i(u,d,t.forChild(s,u),h),s=f}}function nP(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let t=n.style.cssText;n.style.cssText=t+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=t}}function iP(n,t){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&t>0){if(n.childNodes.length>t&&n.childNodes[t].nodeType==3)return n.childNodes[t];n=n.childNodes[t-1],t=On(n)}else if(n.nodeType==1&&t<n.childNodes.length)n=n.childNodes[t],t=0;else return null}}function rP(n,t,e,i){for(let r=0,s=0;r<n.childCount&&s<=i;){let o=n.child(r++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;r<n.childCount;){let c=n.child(r++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=e){let c=a<i?l.lastIndexOf(t,i-a-1):-1;if(c>=0&&c+t.length+a>=e)return a+c;if(e==i&&l.length>=i+t.length-a&&l.slice(i-a,i-a+t.length)==t)return i}}return-1}function tu(n,t,e,i,r){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=e||u<=t?s.push(l):(c<t&&s.push(l.slice(0,t-c,i)),r&&(s.push(r),r=void 0),u>e&&s.push(l.slice(e-c,l.size,i)))}return s}function nh(n,t=null){let e=n.domSelectionRange(),i=n.state.doc;if(!e.focusNode)return null;let r=n.docView.nearestDesc(e.focusNode),s=r&&r.size==0,o=n.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(o<0)return null;let a=i.resolve(o),l,c;if(il(e)){for(l=a;r&&!r.node;)r=r.parent;let u=r.node;if(r&&u.isAtom&&Ct.isSelectable(u)&&r.parent&&!(u.isInline&&T$(e.focusNode,e.focusOffset,r.dom))){let h=r.posBefore;c=new Ct(o==h?a:i.resolve(h))}}else{let u=n.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(u<0)return null;l=i.resolve(u)}if(!c){let u=t=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;c=ih(n,l,a,u)}return c}function K0(n){return n.editable?n.hasFocus():G0(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Wn(n,t=!1){let e=n.state.selection;if(J0(n,e),!!K0(n)){if(!t&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Le){let i=n.domSelectionRange(),r=n.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&tr(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)oP(n);else{let{anchor:i,head:r}=e,s,o;Pd&&!(e instanceof Pt)&&(e.$from.parent.inlineContent||(s=Dd(n,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(o=Dd(n,e.to))),n.docView.setSelection(i,r,n.root,t),Pd&&(s&&Id(s),o&&Id(o)),e.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&sP(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Pd=ze||Le&&P$<63;function Dd(n,t){let{node:e,offset:i}=n.docView.domFromPos(t,0),r=i<e.childNodes.length?e.childNodes[i]:null,s=i?e.childNodes[i-1]:null;if(ze&&r&&r.contentEditable=="false")return Yl(r);if((!r||r.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(r)return Yl(r);if(s)return Yl(s)}}function Yl(n){return n.contentEditable="true",ze&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Id(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function sP(n){let t=n.dom.ownerDocument;t.removeEventListener("selectionchange",n.input.hideSelectionGuard);let e=n.domSelectionRange(),i=e.anchorNode,r=e.anchorOffset;t.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(e.anchorNode!=i||e.anchorOffset!=r)&&(t.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!K0(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function oP(n){let t=n.domSelection(),e=document.createRange(),i=n.cursorWrapper.dom,r=i.nodeName=="IMG";r?e.setEnd(i.parentNode,en(i)+1):e.setEnd(i,0),e.collapse(!1),t.removeAllRanges(),t.addRange(e),!r&&!n.state.selection.visible&&Ge&&ui<=11&&(i.disabled=!0,i.disabled=!1)}function J0(n,t){if(t instanceof Ct){let e=n.docView.descAt(t.from);e!=n.lastSelectedViewDesc&&(Nd(n),e&&e.selectNode(),n.lastSelectedViewDesc=e)}else Nd(n)}function Nd(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function ih(n,t,e,i){return n.someProp("createSelectionBetween",r=>r(n,t,e))||Pt.between(t,e,i)}function Ld(n){return n.editable&&!n.hasFocus()?!1:G0(n)}function G0(n){let t=n.domSelectionRange();if(!t.anchorNode)return!1;try{return n.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(n.editable||n.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function aP(n){let t=n.docView.domFromPos(n.state.selection.anchor,0),e=n.domSelectionRange();return tr(t.node,t.offset,e.anchorNode,e.anchorOffset)}function eu(n,t){let{$anchor:e,$head:i}=n.selection,r=t>0?e.max(i):e.min(i),s=r.parent.inlineContent?r.depth?n.doc.resolve(t>0?r.after():r.before()):null:r;return s&&$t.findFrom(s,t)}function zi(n,t){return n.dispatch(n.state.tr.setSelection(t).scrollIntoView()),!0}function Rd(n,t,e){let i=n.state.selection;if(i instanceof Pt){if(!i.empty||e.indexOf("s")>-1)return!1;if(n.endOfTextblock(t>0?"right":"left")){let r=eu(n.state,t);return r&&r instanceof Ct?zi(n,r):!1}else if(!(on&&e.indexOf("m")>-1)){let r=i.$head,s=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter,o;if(!s||s.isText)return!1;let a=t<0?r.pos-s.nodeSize:r.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?Ct.isSelectable(s)?zi(n,new Ct(t<0?n.state.doc.resolve(r.pos-s.nodeSize):r)):rl?zi(n,new Pt(n.state.doc.resolve(t<0?a:a+s.nodeSize))):!1:!1}}else{if(i instanceof Ct&&i.node.isInline)return zi(n,new Pt(t>0?i.$to:i.$from));{let r=eu(n.state,t);return r?zi(n,r):!1}}}function oa(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ms(n){let t=n.pmViewDesc;return t&&t.size==0&&(n.nextSibling||n.nodeName!="BR")}function Xl(n){let t=n.domSelectionRange(),e=t.focusNode,i=t.focusOffset;if(!e)return;let r,s,o=!1;for(bn&&e.nodeType==1&&i<oa(e)&&Ms(e.childNodes[i])&&(o=!0);;)if(i>0){if(e.nodeType!=1)break;{let a=e.childNodes[i-1];if(Ms(a))r=e,s=--i;else if(a.nodeType==3)e=a,i=e.nodeValue.length;else break}}else{if(Y0(e))break;{let a=e.previousSibling;for(;a&&Ms(a);)r=e.parentNode,s=en(a),a=a.previousSibling;if(a)e=a,i=oa(e);else{if(e=e.parentNode,e==n.dom)break;i=0}}}o?nu(n,e,i):r&&nu(n,r,s)}function Ql(n){let t=n.domSelectionRange(),e=t.focusNode,i=t.focusOffset;if(!e)return;let r=oa(e),s,o;for(;;)if(i<r){if(e.nodeType!=1)break;let a=e.childNodes[i];if(Ms(a))s=e,o=++i;else break}else{if(Y0(e))break;{let a=e.nextSibling;for(;a&&Ms(a);)s=a.parentNode,o=en(a)+1,a=a.nextSibling;if(a)e=a,i=0,r=oa(e);else{if(e=e.parentNode,e==n.dom)break;i=r=0}}}s&&nu(n,s,o)}function Y0(n){let t=n.pmViewDesc;return t&&t.node&&t.node.isBlock}function nu(n,t,e){let i=n.domSelection();if(il(i)){let s=document.createRange();s.setEnd(t,e),s.setStart(t,e),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(t,e);n.domObserver.setCurSelection();let{state:r}=n;setTimeout(()=>{n.state==r&&Wn(n)},50)}function zd(n,t,e){let i=n.state.selection;if(i instanceof Pt&&!i.empty||e.indexOf("s")>-1||on&&e.indexOf("m")>-1)return!1;let{$from:r,$to:s}=i;if(!r.parent.inlineContent||n.endOfTextblock(t<0?"up":"down")){let o=eu(n.state,t);if(o&&o instanceof Ct)return zi(n,o)}if(!r.parent.inlineContent){let o=t<0?r:s,a=i instanceof pn?$t.near(o,t):$t.findFrom(o,t);return a?zi(n,a):!1}return!1}function Bd(n,t){if(!(n.state.selection instanceof Pt))return!0;let{$head:e,$anchor:i,empty:r}=n.state.selection;if(!e.sameParent(i))return!0;if(!r)return!1;if(n.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!e.textOffset&&(t<0?e.nodeBefore:e.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return t<0?o.delete(e.pos-s.nodeSize,e.pos):o.delete(e.pos,e.pos+s.nodeSize),n.dispatch(o),!0}return!1}function Fd(n,t,e){n.domObserver.stop(),t.contentEditable=e,n.domObserver.start()}function lP(n){if(!ze||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:e}=n.domSelectionRange();if(t&&t.nodeType==1&&e==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let i=t.firstChild;Fd(n,i,"true"),setTimeout(()=>Fd(n,i,"false"),20)}return!1}function cP(n){let t="";return n.ctrlKey&&(t+="c"),n.metaKey&&(t+="m"),n.altKey&&(t+="a"),n.shiftKey&&(t+="s"),t}function uP(n,t){let e=t.keyCode,i=cP(t);return e==8||on&&e==72&&i=="c"?Bd(n,-1)||Xl(n):e==46||on&&e==68&&i=="c"?Bd(n,1)||Ql(n):e==13||e==27?!0:e==37||on&&e==66&&i=="c"?Rd(n,-1,i)||Xl(n):e==39||on&&e==70&&i=="c"?Rd(n,1,i)||Ql(n):e==38||on&&e==80&&i=="c"?zd(n,-1,i)||Xl(n):e==40||on&&e==78&&i=="c"?lP(n)||zd(n,1,i)||Ql(n):i==(on?"m":"c")&&(e==66||e==73||e==89||e==90)}function X0(n,t){n.someProp("transformCopied",d=>{t=d(t,n)});let e=[],{content:i,openStart:r,openEnd:s}=t;for(;r>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,s--;let d=i.firstChild;e.push(d.type.name,d.attrs!=d.type.defaultAttrs?d.attrs:null),i=d.content}let o=n.someProp("clipboardSerializer")||An.fromSchema(n.state.schema),a=ib(),l=a.createElement("div");l.appendChild(o.serializeFragment(i,{document:a}));let c=l.firstChild,u,h=0;for(;c&&c.nodeType==1&&(u=nb[c.nodeName.toLowerCase()]);){for(let d=u.length-1;d>=0;d--){let p=a.createElement(u[d]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${r} ${s}${h?` -${h}`:""} ${JSON.stringify(e)}`);let f=n.someProp("clipboardTextSerializer",d=>d(t,n))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:f}}function Q0(n,t,e,i,r){let s=r.parent.type.spec.code,o,a;if(!e&&!t)return null;let l=t&&(i||s||!e);if(l){if(n.someProp("transformPastedText",f=>{t=f(t,s||i,n)}),s)return t?new ft(et.from(n.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):ft.empty;let h=n.someProp("clipboardTextParser",f=>f(t,r,i,n));if(h)a=h;else{let f=r.marks(),{schema:d}=n.state,p=An.fromSchema(d);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(m=>{let v=o.appendChild(document.createElement("p"));m&&v.appendChild(p.serializeNode(d.text(m,f)))})}}else n.someProp("transformPastedHTML",h=>{e=h(e,n)}),o=dP(e),rl&&pP(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Nr.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:r,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!hP.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=gP(jd(a,+u[1],+u[2]),u[4]);else if(a=ft.maxOpen(fP(a.content,r),!0),a.openStart||a.openEnd){let h=0,f=0;for(let d=a.content.firstChild;h<a.openStart&&!d.type.spec.isolating;h++,d=d.firstChild);for(let d=a.content.lastChild;f<a.openEnd&&!d.type.spec.isolating;f++,d=d.lastChild);a=jd(a,h,f)}return n.someProp("transformPasted",h=>{a=h(a,n)}),a}const hP=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function fP(n,t){if(n.childCount<2)return n;for(let e=t.depth;e>=0;e--){let r=t.node(e).contentMatchAt(t.index(e)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=r.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&tb(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=eb(o[o.length-1],s.length));let u=Z0(a,l);o.push(u),r=r.matchType(u.type),s=l}}),o)return et.from(o)}return n}function Z0(n,t,e=0){for(let i=t.length-1;i>=e;i--)n=t[i].create(null,et.from(n));return n}function tb(n,t,e,i,r){if(r<n.length&&r<t.length&&n[r]==t[r]){let s=tb(n,t,e,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==n.length-1?e.type:n[r+1]))return i.copy(i.content.append(et.from(Z0(e,n,r+1))))}}function eb(n,t){if(t==0)return n;let e=n.content.replaceChild(n.childCount-1,eb(n.lastChild,t-1)),i=n.contentMatchAt(n.childCount).fillBefore(et.empty,!0);return n.copy(e.append(i))}function iu(n,t,e,i,r,s){let o=t<0?n.firstChild:n.lastChild,a=o.content;return r<i-1&&(a=iu(a,t,e,i,r+1,s)),r>=e&&(a=t<0?o.contentMatchAt(0).fillBefore(a,n.childCount>1||s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(et.empty,!0))),n.replaceChild(t<0?0:n.childCount-1,o.copy(a))}function jd(n,t,e){return t<n.openStart&&(n=new ft(iu(n.content,-1,t,n.openStart,0,n.openEnd),t,n.openEnd)),e<n.openEnd&&(n=new ft(iu(n.content,1,e,n.openEnd,0,0),n.openStart,e)),n}const nb={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Hd=null;function ib(){return Hd||(Hd=document.implementation.createHTMLDocument("title"))}function dP(n){let t=/^(\s*<meta [^>]*>)*/.exec(n);t&&(n=n.slice(t[0].length));let e=ib().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),r;if((r=i&&nb[i[1].toLowerCase()])&&(n=r.map(s=>"<"+s+">").join("")+n+r.map(s=>"</"+s+">").reverse().join("")),e.innerHTML=n,r)for(let s=0;s<r.length;s++)e=e.querySelector(r[s])||e;return e}function pP(n){let t=n.querySelectorAll(Le?"span:not([class]):not([style])":"span.Apple-converted-space");for(let e=0;e<t.length;e++){let i=t[e];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function gP(n,t){if(!n.size)return n;let e=n.content.firstChild.type.schema,i;try{i=JSON.parse(t)}catch{return n}let{content:r,openStart:s,openEnd:o}=n;for(let a=i.length-2;a>=0;a-=2){let l=e.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;r=et.from(l.create(i[a+1],r)),s++,o++}return new ft(r,s,o)}const Be={},Fe={},mP={touchstart:!0,touchmove:!0};class bP{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function yP(n){for(let t in Be){let e=Be[t];n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>{vP(n,i)&&!rh(n,i)&&(n.editable||!(i.type in Fe))&&e(n,i)},mP[t]?{passive:!0}:void 0)}ze&&n.dom.addEventListener("input",()=>null),ru(n)}function ri(n,t){n.input.lastSelectionOrigin=t,n.input.lastSelectionTime=Date.now()}function xP(n){n.domObserver.stop();for(let t in n.input.eventHandlers)n.dom.removeEventListener(t,n.input.eventHandlers[t]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function ru(n){n.someProp("handleDOMEvents",t=>{for(let e in t)n.input.eventHandlers[e]||n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>rh(n,i))})}function rh(n,t){return n.someProp("handleDOMEvents",e=>{let i=e[t.type];return i?i(n,t)||t.defaultPrevented:!1})}function vP(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target;e!=n.dom;e=e.parentNode)if(!e||e.nodeType==11||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0}function wP(n,t){!rh(n,t)&&Be[t.type]&&(n.editable||!(t.type in Fe))&&Be[t.type](n,t)}Fe.keydown=(n,t)=>{let e=t;if(n.input.shiftKey=e.keyCode==16||e.shiftKey,!sb(n,e)&&(n.input.lastKeyCode=e.keyCode,n.input.lastKeyCodeTime=Date.now(),!(fn&&Le&&e.keyCode==13)))if(e.keyCode!=229&&n.domObserver.forceFlush(),zr&&e.keyCode==13&&!e.ctrlKey&&!e.altKey&&!e.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",r=>r(n,Ri(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,e))||uP(n,e)?e.preventDefault():ri(n,"key")};Fe.keyup=(n,t)=>{t.keyCode==16&&(n.input.shiftKey=!1)};Fe.keypress=(n,t)=>{let e=t;if(sb(n,e)||!e.charCode||e.ctrlKey&&!e.altKey||on&&e.metaKey)return;if(n.someProp("handleKeyPress",r=>r(n,e))){e.preventDefault();return}let i=n.state.selection;if(!(i instanceof Pt)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(e.charCode);!/[\r\n]/.test(r)&&!n.someProp("handleTextInput",s=>s(n,i.$from.pos,i.$to.pos,r))&&n.dispatch(n.state.tr.insertText(r).scrollIntoView()),e.preventDefault()}};function ol(n){return{left:n.clientX,top:n.clientY}}function SP(n,t){let e=t.x-n.clientX,i=t.y-n.clientY;return e*e+i*i<100}function sh(n,t,e,i,r){if(i==-1)return!1;let s=n.state.doc.resolve(i);for(let o=s.depth+1;o>0;o--)if(n.someProp(t,a=>o>s.depth?a(n,e,s.nodeAfter,s.before(o),r,!0):a(n,e,s.node(o),s.before(o),r,!1)))return!0;return!1}function Er(n,t,e){n.focused||n.focus();let i=n.state.tr.setSelection(t);e=="pointer"&&i.setMeta("pointer",!0),n.dispatch(i)}function _P(n,t){if(t==-1)return!1;let e=n.state.doc.resolve(t),i=e.nodeAfter;return i&&i.isAtom&&Ct.isSelectable(i)?(Er(n,new Ct(e),"pointer"),!0):!1}function kP(n,t){if(t==-1)return!1;let e=n.state.selection,i,r;e instanceof Ct&&(i=e.node);let s=n.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Ct.isSelectable(a)){i&&e.$from.depth>0&&o>=e.$from.depth&&s.before(e.$from.depth+1)==e.$from.pos?r=s.before(e.$from.depth):r=s.before(o);break}}return r!=null?(Er(n,Ct.create(n.state.doc,r),"pointer"),!0):!1}function MP(n,t,e,i,r){return sh(n,"handleClickOn",t,e,i)||n.someProp("handleClick",s=>s(n,t,i))||(r?kP(n,e):_P(n,e))}function CP(n,t,e,i){return sh(n,"handleDoubleClickOn",t,e,i)||n.someProp("handleDoubleClick",r=>r(n,t,i))}function OP(n,t,e,i){return sh(n,"handleTripleClickOn",t,e,i)||n.someProp("handleTripleClick",r=>r(n,t,i))||AP(n,e,i)}function AP(n,t,e){if(e.button!=0)return!1;let i=n.state.doc;if(t==-1)return i.inlineContent?(Er(n,Pt.create(i,0,i.content.size),"pointer"),!0):!1;let r=i.resolve(t);for(let s=r.depth+1;s>0;s--){let o=s>r.depth?r.nodeAfter:r.node(s),a=r.before(s);if(o.inlineContent)Er(n,Pt.create(i,a+1,a+1+o.content.size),"pointer");else if(Ct.isSelectable(o))Er(n,Ct.create(i,a),"pointer");else continue;return!0}}function oh(n){return aa(n)}const rb=on?"metaKey":"ctrlKey";Be.mousedown=(n,t)=>{let e=t;n.input.shiftKey=e.shiftKey;let i=oh(n),r=Date.now(),s="singleClick";r-n.input.lastClick.time<500&&SP(e,n.input.lastClick)&&!e[rb]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:r,x:e.clientX,y:e.clientY,type:s};let o=n.posAtCoords(ol(e));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new TP(n,o,e,!!i)):(s=="doubleClick"?CP:OP)(n,o.pos,o.inside,e)?e.preventDefault():ri(n,"pointer"))};class TP{constructor(t,e,i,r){this.view=t,this.pos=e,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!i[rb],this.allowDefault=i.shiftKey;let s,o;if(e.inside>-1)s=t.state.doc.nodeAt(e.inside),o=e.inside;else{let u=t.state.doc.resolve(e.pos);s=u.parent,o=u.depth?u.before():0}const a=r?null:i.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=t.state;(i.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Ct&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&bn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ri(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Wn(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(ol(t))),this.updateAllowDefault(t),this.allowDefault||!e?ri(this.view,"pointer"):MP(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||ze&&this.mightDrag&&!this.mightDrag.node.isAtom||Le&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(Er(this.view,$t.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):ri(this.view,"pointer")}move(t){this.updateAllowDefault(t),ri(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Be.touchstart=n=>{n.input.lastTouch=Date.now(),oh(n),ri(n,"pointer")};Be.touchmove=n=>{n.input.lastTouch=Date.now(),ri(n,"pointer")};Be.contextmenu=n=>oh(n);function sb(n,t){return n.composing?!0:ze&&Math.abs(t.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const EP=fn?5e3:-1;Fe.compositionstart=Fe.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:t}=n,e=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||e.marks(),aa(n,!0),n.markCursor=null;else if(aa(n),bn&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length){let i=n.domSelectionRange();for(let r=i.focusNode,s=i.focusOffset;r&&r.nodeType==1&&s!=0;){let o=s<0?r.lastChild:r.childNodes[s-1];if(!o)break;if(o.nodeType==3){n.domSelection().collapse(o,o.nodeValue.length);break}else r=o,s=-1}}n.input.composing=!0}ob(n,EP)};Fe.compositionend=(n,t)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=t.timeStamp,ob(n,20))};function ob(n,t){clearTimeout(n.input.composingTimeout),t>-1&&(n.input.composingTimeout=setTimeout(()=>aa(n),t))}function ab(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=$P());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function $P(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function aa(n,t=!1){if(!(fn&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),ab(n),t||n.docView&&n.docView.dirty){let e=nh(n);return e&&!e.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(e)):n.updateState(n.state),!0}return!1}}function PP(n,t){if(!n.dom.parentNode)return;let e=n.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(t),n.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),n.focus()},50)}const Br=Ge&&ui<15||zr&&D$<604;Be.copy=Fe.cut=(n,t)=>{let e=t,i=n.state.selection,r=e.type=="cut";if(i.empty)return;let s=Br?null:e.clipboardData,o=i.content(),{dom:a,text:l}=X0(n,o);s?(e.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):PP(n,a),r&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function DP(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function IP(n,t){if(!n.dom.parentNode)return;let e=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),e?zs(n,i.value,null,n.input.shiftKey,t):zs(n,i.textContent,i.innerHTML,n.input.shiftKey,t)},50)}function zs(n,t,e,i,r){let s=Q0(n,t,e,i,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,r,s||ft.empty)))return!0;if(!s)return!1;let o=DP(s),a=o?n.state.tr.replaceSelectionWith(o,n.input.shiftKey):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Fe.paste=(n,t)=>{let e=t;if(n.composing&&!fn)return;let i=Br?null:e.clipboardData;i&&zs(n,i.getData("text/plain"),i.getData("text/html"),n.input.shiftKey,e)?e.preventDefault():IP(n,e)};class NP{constructor(t,e){this.slice=t,this.move=e}}const lb=on?"altKey":"ctrlKey";Be.dragstart=(n,t)=>{let e=t,i=n.input.mouseDown;if(i&&i.done(),!e.dataTransfer)return;let r=n.state.selection,s=r.empty?null:n.posAtCoords(ol(e));if(!(s&&s.pos>=r.from&&s.pos<=(r instanceof Ct?r.to-1:r.to))){if(i&&i.mightDrag)n.dispatch(n.state.tr.setSelection(Ct.create(n.state.doc,i.mightDrag.pos)));else if(e.target&&e.target.nodeType==1){let c=n.docView.nearestDesc(e.target,!0);c&&c.node.type.spec.draggable&&c!=n.docView&&n.dispatch(n.state.tr.setSelection(Ct.create(n.state.doc,c.posBefore)))}}let o=n.state.selection.content(),{dom:a,text:l}=X0(n,o);e.dataTransfer.clearData(),e.dataTransfer.setData(Br?"Text":"text/html",a.innerHTML),e.dataTransfer.effectAllowed="copyMove",Br||e.dataTransfer.setData("text/plain",l),n.dragging=new NP(o,!e[lb])};Be.dragend=n=>{let t=n.dragging;window.setTimeout(()=>{n.dragging==t&&(n.dragging=null)},50)};Fe.dragover=Fe.dragenter=(n,t)=>t.preventDefault();Fe.drop=(n,t)=>{let e=t,i=n.dragging;if(n.dragging=null,!e.dataTransfer)return;let r=n.posAtCoords(ol(e));if(!r)return;let s=n.state.doc.resolve(r.pos),o=i&&i.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=Q0(n,e.dataTransfer.getData(Br?"Text":"text/plain"),Br?null:e.dataTransfer.getData("text/html"),!1,s);let a=!!(i&&!e[lb]);if(n.someProp("handleDrop",p=>p(n,e,o||ft.empty,a))){e.preventDefault();return}if(!o)return;e.preventDefault();let l=o?O0(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=n.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(h?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let d=c.doc.resolve(u);if(h&&Ct.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Ct(d));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,v,C,E)=>p=E),c.setSelection(ih(n,d,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Be.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Wn(n)},20))};Be.blur=(n,t)=>{let e=t;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),e.relatedTarget&&n.dom.contains(e.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Be.beforeinput=(n,t)=>{if(Le&&fn&&t.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,Ri(8,"Backspace")))))return;let{$cursor:r}=n.state.selection;r&&r.pos>0&&n.dispatch(n.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let n in Fe)Be[n]=Fe[n];function Bs(n,t){if(n==t)return!0;for(let e in n)if(n[e]!==t[e])return!1;for(let e in t)if(!(e in n))return!1;return!0}class ah{constructor(t,e){this.toDOM=t,this.spec=e||Ji,this.side=this.spec.side||0}map(t,e,i,r){let{pos:s,deleted:o}=t.mapResult(e.from+r,this.side<0?-1:1);return o?null:new ln(s-i,s-i,this)}valid(){return!0}eq(t){return this==t||t instanceof ah&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Bs(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class hi{constructor(t,e){this.attrs=t,this.spec=e||Ji}map(t,e,i,r){let s=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-i,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-i;return s>=o?null:new ln(s,o,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof hi&&Bs(this.attrs,t.attrs)&&Bs(this.spec,t.spec)}static is(t){return t.type instanceof hi}destroy(){}}class lh{constructor(t,e){this.attrs=t,this.spec=e||Ji}map(t,e,i,r){let s=t.mapResult(e.from+r,1);if(s.deleted)return null;let o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=s.pos?null:new ln(s.pos-i,o.pos-i,this)}valid(t,e){let{index:i,offset:r}=t.content.findIndex(e.from),s;return r==e.from&&!(s=t.child(i)).isText&&r+s.nodeSize==e.to}eq(t){return this==t||t instanceof lh&&Bs(this.attrs,t.attrs)&&Bs(this.spec,t.spec)}destroy(){}}class ln{constructor(t,e,i){this.from=t,this.to=e,this.type=i}copy(t,e){return new ln(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,i){return this.type.map(t,this,e,i)}static widget(t,e,i){return new ln(t,t,new ah(e,i))}static inline(t,e,i,r){return new ln(t,e,new hi(i,r))}static node(t,e,i,r){return new ln(t,e,new lh(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof hi}}const gr=[],Ji={};class pe{constructor(t,e){this.local=t.length?t:gr,this.children=e.length?e:gr}static create(t,e){return e.length?la(e,t,0,Ji):$e}find(t,e,i){let r=[];return this.findInner(t??0,e??1e9,r,0,i),r}findInner(t,e,i,r,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=e&&a.to>=t&&(!s||s(a.spec))&&i.push(a.copy(a.from+r,a.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<e&&this.children[o+1]>t){let a=this.children[o]+1;this.children[o+2].findInner(t-a,e-a,i,r+a,s)}}map(t,e,i){return this==$e||t.maps.length==0?this:this.mapInner(t,e,0,0,i||Ji)}mapInner(t,e,i,r,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,i,r);l&&l.type.valid(e,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?LP(this.children,o||[],t,e,i,r,s):o?new pe(o.sort(Gi),gr):$e}add(t,e){return e.length?this==$e?pe.create(t,e):this.addInner(t,e,0):this}addInner(t,e,i){let r,s=0;t.forEach((a,l)=>{let c=l+i,u;if(u=ub(e,a,c)){for(r||(r=this.children.slice());s<r.length&&r[s]<l;)s+=3;r[s]==l?r[s+2]=r[s+2].addInner(a,u,c+1):r.splice(s,0,l,l+a.nodeSize,la(u,a,c+1,Ji)),s+=3}});let o=cb(s?hb(e):e,-i);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||o.splice(a--,1);return new pe(o.length?this.local.concat(o).sort(Gi):this.local,r||this.children)}remove(t){return t.length==0||this==$e?this:this.removeInner(t,0)}removeInner(t,e){let i=this.children,r=this.local;for(let s=0;s<i.length;s+=3){let o,a=i[s]+e,l=i[s+1]+e;for(let u=0,h;u<t.length;u++)(h=t[u])&&h.from>a&&h.to<l&&(t[u]=null,(o||(o=[])).push(h));if(!o)continue;i==this.children&&(i=this.children.slice());let c=i[s+2].removeInner(o,a+1);c!=$e?i[s+2]=c:(i.splice(s,3),s-=3)}if(r.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let a=0;a<r.length;a++)r[a].eq(o,e)&&(r==this.local&&(r=this.local.slice()),r.splice(a--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new pe(r,i):$e}forChild(t,e){if(this==$e)return this;if(e.isLeaf)return pe.empty;let i,r;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(i=this.children[a+2]);break}let s=t+1,o=s+e.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof hi){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){let a=new pe(r.sort(Gi),gr);return i?new ti([a,i]):a}return i||$e}eq(t){if(this==t)return!0;if(!(t instanceof pe)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return ch(this.localsInner(t))}localsInner(t){if(this==$e)return gr;if(t.inlineContent||!this.local.some(hi.is))return this.local;let e=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof hi||e.push(this.local[i]);return e}}pe.empty=new pe([],[]);pe.removeOverlap=ch;const $e=pe.empty;class ti{constructor(t){this.members=t}map(t,e){const i=this.members.map(r=>r.map(t,e,Ji));return ti.from(i)}forChild(t,e){if(e.isLeaf)return pe.empty;let i=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(t,e);s!=$e&&(s instanceof ti?i=i.concat(s.members):i.push(s))}return ti.from(i)}eq(t){if(!(t instanceof ti)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,i=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(t);if(s.length)if(!e)e=s;else{i&&(e=e.slice(),i=!1);for(let o=0;o<s.length;o++)e.push(s[o])}}return e?ch(i?e:e.sort(Gi)):gr}static from(t){switch(t.length){case 0:return $e;case 1:return t[0];default:return new ti(t.every(e=>e instanceof pe)?t:t.reduce((e,i)=>e.concat(i instanceof pe?i:i.members),[]))}}}function LP(n,t,e,i,r,s,o){let a=n.slice();for(let c=0,u=s;c<e.maps.length;c++){let h=0;e.maps[c].forEach((f,d,p,m)=>{let v=m-p-(d-f);for(let C=0;C<a.length;C+=3){let E=a[C+1];if(E<0||f>E+u-h)continue;let F=a[C]+u-h;d>=F?a[C+1]=f<=F?-2:-1:p>=r&&v&&(a[C]+=v,a[C+1]+=v)}h+=v}),u=e.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=e.map(n[c]+s),h=u-r;if(h<0||h>=i.content.size){l=!0;continue}let f=e.map(n[c+1]+s,-1),d=f-r,{index:p,offset:m}=i.content.findIndex(h),v=i.maybeChild(p);if(v&&m==h&&m+v.nodeSize==d){let C=a[c+2].mapInner(e,v,u+1,n[c]+s+1,o);C!=$e?(a[c]=h,a[c+1]=d,a[c+2]=C):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=RP(a,n,t,e,r,s,o),u=la(c,i,0,o);t=u.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,f=0;h<u.children.length;h+=3){let d=u.children[h];for(;f<a.length&&a[f]<d;)f+=3;a.splice(f,0,u.children[h],u.children[h+1],u.children[h+2])}}return new pe(t.sort(Gi),a)}function cb(n,t){if(!t||!n.length)return n;let e=[];for(let i=0;i<n.length;i++){let r=n[i];e.push(new ln(r.from+t,r.to+t,r.type))}return e}function RP(n,t,e,i,r,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let h=l.local[u].map(i,r,c);h?e.push(h):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],t[l]+s+1);return e}function ub(n,t,e){if(t.isLeaf)return null;let i=e+t.nodeSize,r=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>e&&o.to<i&&((r||(r=[])).push(o),n[s]=null);return r}function hb(n){let t=[];for(let e=0;e<n.length;e++)n[e]!=null&&t.push(n[e]);return t}function la(n,t,e,i){let r=[],s=!1;t.forEach((a,l)=>{let c=ub(n,a,l+e);if(c){s=!0;let u=la(c,a,e+l+1,i);u!=$e&&r.push(l,l+a.nodeSize,u)}});let o=cb(s?hb(n):n,-e).sort(Gi);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||r.length?new pe(o,r):$e}function Gi(n,t){return n.from-t.from||n.to-t.to}function ch(n){let t=n;for(let e=0;e<t.length-1;e++){let i=t[e];if(i.from!=i.to)for(let r=e+1;r<t.length;r++){let s=t[r];if(s.from==i.from){s.to!=i.to&&(t==n&&(t=n.slice()),t[r]=s.copy(s.from,i.to),Vd(t,r+1,s.copy(i.to,s.to)));continue}else{s.from<i.to&&(t==n&&(t=n.slice()),t[e]=i.copy(i.from,s.from),Vd(t,r,i.copy(s.from,i.to)));break}}}return t}function Vd(n,t,e){for(;t<n.length&&Gi(e,n[t])>0;)t++;n.splice(t,0,e)}function Zl(n){let t=[];return n.someProp("decorations",e=>{let i=e(n.state);i&&i!=$e&&t.push(i)}),n.cursorWrapper&&t.push(pe.create(n.state.doc,[n.cursorWrapper.deco])),ti.from(t)}const zP={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},BP=Ge&&ui<=11;class FP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class jP{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new FP,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);Ge&&ui<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),BP&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,zP)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ld(this.view)){if(this.suppressingSelectionUpdates)return Wn(this.view);if(Ge&&ui<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&tr(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e=new Set,i;for(let s=t.focusNode;s;s=Rs(s))e.add(s);for(let s=t.anchorNode;s;s=Rs(s))if(e.has(s)){i=s;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let i=t.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&Ld(t)&&!this.ignoreSelectionChange(i),s=-1,o=-1,a=!1,l=[];if(t.editable)for(let u=0;u<e.length;u++){let h=this.registerMutation(e[u],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(bn&&l.length>1){let u=l.filter(h=>h.nodeName=="BR");if(u.length==2){let h=u[0],f=u[1];h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}}let c=null;s<0&&r&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&il(i)&&(c=nh(t))&&c.eq($t.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Wn(t),this.currentSelection.set(i),t.scrollToSelection()):(s>-1||r)&&(s>-1&&(t.docView.markDirty(s,o),HP(t)),this.handleDOMChange(s,o,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(i)||Wn(t),this.currentSelection.set(i))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let i=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(i==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!i||i.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++)e.push(t.addedNodes[u]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(t.target))return{from:i.posBefore,to:i.posAfter};let r=t.previousSibling,s=t.nextSibling;if(Ge&&ui<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:h,nextSibling:f}=t.addedNodes[u];(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(r=h),(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(s=f)}let o=r&&r.parentNode==t.target?en(r)+1:0,a=i.localPosFromDOM(t.target,o,-1),l=s&&s.parentNode==t.target?en(s):t.target.childNodes.length,c=i.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}}let Wd=new WeakMap,Ud=!1;function HP(n){if(!Wd.has(n)&&(Wd.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=bn,Ud)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ud=!0}}function VP(n){let t;function e(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}n.dom.addEventListener("beforeinput",e,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",e,!0);let i=t.startContainer,r=t.startOffset,s=t.endContainer,o=t.endOffset,a=n.domAtPos(n.state.selection.anchor);return tr(a.node,a.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}function WP(n,t,e){let{node:i,fromOffset:r,toOffset:s,from:o,to:a}=n.docView.parseRange(t,e),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],il(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Le&&n.input.lastKeyCode===8)for(let v=s;v>r;v--){let C=i.childNodes[v-1],E=C.pmViewDesc;if(C.nodeName=="BR"&&!E){s=v;break}if(!E||E.size)break}let h=n.state.doc,f=n.someProp("domParser")||Nr.fromSchema(n.state.schema),d=h.resolve(o),p=null,m=f.parse(i,{topNode:d.parent,topMatch:d.parent.contentMatchAt(d.index()),topOpen:!0,from:r,to:s,preserveWhitespace:d.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:UP,context:d});if(c&&c[0].pos!=null){let v=c[0].pos,C=c[1]&&c[1].pos;C==null&&(C=v),p={anchor:v+o,head:C+o}}return{doc:m,sel:p,from:o,to:a}}function UP(n){let t=n.pmViewDesc;if(t)return t.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(ze&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(n.parentNode.lastChild==n||ze&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const qP=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function KP(n,t,e,i,r){if(t<0){let L=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,rt=nh(n,L);if(rt&&!n.state.selection.eq(rt)){if(Le&&fn&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",ut=>ut(n,Ri(13,"Enter"))))return;let pt=n.state.tr.setSelection(rt);L=="pointer"?pt.setMeta("pointer",!0):L=="key"&&pt.scrollIntoView(),n.dispatch(pt)}return}let s=n.state.doc.resolve(t),o=s.sharedDepth(e);t=s.before(o+1),e=n.state.doc.resolve(e).after(o+1);let a=n.state.selection,l=WP(n,t,e),c=n.state.doc,u=c.slice(l.from,l.to),h,f;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(h=n.state.selection.to,f="end"):(h=n.state.selection.from,f="start"),n.input.lastKeyCode=null;let d=YP(u.content,l.doc.content,l.from,h,f);if((zr&&n.input.lastIOSEnter>Date.now()-225||fn)&&r.some(L=>L.nodeType==1&&!qP.test(L.nodeName))&&(!d||d.endA>=d.endB)&&n.someProp("handleKeyDown",L=>L(n,Ri(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!d)if(i&&a instanceof Pt&&!a.empty&&a.$head.sameParent(a.$anchor)&&!n.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))d={start:a.from,endA:a.to,endB:a.to};else{if(l.sel){let L=qd(n,n.state.doc,l.sel);L&&!L.eq(n.state.selection)&&n.dispatch(n.state.tr.setSelection(L))}return}if(Le&&n.cursorWrapper&&l.sel&&l.sel.anchor==n.cursorWrapper.deco.from&&l.sel.head==l.sel.anchor){let L=d.endB-d.start;l.sel={anchor:l.sel.anchor+L,head:l.sel.anchor+L}}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&d.start==d.endB&&n.state.selection instanceof Pt&&(d.start>n.state.selection.from&&d.start<=n.state.selection.from+2&&n.state.selection.from>=l.from?d.start=n.state.selection.from:d.endA<n.state.selection.to&&d.endA>=n.state.selection.to-2&&n.state.selection.to<=l.to&&(d.endB+=n.state.selection.to-d.endA,d.endA=n.state.selection.to)),Ge&&ui<=11&&d.endB==d.start+1&&d.endA==d.start&&d.start>l.from&&l.doc.textBetween(d.start-l.from-1,d.start-l.from+1)==" "&&(d.start--,d.endA--,d.endB--);let p=l.doc.resolveNoCache(d.start-l.from),m=l.doc.resolveNoCache(d.endB-l.from),v=c.resolve(d.start),C=p.sameParent(m)&&p.parent.inlineContent&&v.end()>=d.endA,E;if((zr&&n.input.lastIOSEnter>Date.now()-225&&(!C||r.some(L=>L.nodeName=="DIV"||L.nodeName=="P"))||!C&&p.pos<l.doc.content.size&&(E=$t.findFrom(l.doc.resolve(p.pos+1),1,!0))&&E.head==m.pos)&&n.someProp("handleKeyDown",L=>L(n,Ri(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>d.start&&GP(c,d.start,d.endA,p,m)&&n.someProp("handleKeyDown",L=>L(n,Ri(8,"Backspace")))){fn&&Le&&n.domObserver.suppressSelectionUpdates();return}Le&&fn&&d.endB==d.start&&(n.input.lastAndroidDelete=Date.now()),fn&&!C&&p.start()!=m.start()&&m.parentOffset==0&&p.depth==m.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==d.endA&&(d.endB-=2,m=l.doc.resolveNoCache(d.endB-l.from),setTimeout(()=>{n.someProp("handleKeyDown",function(L){return L(n,Ri(13,"Enter"))})},20));let F=d.start,q=d.endA,j,A,R;if(C){if(p.pos==m.pos)Ge&&ui<=11&&p.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Wn(n),20)),j=n.state.tr.delete(F,q),A=c.resolve(d.start).marksAcross(c.resolve(d.endA));else if(d.endA==d.endB&&(R=JP(p.parent.content.cut(p.parentOffset,m.parentOffset),v.parent.content.cut(v.parentOffset,d.endA-v.start()))))j=n.state.tr,R.type=="add"?j.addMark(F,q,R.mark):j.removeMark(F,q,R.mark);else if(p.parent.child(p.index()).isText&&p.index()==m.index()-(m.textOffset?0:1)){let L=p.parent.textBetween(p.parentOffset,m.parentOffset);if(n.someProp("handleTextInput",rt=>rt(n,F,q,L)))return;j=n.state.tr.insertText(L,F,q)}}if(j||(j=n.state.tr.replace(F,q,l.doc.slice(d.start-l.from,d.endB-l.from))),l.sel){let L=qd(n,j.doc,l.sel);L&&!(Le&&fn&&n.composing&&L.empty&&(d.start!=d.endB||n.input.lastAndroidDelete<Date.now()-100)&&(L.head==F||L.head==j.mapping.map(q)-1)||Ge&&L.empty&&L.head==F)&&j.setSelection(L)}A&&j.ensureMarks(A),n.dispatch(j.scrollIntoView())}function qd(n,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:ih(n,t.resolve(e.anchor),t.resolve(e.head))}function JP(n,t){let e=n.firstChild.marks,i=t.firstChild.marks,r=e,s=i,o,a,l;for(let u=0;u<i.length;u++)r=i[u].removeFromSet(r);for(let u=0;u<e.length;u++)s=e[u].removeFromSet(s);if(r.length==1&&s.length==0)a=r[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(r.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(et.from(c).eq(n))return{mark:a,type:o}}function GP(n,t,e,i,r){if(!i.parent.isTextblock||e-t<=r.pos-i.pos||tc(i,!0,!1)<r.pos)return!1;let s=n.resolve(t);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(tc(s,!0,!0));return!o.parent.isTextblock||o.pos>e||tc(o,!0,!1)<e?!1:i.parent.content.cut(i.parentOffset).eq(o.parent.content)}function tc(n,t,e){let i=n.depth,r=t?n.end():n.pos;for(;i>0&&(t||n.indexAfter(i)==n.node(i).childCount);)i--,r++,t=!1;if(e){let s=n.node(i).maybeChild(n.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,r++}return r}function YP(n,t,e,i,r){let s=n.findDiffStart(t,e);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(t,e+n.size,e+t.size);if(r=="end"){let l=Math.max(0,s-Math.min(o,a));i-=o+l-s}if(o<s&&n.size<t.size){let l=i<=s&&i>=o?s-i:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=i<=s&&i>=a?s-i:0;s-=l,o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}class XP{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new bP,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(Xd),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Gd(this),Jd(this),this.nodeViews=Yd(this),this.docView=Ed(this.state.doc,Kd(this),Zl(this),this.dom,this),this.domObserver=new jP(this,(i,r,s,o)=>KP(this,i,r,s,o)),this.domObserver.start(),yP(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ru(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Xd),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let i in this._props)e[i]=this._props[i];e.state=this.state;for(let i in t)e[i]=t[i];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){let i=this.state,r=!1,s=!1;t.storedMarks&&this.composing&&(ab(this),s=!0),this.state=t;let o=i.plugins!=t.plugins||this._props.plugins!=e.plugins;if(o||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let f=Yd(this);ZP(f,this.nodeViews)&&(this.nodeViews=f,r=!0)}(o||e.handleDOMEvents!=this._props.handleDOMEvents)&&ru(this),this.editable=Gd(this),Jd(this);let a=Zl(this),l=Kd(this),c=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",u=r||!this.docView.matchesNode(t.doc,l,a);(u||!t.selection.eq(i.selection))&&(s=!0);let h=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&L$(this);if(s){this.domObserver.stop();let f=u&&(Ge||Le)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&QP(i.selection,t.selection);if(u){let d=Le?this.trackWrites=this.domSelectionRange().focusNode:null;(r||!this.docView.update(t.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Ed(t.doc,l,a,this.dom,this)),d&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&aP(this))?Wn(this,f):(J0(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():h&&R$(h)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",e=>e(this)))if(this.state.selection instanceof Ct){let e=this.docView.domAfterPos(this.state.selection.from);e.nodeType==1&&Md(this,e.getBoundingClientRect(),t)}else Md(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let i=this.directPlugins[e];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let i=this.state.plugins[e];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let e=0;e<this.pluginViews.length;e++){let i=this.pluginViews[e];i.update&&i.update(this,t)}}someProp(t,e){let i=this._props&&this._props[t],r;if(i!=null&&(r=e?e(i):i))return r;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[t];if(a!=null&&(r=e?e(a):a))return r}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[t];if(a!=null&&(r=e?e(a):a))return r}}hasFocus(){if(Ge){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&z$(this.dom),Wn(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let e=this.dom.parentNode;e;e=e.parentNode)if(e.nodeType==9||e.nodeType==11&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return t||document}posAtCoords(t){return V$(this,t)}coordsAtPos(t,e=1){return F0(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,i=-1){let r=this.docView.posFromDOM(t,e,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(t,e){return J$(this,e||this.state,t)}pasteHTML(t,e){return zs(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return zs(this,t,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&(xP(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Zl(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(t){return wP(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){return ze&&this.root.nodeType===11&&$$(this.dom.ownerDocument)==this.dom?VP(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function Kd(n){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(n.editable),t.translate="no",n.someProp("attributes",e=>{if(typeof e=="function"&&(e=e(n.state)),e)for(let i in e)i=="class"&&(t.class+=" "+e[i]),i=="style"?t.style=(t.style?t.style+";":"")+e[i]:!t[i]&&i!="contenteditable"&&i!="nodeName"&&(t[i]=String(e[i]))}),[ln.node(0,n.state.doc.content.size,t)]}function Jd(n){if(n.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),n.cursorWrapper={dom:t,deco:ln.widget(n.state.selection.head,t,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Gd(n){return!n.someProp("editable",t=>t(n.state)===!1)}function QP(n,t){let e=Math.min(n.$anchor.sharedDepth(n.head),t.$anchor.sharedDepth(t.head));return n.$anchor.start(e)!=t.$anchor.start(e)}function Yd(n){let t=Object.create(null);function e(i){for(let r in i)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=i[r])}return n.someProp("nodeViews",e),n.someProp("markViews",e),t}function ZP(n,t){let e=0,i=0;for(let r in n){if(n[r]!=t[r])return!0;e++}for(let r in t)i++;return e!=i}function Xd(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var vi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ca={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Qd=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),tD=typeof navigator<"u"&&/Mac/.test(navigator.platform),eD=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),nD=tD||Qd&&+Qd[1]<57;for(var Me=0;Me<10;Me++)vi[48+Me]=vi[96+Me]=String(Me);for(var Me=1;Me<=24;Me++)vi[Me+111]="F"+Me;for(var Me=65;Me<=90;Me++)vi[Me]=String.fromCharCode(Me+32),ca[Me]=String.fromCharCode(Me);for(var ec in vi)ca.hasOwnProperty(ec)||(ca[ec]=vi[ec]);function iD(n){var t=nD&&(n.ctrlKey||n.altKey||n.metaKey)||eD&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",e=!t&&n.key||(n.shiftKey?ca:vi)[n.keyCode]||n.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}const rD=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function sD(n){let t=n.split(/-(?!$)/),e=t[t.length-1];e=="Space"&&(e=" ");let i,r,s,o;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))rD?o=!0:r=!0;else throw new Error("Unrecognized modifier name: "+l)}return i&&(e="Alt-"+e),r&&(e="Ctrl-"+e),o&&(e="Meta-"+e),s&&(e="Shift-"+e),e}function oD(n){let t=Object.create(null);for(let e in n)t[sD(e)]=n[e];return t}function nc(n,t,e=!0){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),e&&t.shiftKey&&(n="Shift-"+n),n}function aD(n){return new He({props:{handleKeyDown:fb(n)}})}function fb(n){let t=oD(n);return function(e,i){let r=iD(i),s,o=t[nc(r,i)];if(o&&o(e.state,e.dispatch,e))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let a=t[nc(r,i,!1)];if(a&&a(e.state,e.dispatch,e))return!0}if((i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(s=vi[i.keyCode])&&s!=r){let a=t[nc(s,i)];if(a&&a(e.state,e.dispatch,e))return!0}}return!1}}const lD=(n,t)=>n.selection.empty?!1:(t&&t(n.tr.deleteSelection().scrollIntoView()),!0);function cD(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("backward",n):e.parentOffset>0)?null:e}const uD=(n,t,e)=>{let i=cD(n,e);if(!i)return!1;let r=db(i);if(!r){let o=i.blockRange(),a=o&&ns(o);return a==null?!1:(t&&t(n.tr.lift(o,a).scrollIntoView()),!0)}let s=r.nodeBefore;if(!s.type.spec.isolating&&mb(n,r,t))return!0;if(i.parent.content.size==0&&(Fr(s,"end")||Ct.isSelectable(s))){let o=Zu(n.doc,i.before(),i.after(),ft.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=n.tr.step(o);a.setSelection(Fr(s,"end")?$t.findFrom(a.doc.resolve(a.mapping.map(r.pos,-1)),-1):Ct.create(a.doc,r.pos-s.nodeSize)),t(a.scrollIntoView())}return!0}}return s.isAtom&&r.depth==i.depth-1?(t&&t(n.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),!0):!1};function Fr(n,t,e=!1){for(let i=n;i;i=t=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(e&&i.childCount!=1)return!1}return!1}const hD=(n,t,e)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("backward",n):i.parentOffset>0)return!1;s=db(i)}let o=s&&s.nodeBefore;return!o||!Ct.isSelectable(o)?!1:(t&&t(n.tr.setSelection(Ct.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function db(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){if(n.index(t)>0)return n.doc.resolve(n.before(t+1));if(n.node(t).type.spec.isolating)break}return null}function fD(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("forward",n):e.parentOffset<e.parent.content.size)?null:e}const dD=(n,t,e)=>{let i=fD(n,e);if(!i)return!1;let r=pb(i);if(!r)return!1;let s=r.nodeAfter;if(mb(n,r,t))return!0;if(i.parent.content.size==0&&(Fr(s,"start")||Ct.isSelectable(s))){let o=Zu(n.doc,i.before(),i.after(),ft.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=n.tr.step(o);a.setSelection(Fr(s,"start")?$t.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):Ct.create(a.doc,a.mapping.map(r.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&r.depth==i.depth-1?(t&&t(n.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0):!1},pD=(n,t,e)=>{let{$head:i,empty:r}=n.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;s=pb(i)}let o=s&&s.nodeAfter;return!o||!Ct.isSelectable(o)?!1:(t&&t(n.tr.setSelection(Ct.create(n.doc,s.pos)).scrollIntoView()),!0)};function pb(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){let e=n.node(t);if(n.index(t)+1<e.childCount)return n.doc.resolve(n.after(t+1));if(e.type.spec.isolating)break}return null}const gD=(n,t)=>{let e=n.selection,i=e instanceof Ct,r;if(i){if(e.node.isTextblock||!Mi(n.doc,e.from))return!1;r=e.from}else if(r=C0(n.doc,e.from,-1),r==null)return!1;if(t){let s=n.tr.join(r);i&&s.setSelection(Ct.create(s.doc,r-n.doc.resolve(r).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},mD=(n,t)=>{let e=n.selection,i;if(e instanceof Ct){if(e.node.isTextblock||!Mi(n.doc,e.to))return!1;i=e.to}else if(i=C0(n.doc,e.to,1),i==null)return!1;return t&&t(n.tr.join(i).scrollIntoView()),!0},bD=(n,t)=>{let{$from:e,$to:i}=n.selection,r=e.blockRange(i),s=r&&ns(r);return s==null?!1:(t&&t(n.tr.lift(r,s).scrollIntoView()),!0)},yD=(n,t)=>{let{$head:e,$anchor:i}=n.selection;return!e.parent.type.spec.code||!e.sameParent(i)?!1:(t&&t(n.tr.insertText(`
`).scrollIntoView()),!0)};function gb(n){for(let t=0;t<n.edgeCount;t++){let{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const xD=(n,t)=>{let{$head:e,$anchor:i}=n.selection;if(!e.parent.type.spec.code||!e.sameParent(i))return!1;let r=e.node(-1),s=e.indexAfter(-1),o=gb(r.contentMatchAt(s));if(!o||!r.canReplaceWith(s,s,o))return!1;if(t){let a=e.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection($t.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},vD=(n,t)=>{let e=n.selection,{$from:i,$to:r}=e;if(e instanceof pn||i.parent.inlineContent||r.parent.inlineContent)return!1;let s=gb(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(Pt.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},wD=(n,t)=>{let{$cursor:e}=n.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let s=e.before();if(Ar(n.doc,s))return t&&t(n.tr.split(s).scrollIntoView()),!0}let i=e.blockRange(),r=i&&ns(i);return r==null?!1:(t&&t(n.tr.lift(i,r).scrollIntoView()),!0)},SD=(n,t)=>{let{$from:e,to:i}=n.selection,r,s=e.sharedDepth(i);return s==0?!1:(r=e.before(s),t&&t(n.tr.setSelection(Ct.create(n.doc,r))),!0)};function _D(n,t,e){let i=t.nodeBefore,r=t.nodeAfter,s=t.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&t.parent.canReplace(s-1,s)?(e&&e(n.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(r.isTextblock||Mi(n.doc,t.pos))?!1:(e&&e(n.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),!0)}function mb(n,t,e){let i=t.nodeBefore,r=t.nodeAfter,s,o;if(i.type.spec.isolating||r.type.spec.isolating)return!1;if(_D(n,t,e))return!0;let a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(s=(o=i.contentMatchAt(i.childCount)).findWrapping(r.type))&&o.matchType(s[0]||r.type).validEnd){if(e){let h=t.pos+r.nodeSize,f=et.empty;for(let m=s.length-1;m>=0;m--)f=et.from(s[m].create(null,f));f=et.from(i.copy(f));let d=n.tr.step(new we(t.pos-1,h,t.pos,h,new ft(f,1,0),s.length,!0)),p=h+2*s.length;Mi(d.doc,p)&&d.join(p),e(d.scrollIntoView())}return!0}let l=$t.findFrom(t,1),c=l&&l.$from.blockRange(l.$to),u=c&&ns(c);if(u!=null&&u>=t.depth)return e&&e(n.tr.lift(c,u).scrollIntoView()),!0;if(a&&Fr(r,"start",!0)&&Fr(i,"end")){let h=i,f=[];for(;f.push(h),!h.isTextblock;)h=h.lastChild;let d=r,p=1;for(;!d.isTextblock;d=d.firstChild)p++;if(h.canReplace(h.childCount,h.childCount,d.content)){if(e){let m=et.empty;for(let C=f.length-1;C>=0;C--)m=et.from(f[C].copy(m));let v=n.tr.step(new we(t.pos-f.length,t.pos+r.nodeSize,t.pos+p,t.pos+r.nodeSize-p,new ft(m,f.length,0),0,!0));e(v.scrollIntoView())}return!0}}return!1}function bb(n){return function(t,e){let i=t.selection,r=n<0?i.$from:i.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return r.node(s).isTextblock?(e&&e(t.tr.setSelection(Pt.create(t.doc,n<0?r.start(s):r.end(s)))),!0):!1}}const kD=bb(-1),MD=bb(1);function CD(n,t=null){return function(e,i){let{$from:r,$to:s}=e.selection,o=r.blockRange(s),a=o&&Qu(o,n,t);return a?(i&&i(e.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Zd(n,t=null){return function(e,i){let r=!1;for(let s=0;s<e.selection.ranges.length&&!r;s++){let{$from:{pos:o},$to:{pos:a}}=e.selection.ranges[s];e.doc.nodesBetween(o,a,(l,c)=>{if(r)return!1;if(!(!l.isTextblock||l.hasMarkup(n,t)))if(l.type==n)r=!0;else{let u=e.doc.resolve(c),h=u.index();r=u.parent.canReplaceWith(h,h+1,n)}})}if(!r)return!1;if(i){let s=e.tr;for(let o=0;o<e.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=e.selection.ranges[o];s.setBlockType(a,l,n,t)}i(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function OD(n,t=null){return function(e,i){let{$from:r,$to:s}=e.selection,o=r.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&r.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(r.index(o.depth-1)==0)return!1;let u=e.doc.resolve(o.start-2);l=new na(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new na(r,e.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=Qu(l,n,t,o);return c?(i&&i(AD(e.tr,o,c,a,n).scrollIntoView()),!0):!1}}function AD(n,t,e,i,r){let s=et.empty;for(let u=e.length-1;u>=0;u--)s=et.from(e[u].type.create(e[u].attrs,s));n.step(new we(t.start-(i?2:0),t.end,t.start,t.end,new ft(s,0,0),e.length,!0));let o=0;for(let u=0;u<e.length;u++)e[u].type==r&&(o=u+1);let a=e.length-o,l=t.start+e.length-(i?2:0),c=t.parent;for(let u=t.startIndex,h=t.endIndex,f=!0;u<h;u++,f=!1)!f&&Ar(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function TD(n){return function(t,e){let{$from:i,$to:r}=t.selection,s=i.blockRange(r,o=>o.childCount>0&&o.firstChild.type==n);return s?e?i.node(s.depth-1).type==n?ED(t,e,n,s):$D(t,e,s):!0:!1}}function ED(n,t,e,i){let r=n.tr,s=i.end,o=i.$to.end(i.depth);s<o&&(r.step(new we(s-1,o,s,o,new ft(et.from(e.create(null,i.parent.copy())),1,0),1,!0)),i=new na(r.doc.resolve(i.$from.pos),r.doc.resolve(o),i.depth));const a=ns(i);if(a==null)return!1;r.lift(i,a);let l=r.mapping.map(s,-1)-1;return Mi(r.doc,l)&&r.join(l),t(r.scrollIntoView()),!0}function $D(n,t,e){let i=n.tr,r=e.parent;for(let d=e.end,p=e.endIndex-1,m=e.startIndex;p>m;p--)d-=r.child(p).nodeSize,i.delete(d-1,d+1);let s=i.doc.resolve(e.start),o=s.nodeAfter;if(i.mapping.map(e.end)!=e.start+s.nodeAfter.nodeSize)return!1;let a=e.startIndex==0,l=e.endIndex==r.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?et.empty:et.from(r))))return!1;let h=s.pos,f=h+o.nodeSize;return i.step(new we(h-(a?1:0),f+(l?1:0),h+1,f-1,new ft((a?et.empty:et.from(r.copy(et.empty))).append(l?et.empty:et.from(r.copy(et.empty))),a?0:1,l?0:1),a?0:1)),t(i.scrollIntoView()),!0}function PD(n){return function(t,e){let{$from:i,$to:r}=t.selection,s=i.blockRange(r,c=>c.childCount>0&&c.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(e){let c=l.lastChild&&l.lastChild.type==a.type,u=et.from(c?n.create():null),h=new ft(et.from(n.create(null,et.from(a.type.create(null,u)))),c?3:1,0),f=s.start,d=s.end;e(t.tr.step(new we(f-(c?3:1),d,f,d,h,1,!0)).scrollIntoView())}return!0}}function al(n){const{state:t,transaction:e}=n;let{selection:i}=e,{doc:r}=e,{storedMarks:s}=e;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return i},get doc(){return r},get tr(){return i=e.selection,r=e.doc,s=e.storedMarks,e}}}class ll{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:i}=this,{view:r}=e,{tr:s}=i,o=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...u)=>{const h=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:i,editor:r,state:s}=this,{view:o}=r,a=[],l=!!t,c=t||s.tr,u=()=>(!l&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),h={...Object.fromEntries(Object.entries(i).map(([f,d])=>[f,(...m)=>{const v=this.buildProps(c,e),C=d(...m)(v);return a.push(C),h}])),run:u};return h}createCan(t){const{rawCommands:e,state:i}=this,r=!1,s=t||i.tr,o=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:i,editor:r,state:s}=this,{view:o}=r;s.storedMarks&&t.setStoredMarks(s.storedMarks);const a={tr:t,editor:r,view:o,state:al({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(i).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class DD{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const i=this.callbacks[t];return i&&i.forEach(r=>r.apply(this,e)),this}off(t,e){const i=this.callbacks[t];return i&&(e?this.callbacks[t]=i.filter(r=>r!==e):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}function gt(n,t,e){return n.config[t]===void 0&&n.parent?gt(n.parent,t,e):typeof n.config[t]=="function"?n.config[t].bind({...e,parent:n.parent?gt(n.parent,t,e):null}):n.config[t]}function cl(n){const t=n.filter(r=>r.type==="extension"),e=n.filter(r=>r.type==="node"),i=n.filter(r=>r.type==="mark");return{baseExtensions:t,nodeExtensions:e,markExtensions:i}}function yb(n){const t=[],{nodeExtensions:e,markExtensions:i}=cl(n),r=[...e,...i],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=gt(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(h=>{Object.entries(u.attributes).forEach(([f,d])=>{t.push({type:h,name:f,attribute:{...s,...d}})})})})}),r.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=gt(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,h])=>{const f={...s,...h};h?.isRequired&&h?.default===void 0&&delete f.default,t.push({type:o.name,name:u,attribute:f})})}),t}function Se(n,t){if(typeof n=="string"){if(!t.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return t.nodes[n]}return n}function ce(...n){return n.filter(t=>!!t).reduce((t,e)=>{const i={...t};return Object.entries(e).forEach(([r,s])=>{if(!i[r]){i[r]=s;return}r==="class"?i[r]=[i[r],s].join(" "):r==="style"?i[r]=[i[r],s].join("; "):i[r]=s}),i},{})}function su(n,t){return t.filter(e=>e.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(n.attrs)||{}:{[e.name]:n.attrs[e.name]}).reduce((e,i)=>ce(e,i),{})}function xb(n){return typeof n=="function"}function Et(n,t=void 0,...e){return xb(n)?t?n.bind(t)(...e):n(...e):n}function ID(n={}){return Object.keys(n).length===0&&n.constructor===Object}function ND(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function tp(n,t){return n.style?n:{...n,getAttrs:e=>{const i=n.getAttrs?n.getAttrs(e):n.attrs;if(i===!1)return!1;const r=t.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(e):ND(e.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...i,...r}}}}function ep(n){return Object.fromEntries(Object.entries(n).filter(([t,e])=>t==="attrs"&&ID(e)?!1:e!=null))}function LD(n){var t;const e=yb(n),{nodeExtensions:i,markExtensions:r}=cl(n),s=(t=i.find(l=>gt(l,"topNode")))===null||t===void 0?void 0:t.name,o=Object.fromEntries(i.map(l=>{const c=e.filter(v=>v.type===l.name),u={name:l.name,options:l.options,storage:l.storage},h=n.reduce((v,C)=>{const E=gt(C,"extendNodeSchema",u);return{...v,...E?E(l):{}}},{}),f=ep({...h,content:Et(gt(l,"content",u)),marks:Et(gt(l,"marks",u)),group:Et(gt(l,"group",u)),inline:Et(gt(l,"inline",u)),atom:Et(gt(l,"atom",u)),selectable:Et(gt(l,"selectable",u)),draggable:Et(gt(l,"draggable",u)),code:Et(gt(l,"code",u)),defining:Et(gt(l,"defining",u)),isolating:Et(gt(l,"isolating",u)),attrs:Object.fromEntries(c.map(v=>{var C;return[v.name,{default:(C=v?.attribute)===null||C===void 0?void 0:C.default}]}))}),d=Et(gt(l,"parseHTML",u));d&&(f.parseDOM=d.map(v=>tp(v,c)));const p=gt(l,"renderHTML",u);p&&(f.toDOM=v=>p({node:v,HTMLAttributes:su(v,c)}));const m=gt(l,"renderText",u);return m&&(f.toText=m),[l.name,f]})),a=Object.fromEntries(r.map(l=>{const c=e.filter(m=>m.type===l.name),u={name:l.name,options:l.options,storage:l.storage},h=n.reduce((m,v)=>{const C=gt(v,"extendMarkSchema",u);return{...m,...C?C(l):{}}},{}),f=ep({...h,inclusive:Et(gt(l,"inclusive",u)),excludes:Et(gt(l,"excludes",u)),group:Et(gt(l,"group",u)),spanning:Et(gt(l,"spanning",u)),code:Et(gt(l,"code",u)),attrs:Object.fromEntries(c.map(m=>{var v;return[m.name,{default:(v=m?.attribute)===null||v===void 0?void 0:v.default}]}))}),d=Et(gt(l,"parseHTML",u));d&&(f.parseDOM=d.map(m=>tp(m,c)));const p=gt(l,"renderHTML",u);return p&&(f.toDOM=m=>p({mark:m,HTMLAttributes:su(m,c)})),[l.name,f]}));return new GE({topNode:s,nodes:o,marks:a})}function ic(n,t){return t.nodes[n]||t.marks[n]||null}function np(n,t){return Array.isArray(t)?t.some(e=>(typeof e=="string"?e:e.name)===n.name):t}const RD=(n,t=500)=>{let e="";const i=n.parentOffset;return n.parent.nodesBetween(Math.max(0,i-t),i,(r,s,o,a)=>{var l,c;const u=((c=(l=r.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:r,pos:s,parent:o,index:a}))||r.textContent||"%leaf%";e+=u.slice(0,Math.max(0,i-s))}),e};function uh(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class ul{constructor(t){this.find=t.find,this.handler=t.handler}}const zD=(n,t)=>{if(uh(t))return t.exec(n);const e=t(n);if(!e)return null;const i=[e.text];return i.index=e.index,i.input=n,i.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(e.replaceWith)),i};function rc(n){var t;const{editor:e,from:i,to:r,text:s,rules:o,plugin:a}=n,{view:l}=e;if(l.composing)return!1;const c=l.state.doc.resolve(i);if(c.parent.type.spec.code||!((t=c.nodeBefore||c.nodeAfter)===null||t===void 0)&&t.marks.find(f=>f.type.spec.code))return!1;let u=!1;const h=RD(c)+s;return o.forEach(f=>{if(u)return;const d=zD(h,f.find);if(!d)return;const p=l.state.tr,m=al({state:l.state,transaction:p}),v={from:i-(d[0].length-s.length),to:r},{commands:C,chain:E,can:F}=new ll({editor:e,state:m});f.handler({state:m,range:v,match:d,commands:C,chain:E,can:F})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:i,to:r,text:s}),l.dispatch(p),u=!0)}),u}function BD(n){const{editor:t,rules:e}=n,i=new He({state:{init(){return null},apply(r,s){const o=r.getMeta(i);return o||(r.selectionSet||r.docChanged?null:s)}},props:{handleTextInput(r,s,o,a){return rc({editor:t,from:s,to:o,text:a,rules:e,plugin:i})},handleDOMEvents:{compositionend:r=>(setTimeout(()=>{const{$cursor:s}=r.state.selection;s&&rc({editor:t,from:s.pos,to:s.pos,text:"",rules:e,plugin:i})}),!1)},handleKeyDown(r,s){if(s.key!=="Enter")return!1;const{$cursor:o}=r.state.selection;return o?rc({editor:t,from:o.pos,to:o.pos,text:`
`,rules:e,plugin:i}):!1}},isInputRules:!0});return i}function FD(n){return typeof n=="number"}class jD{constructor(t){this.find=t.find,this.handler=t.handler}}const HD=(n,t)=>{if(uh(t))return[...n.matchAll(t)];const e=t(n);return e?e.map(i=>{const r=[i.text];return r.index=i.index,r.input=n,r.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),r.push(i.replaceWith)),r}):[]};function VD(n){const{editor:t,state:e,from:i,to:r,rule:s}=n,{commands:o,chain:a,can:l}=new ll({editor:t,state:e}),c=[];return e.doc.nodesBetween(i,r,(h,f)=>{if(!h.isTextblock||h.type.spec.code)return;const d=Math.max(i,f),p=Math.min(r,f+h.content.size),m=h.textBetween(d-f,p-f,void 0,"");HD(m,s.find).forEach(C=>{if(C.index===void 0)return;const E=d+C.index+1,F=E+C[0].length,q={from:e.tr.mapping.map(E),to:e.tr.mapping.map(F)},j=s.handler({state:e,range:q,match:C,commands:o,chain:a,can:l});c.push(j)})}),c.every(h=>h!==null)}function WD(n){const{editor:t,rules:e}=n;let i=null,r=!1,s=!1;return e.map(a=>new He({view(l){const c=u=>{var h;i=!((h=l.dom.parentElement)===null||h===void 0)&&h.contains(u.target)?l.dom.parentElement:null};return window.addEventListener("dragstart",c),{destroy(){window.removeEventListener("dragstart",c)}}},props:{handleDOMEvents:{drop:l=>(s=i===l.dom.parentElement,!1),paste:(l,c)=>{var u;const h=(u=c.clipboardData)===null||u===void 0?void 0:u.getData("text/html");return r=!!h?.includes("data-pm-slice"),!1}}},appendTransaction:(l,c,u)=>{const h=l[0],f=h.getMeta("uiEvent")==="paste"&&!r,d=h.getMeta("uiEvent")==="drop"&&!s;if(!f&&!d)return;const p=c.doc.content.findDiffStart(u.doc.content),m=c.doc.content.findDiffEnd(u.doc.content);if(!FD(p)||!m||p===m.b)return;const v=u.tr,C=al({state:u,transaction:v});if(!(!VD({editor:t,state:C,from:Math.max(p-1,0),to:m.b-1,rule:a})||!v.steps.length))return v}}))}function UD(n){const t=n.filter((e,i)=>n.indexOf(e)!==i);return[...new Set(t)]}class vr{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=vr.resolve(t),this.schema=LD(this.extensions),this.extensions.forEach(i=>{var r;this.editor.extensionStorage[i.name]=i.storage;const s={name:i.name,options:i.options,storage:i.storage,editor:this.editor,type:ic(i.name,this.schema)};i.type==="mark"&&(!((r=Et(gt(i,"keepOnSplit",s)))!==null&&r!==void 0)||r)&&this.splittableMarks.push(i.name);const o=gt(i,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=gt(i,"onCreate",s);a&&this.editor.on("create",a);const l=gt(i,"onUpdate",s);l&&this.editor.on("update",l);const c=gt(i,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=gt(i,"onTransaction",s);u&&this.editor.on("transaction",u);const h=gt(i,"onFocus",s);h&&this.editor.on("focus",h);const f=gt(i,"onBlur",s);f&&this.editor.on("blur",f);const d=gt(i,"onDestroy",s);d&&this.editor.on("destroy",d)})}static resolve(t){const e=vr.sort(vr.flatten(t)),i=UD(e.map(r=>r.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}static flatten(t){return t.map(e=>{const i={name:e.name,options:e.options,storage:e.storage},r=gt(e,"addExtensions",i);return r?[e,...this.flatten(r())]:e}).flat(10)}static sort(t){return t.sort((i,r)=>{const s=gt(i,"priority")||100,o=gt(r,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((t,e)=>{const i={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ic(e.name,this.schema)},r=gt(e,"addCommands",i);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this,e=vr.sort([...this.extensions].reverse()),i=[],r=[],s=e.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:t,type:ic(o.name,this.schema)},l=[],c=gt(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>cn.handleExit({editor:t,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([v,C])=>[v,()=>C({editor:t})]));u={...u,...m}}const h=aD(u);l.push(h);const f=gt(o,"addInputRules",a);np(o,t.options.enableInputRules)&&f&&i.push(...f());const d=gt(o,"addPasteRules",a);np(o,t.options.enablePasteRules)&&d&&r.push(...d());const p=gt(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[BD({editor:t,rules:i}),...WD({editor:t,rules:r}),...s]}get attributes(){return yb(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=cl(this.extensions);return Object.fromEntries(e.filter(i=>!!gt(i,"addNodeView")).map(i=>{const r=this.attributes.filter(l=>l.type===i.name),s={name:i.name,options:i.options,storage:i.storage,editor:t,type:Se(i.name,this.schema)},o=gt(i,"addNodeView",s);if(!o)return[];const a=(l,c,u,h)=>{const f=su(l,r);return o()({editor:t,node:l,getPos:u,decorations:h,HTMLAttributes:f,extension:i})};return[i.name,a]}))}}function qD(n){return Object.prototype.toString.call(n).slice(8,-1)}function sc(n){return qD(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function hl(n,t){const e={...n};return sc(n)&&sc(t)&&Object.keys(t).forEach(i=>{sc(t[i])?i in n?e[i]=hl(n[i],t[i]):Object.assign(e,{[i]:t[i]}):Object.assign(e,{[i]:t[i]})}),e}class nn{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Et(gt(this,"addOptions",{name:this.name}))),this.storage=Et(gt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new nn(t)}configure(t={}){const e=this.extend();return e.options=hl(this.options,t),e.storage=Et(gt(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new nn(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Et(gt(e,"addOptions",{name:e.name})),e.storage=Et(gt(e,"addStorage",{name:e.name,options:e.options})),e}}function vb(n,t,e){const{from:i,to:r}=t,{blockSeparator:s=`

`,textSerializers:o={}}=e||{};let a="",l=!0;return n.nodesBetween(i,r,(c,u,h,f)=>{var d;const p=o?.[c.type.name];p?(c.isBlock&&!l&&(a+=s,l=!0),h&&(a+=p({node:c,pos:u,parent:h,index:f,range:t}))):c.isText?(a+=(d=c?.text)===null||d===void 0?void 0:d.slice(Math.max(i,u)-u,r-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function wb(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,t])=>t.spec.toText).map(([t,e])=>[t,e.spec.toText]))}const KD=nn.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new He({key:new xn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:t,schema:e}=n,{doc:i,selection:r}=t,{ranges:s}=r,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=wb(e);return vb(i,{from:o,to:a},{textSerializers:l})}}})]}}),JD=()=>({editor:n,view:t})=>(requestAnimationFrame(()=>{var e;n.isDestroyed||(t.dom.blur(),(e=window?.getSelection())===null||e===void 0||e.removeAllRanges())}),!0),GD=(n=!1)=>({commands:t})=>t.setContent("",n),YD=()=>({state:n,tr:t,dispatch:e})=>{const{selection:i}=t,{ranges:r}=i;return e&&r.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=t,h=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),d=h.blockRange(f);if(!d)return;const p=ns(d);if(a.type.isTextblock){const{defaultType:m}=h.parent.contentMatchAt(h.index());t.setNodeMarkup(d.start,m)}(p||p===0)&&t.lift(d,p)})}),!0},XD=n=>t=>n(t),QD=()=>({state:n,dispatch:t})=>vD(n,t),ZD=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,i=e.$anchor.node();if(i.content.size>0)return!1;const r=n.selection.$anchor;for(let s=r.depth;s>0;s-=1)if(r.node(s).type===i.type){if(t){const a=r.before(s),l=r.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},tI=n=>({tr:t,state:e,dispatch:i})=>{const r=Se(n,e.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r){if(i){const l=s.before(o),c=s.after(o);t.delete(l,c).scrollIntoView()}return!0}return!1},eI=n=>({tr:t,dispatch:e})=>{const{from:i,to:r}=n;return e&&t.delete(i,r),!0},nI=()=>({state:n,dispatch:t})=>lD(n,t),iI=()=>({commands:n})=>n.keyboardShortcut("Enter"),rI=()=>({state:n,dispatch:t})=>xD(n,t);function ua(n,t,e={strict:!0}){const i=Object.keys(t);return i.length?i.every(r=>e.strict?t[r]===n[r]:uh(t[r])?t[r].test(n[r]):t[r]===n[r]):!0}function ou(n,t,e={}){return n.find(i=>i.type===t&&ua(i.attrs,e))}function sI(n,t,e={}){return!!ou(n,t,e)}function hh(n,t,e={}){if(!n||!t)return;let i=n.parent.childAfter(n.parentOffset);if(n.parentOffset===i.offset&&i.offset!==0&&(i=n.parent.childBefore(n.parentOffset)),!i.node)return;const r=ou([...i.node.marks],t,e);if(!r)return;let s=i.index,o=n.start()+i.offset,a=s+1,l=o+i.node.nodeSize;for(ou([...i.node.marks],t,e);s>0&&r.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&sI([...n.parent.child(a).marks],t,e);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Oi(n,t){if(typeof n=="string"){if(!t.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return t.marks[n]}return n}const oI=(n,t={})=>({tr:e,state:i,dispatch:r})=>{const s=Oi(n,i.schema),{doc:o,selection:a}=e,{$from:l,from:c,to:u}=a;if(r){const h=hh(l,s,t);if(h&&h.from<=c&&h.to>=u){const f=Pt.create(o,h.from,h.to);e.setSelection(f)}}return!0},aI=n=>t=>{const e=typeof n=="function"?n(t):n;for(let i=0;i<e.length;i+=1)if(e[i](t))return!0;return!1};function Sb(n){return n instanceof Pt}function Hi(n=0,t=0,e=0){return Math.min(Math.max(n,t),e)}function _b(n,t=null){if(!t)return null;const e=$t.atStart(n),i=$t.atEnd(n);if(t==="start"||t===!0)return e;if(t==="end")return i;const r=e.from,s=i.to;return t==="all"?Pt.create(n,Hi(0,r,s),Hi(n.content.size,r,s)):Pt.create(n,Hi(t,r,s),Hi(t,r,s))}function fh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const lI=(n=null,t={})=>({editor:e,view:i,tr:r,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{fh()&&i.dom.focus(),requestAnimationFrame(()=>{e.isDestroyed||(i.focus(),t?.scrollIntoView&&e.commands.scrollIntoView())})};if(i.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!Sb(e.state.selection))return o(),!0;const a=_b(r.doc,n)||e.state.selection,l=e.state.selection.eq(a);return s&&(l||r.setSelection(a),l&&r.storedMarks&&r.setStoredMarks(r.storedMarks),o()),!0},cI=(n,t)=>e=>n.every((i,r)=>t(i,{...e,index:r})),uI=(n,t)=>({tr:e,commands:i})=>i.insertContentAt({from:e.selection.from,to:e.selection.to},n,t);function ip(n){const t=`<body>${n}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}function ha(n,t,e){if(e={slice:!0,parseOptions:{},...e},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?et.fromArray(n.map(i=>t.nodeFromJSON(i))):t.nodeFromJSON(n)}catch(i){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",i),ha("",t,e)}if(typeof n=="string"){const i=Nr.fromSchema(t);return e.slice?i.parseSlice(ip(n),e.parseOptions).content:i.parse(ip(n),e.parseOptions)}return ha("",t,e)}function hI(n,t,e){const i=n.steps.length-1;if(i<t)return;const r=n.steps[i];if(!(r instanceof Pe||r instanceof we))return;const s=n.mapping.maps[i];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection($t.near(n.doc.resolve(o),e))}const fI=n=>n.toString().startsWith("<"),dI=(n,t,e)=>({tr:i,dispatch:r,editor:s})=>{if(r){e={parseOptions:{},updateSelection:!0,...e};const o=ha(t,s.schema,{parseOptions:{preserveWhitespace:"full",...e.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:n,c=!0,u=!0;if((fI(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=i.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}c?Array.isArray(t)?i.insertText(t.map(f=>f.text||"").join(""),a,l):typeof t=="object"&&t&&t.text?i.insertText(t.text,a,l):i.insertText(t,a,l):i.replaceWith(a,l,o),e.updateSelection&&hI(i,i.steps.length-1,-1)}return!0},pI=()=>({state:n,dispatch:t})=>gD(n,t),gI=()=>({state:n,dispatch:t})=>mD(n,t),mI=()=>({state:n,dispatch:t})=>uD(n,t),bI=()=>({state:n,dispatch:t})=>dD(n,t);function kb(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function yI(n){const t=n.split(/-(?!$)/);let e=t[t.length-1];e==="Space"&&(e=" ");let i,r,s,o;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))fh()||kb()?o=!0:r=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return i&&(e=`Alt-${e}`),r&&(e=`Ctrl-${e}`),o&&(e=`Meta-${e}`),s&&(e=`Shift-${e}`),e}const xI=n=>({editor:t,view:e,tr:i,dispatch:r})=>{const s=yI(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{e.someProp("handleKeyDown",c=>c(e,a))});return l?.steps.forEach(c=>{const u=c.map(i.mapping);u&&r&&i.maybeStep(u)}),!0};function Fs(n,t,e={}){const{from:i,to:r,empty:s}=n.selection,o=t?Se(t,n.schema):null,a=[];n.doc.nodesBetween(i,r,(h,f)=>{if(h.isText)return;const d=Math.max(i,f),p=Math.min(r,f+h.nodeSize);a.push({node:h,from:d,to:p})});const l=r-i,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>ua(h.node.attrs,e,{strict:!1}));return s?!!c.length:c.reduce((h,f)=>h+f.to-f.from,0)>=l}const vI=(n,t={})=>({state:e,dispatch:i})=>{const r=Se(n,e.schema);return Fs(e,r,t)?bD(e,i):!1},wI=()=>({state:n,dispatch:t})=>wD(n,t),SI=n=>({state:t,dispatch:e})=>{const i=Se(n,t.schema);return TD(i)(t,e)},_I=()=>({state:n,dispatch:t})=>yD(n,t);function fl(n,t){return t.nodes[n]?"node":t.marks[n]?"mark":null}function rp(n,t){const e=typeof t=="string"?[t]:t;return Object.keys(n).reduce((i,r)=>(e.includes(r)||(i[r]=n[r]),i),{})}const kI=(n,t)=>({tr:e,state:i,dispatch:r})=>{let s=null,o=null;const a=fl(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(s=Se(n,i.schema)),a==="mark"&&(o=Oi(n,i.schema)),r&&e.selection.ranges.forEach(l=>{i.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&e.setNodeMarkup(u,void 0,rp(c.attrs,t)),o&&c.marks.length&&c.marks.forEach(h=>{o===h.type&&e.addMark(u,u+c.nodeSize,o.create(rp(h.attrs,t)))})})}),!0):!1},MI=()=>({tr:n,dispatch:t})=>(t&&n.scrollIntoView(),!0),CI=()=>({tr:n,commands:t})=>t.setTextSelection({from:0,to:n.doc.content.size}),OI=()=>({state:n,dispatch:t})=>hD(n,t),AI=()=>({state:n,dispatch:t})=>pD(n,t),TI=()=>({state:n,dispatch:t})=>SD(n,t),EI=()=>({state:n,dispatch:t})=>MD(n,t),$I=()=>({state:n,dispatch:t})=>kD(n,t);function Mb(n,t,e={}){return ha(n,t,{slice:!1,parseOptions:e})}const PI=(n,t=!1,e={})=>({tr:i,editor:r,dispatch:s})=>{const{doc:o}=i,a=Mb(n,r.schema,e);return s&&i.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!t),!0};function DI(n,t){const e=new P0(n);return t.forEach(i=>{i.steps.forEach(r=>{e.step(r)})}),e}function II(n){for(let t=0;t<n.edgeCount;t+=1){const{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}function NI(n,t,e){const i=[];return n.nodesBetween(t.from,t.to,(r,s)=>{e(r)&&i.push({node:r,pos:s})}),i}function LI(n,t){for(let e=n.depth;e>0;e-=1){const i=n.node(e);if(t(i))return{pos:e>0?n.before(e):0,start:n.start(e),depth:e,node:i}}}function dh(n){return t=>LI(t.$from,n)}function RI(n,t){const e=An.fromSchema(t).serializeFragment(n),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(e),r.innerHTML}function zI(n,t){const e={from:0,to:n.content.size};return vb(n,e,t)}function dl(n,t){const e=Oi(t,n.schema),{from:i,to:r,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(i,r,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===e.name);return a?{...a.attrs}:{}}function BI(n,t){const e=Se(t,n.schema),{from:i,to:r}=n.selection,s=[];n.doc.nodesBetween(i,r,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===e.name);return o?{...o.attrs}:{}}function Cb(n,t){const e=fl(typeof t=="string"?t:t.name,n.schema);return e==="node"?BI(n,t):e==="mark"?dl(n,t):{}}function FI(n,t=JSON.stringify){const e={};return n.filter(i=>{const r=t(i);return Object.prototype.hasOwnProperty.call(e,r)?!1:e[r]=!0})}function jI(n){const t=FI(n);return t.length===1?t:t.filter((e,i)=>!t.filter((s,o)=>o!==i).some(s=>e.oldRange.from>=s.oldRange.from&&e.oldRange.to<=s.oldRange.to&&e.newRange.from>=s.newRange.from&&e.newRange.to<=s.newRange.to))}function HI(n){const{mapping:t,steps:e}=n,i=[];return t.maps.forEach((r,s)=>{const o=[];if(r.ranges.length)r.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=e[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=t.slice(s).map(a,-1),u=t.slice(s).map(l),h=t.invert().map(c,-1),f=t.invert().map(u);i.push({oldRange:{from:h,to:f},newRange:{from:c,to:u}})})}),jI(i)}function fa(n,t,e){const i=[];return n===t?e.resolve(n).marks().forEach(r=>{const s=e.resolve(n-1),o=hh(s,r.type);o&&i.push({mark:r,...o})}):e.nodesBetween(n,t,(r,s)=>{i.push(...r.marks.map(o=>({from:s,to:s+r.nodeSize,mark:o})))}),i}function Do(n,t,e){return Object.fromEntries(Object.entries(e).filter(([i])=>{const r=n.find(s=>s.type===t&&s.name===i);return r?r.attribute.keepOnSplit:!1}))}function au(n,t,e={}){const{empty:i,ranges:r}=n.selection,s=t?Oi(t,n.schema):null;if(i)return!!(n.storedMarks||n.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>ua(h.attrs,e,{strict:!1}));let o=0;const a=[];if(r.forEach(({$from:h,$to:f})=>{const d=h.pos,p=f.pos;n.doc.nodesBetween(d,p,(m,v)=>{if(!m.isText&&!m.marks.length)return;const C=Math.max(d,v),E=Math.min(p,v+m.nodeSize),F=E-C;o+=F,a.push(...m.marks.map(q=>({mark:q,from:C,to:E})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>ua(h.mark.attrs,e,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,f)=>h+f.to-f.from,0);return(l>0?l+c:l)>=o}function VI(n,t,e={}){if(!t)return Fs(n,null,e)||au(n,null,e);const i=fl(t,n.schema);return i==="node"?Fs(n,t,e):i==="mark"?au(n,t,e):!1}function sp(n,t){const{nodeExtensions:e}=cl(t),i=e.find(o=>o.name===n);if(!i)return!1;const r={name:i.name,options:i.options,storage:i.storage},s=Et(gt(i,"group",r));return typeof s!="string"?!1:s.split(" ").includes("list")}function WI(n){var t;const e=(t=n.type.createAndFill())===null||t===void 0?void 0:t.toJSON(),i=n.toJSON();return JSON.stringify(e)===JSON.stringify(i)}function UI(n,t,e){var i;const{selection:r}=t;let s=null;if(Sb(r)&&(s=r.$cursor),s){const a=(i=n.storedMarks)!==null&&i!==void 0?i:s.marks();return!!e.isInSet(a)||!a.some(l=>l.type.excludes(e))}const{ranges:o}=r;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(e):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,h,f)=>{if(c)return!1;if(u.isInline){const d=!f||f.type.allowsMarkType(e),p=!!e.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(e));c=d&&p}return!c}),c})}const qI=(n,t={})=>({tr:e,state:i,dispatch:r})=>{const{selection:s}=e,{empty:o,ranges:a}=s,l=Oi(n,i.schema);if(r)if(o){const c=dl(i,l);e.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const u=c.$from.pos,h=c.$to.pos;i.doc.nodesBetween(u,h,(f,d)=>{const p=Math.max(d,u),m=Math.min(d+f.nodeSize,h);f.marks.find(C=>C.type===l)?f.marks.forEach(C=>{l===C.type&&e.addMark(p,m,l.create({...C.attrs,...t}))}):e.addMark(p,m,l.create(t))})});return UI(i,e,l)},KI=(n,t)=>({tr:e})=>(e.setMeta(n,t),!0),JI=(n,t={})=>({state:e,dispatch:i,chain:r})=>{const s=Se(n,e.schema);return s.isTextblock?r().command(({commands:o})=>Zd(s,t)(e)?!0:o.clearNodes()).command(({state:o})=>Zd(s,t)(o,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},GI=n=>({tr:t,dispatch:e})=>{if(e){const{doc:i}=t,r=Hi(n,0,i.content.size),s=Ct.create(i,r);t.setSelection(s)}return!0},YI=n=>({tr:t,dispatch:e})=>{if(e){const{doc:i}=t,{from:r,to:s}=typeof n=="number"?{from:n,to:n}:n,o=Pt.atStart(i).from,a=Pt.atEnd(i).to,l=Hi(r,o,a),c=Hi(s,o,a),u=Pt.create(i,l,c);t.setSelection(u)}return!0},XI=n=>({state:t,dispatch:e})=>{const i=Se(n,t.schema);return PD(i)(t,e)};function op(n,t){const e=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(e){const i=e.filter(r=>t?.includes(r.type.name));n.tr.ensureMarks(i)}}const QI=({keepMarks:n=!0}={})=>({tr:t,state:e,dispatch:i,editor:r})=>{const{selection:s,doc:o}=t,{$from:a,$to:l}=s,c=r.extensionManager.attributes,u=Do(c,a.node().type.name,a.node().attrs);if(s instanceof Ct&&s.node.isBlock)return!a.parentOffset||!Ar(o,a.pos)?!1:(i&&(n&&op(e,r.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(i){const h=l.parentOffset===l.parent.content.size;s instanceof Pt&&t.deleteSelection();const f=a.depth===0?void 0:II(a.node(-1).contentMatchAt(a.indexAfter(-1)));let d=h&&f?[{type:f,attrs:u}]:void 0,p=Ar(t.doc,t.mapping.map(a.pos),1,d);if(!d&&!p&&Ar(t.doc,t.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,d=f?[{type:f,attrs:u}]:void 0),p&&(t.split(t.mapping.map(a.pos),1,d),f&&!h&&!a.parentOffset&&a.parent.type!==f)){const m=t.mapping.map(a.before()),v=t.doc.resolve(m);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&t.setNodeMarkup(t.mapping.map(a.before()),f)}n&&op(e,r.extensionManager.splittableMarks),t.scrollIntoView()}return!0},ZI=n=>({tr:t,state:e,dispatch:i,editor:r})=>{var s;const o=Se(n,e.schema),{$from:a,$to:l}=e.selection,c=e.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const h=r.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let v=et.empty;const C=a.index(-1)?1:a.index(-2)?2:3;for(let R=a.depth-C;R>=a.depth-3;R-=1)v=et.from(a.node(R).copy(v));const E=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,F=Do(h,a.node().type.name,a.node().attrs),q=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(F))||void 0;v=v.append(et.from(o.createAndFill(null,q)||void 0));const j=a.before(a.depth-(C-1));t.replace(j,a.after(-E),new ft(v,4-C,0));let A=-1;t.doc.nodesBetween(j,t.doc.content.size,(R,L)=>{if(A>-1)return!1;R.isTextblock&&R.content.size===0&&(A=L+1)}),A>-1&&t.setSelection(Pt.near(t.doc.resolve(A))),t.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,d=Do(h,u.type.name,u.attrs),p=Do(h,a.node().type.name,a.node().attrs);t.delete(a.pos,l.pos);const m=f?[{type:o,attrs:d},{type:f,attrs:p}]:[{type:o,attrs:d}];if(!Ar(t.doc,a.pos,2))return!1;if(i){const{selection:v,storedMarks:C}=e,{splittableMarks:E}=r.extensionManager,F=C||v.$to.parentOffset&&v.$from.marks();if(t.split(a.pos,2,m).scrollIntoView(),!F||!i)return!0;const q=F.filter(j=>E.includes(j.type.name));t.ensureMarks(q)}return!0},oc=(n,t)=>{const e=dh(o=>o.type===t)(n.selection);if(!e)return!0;const i=n.doc.resolve(Math.max(0,e.pos-1)).before(e.depth);if(i===void 0)return!0;const r=n.doc.nodeAt(i);return e.node.type===r?.type&&Mi(n.doc,e.pos)&&n.join(e.pos),!0},ac=(n,t)=>{const e=dh(o=>o.type===t)(n.selection);if(!e)return!0;const i=n.doc.resolve(e.start).after(e.depth);if(i===void 0)return!0;const r=n.doc.nodeAt(i);return e.node.type===r?.type&&Mi(n.doc,i)&&n.join(i),!0},tN=(n,t,e)=>({editor:i,tr:r,state:s,dispatch:o,chain:a,commands:l,can:c})=>{const{extensions:u,splittableMarks:h}=i.extensionManager,f=Se(n,s.schema),d=Se(t,s.schema),{selection:p,storedMarks:m}=s,{$from:v,$to:C}=p,E=v.blockRange(C),F=m||p.$to.parentOffset&&p.$from.marks();if(!E)return!1;const q=dh(j=>sp(j.type.name,u))(p);if(E.depth>=1&&q&&E.depth-q.depth<=1){if(q.node.type===f)return l.liftListItem(d);if(sp(q.node.type.name,u)&&f.validContent(q.node.content)&&o)return a().command(()=>(r.setNodeMarkup(q.pos,f),!0)).command(()=>oc(r,f)).command(()=>ac(r,f)).run()}return!e||!F||!o?a().command(()=>c().wrapInList(f)?!0:l.clearNodes()).wrapInList(f).command(()=>oc(r,f)).command(()=>ac(r,f)).run():a().command(()=>{const j=c().wrapInList(f),A=F.filter(R=>h.includes(R.type.name));return r.ensureMarks(A),j?!0:l.clearNodes()}).wrapInList(f).command(()=>oc(r,f)).command(()=>ac(r,f)).run()},eN=(n,t={},e={})=>({state:i,commands:r})=>{const{extendEmptyMarkRange:s=!1}=e,o=Oi(n,i.schema);return au(i,o,t)?r.unsetMark(o,{extendEmptyMarkRange:s}):r.setMark(o,t)},nN=(n,t,e={})=>({state:i,commands:r})=>{const s=Se(n,i.schema),o=Se(t,i.schema);return Fs(i,s,e)?r.setNode(o):r.setNode(s,e)},iN=(n,t={})=>({state:e,commands:i})=>{const r=Se(n,e.schema);return Fs(e,r,t)?i.lift(r):i.wrapIn(r,t)},rN=()=>({state:n,dispatch:t})=>{const e=n.plugins;for(let i=0;i<e.length;i+=1){const r=e[i];let s;if(r.spec.isInputRules&&(s=r.getState(n))){if(t){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},sN=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,{empty:i,ranges:r}=e;return i||t&&r.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},oN=(n,t={})=>({tr:e,state:i,dispatch:r})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=e,l=Oi(n,i.schema),{$from:c,empty:u,ranges:h}=a;if(!r)return!0;if(u&&o){let{from:f,to:d}=a;const p=(s=c.marks().find(v=>v.type===l))===null||s===void 0?void 0:s.attrs,m=hh(c,l,p);m&&(f=m.from,d=m.to),e.removeMark(f,d,l)}else h.forEach(f=>{e.removeMark(f.$from.pos,f.$to.pos,l)});return e.removeStoredMark(l),!0},aN=(n,t={})=>({tr:e,state:i,dispatch:r})=>{let s=null,o=null;const a=fl(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(s=Se(n,i.schema)),a==="mark"&&(o=Oi(n,i.schema)),r&&e.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;i.doc.nodesBetween(c,u,(h,f)=>{s&&s===h.type&&e.setNodeMarkup(f,void 0,{...h.attrs,...t}),o&&h.marks.length&&h.marks.forEach(d=>{if(o===d.type){const p=Math.max(f,c),m=Math.min(f+h.nodeSize,u);e.addMark(p,m,o.create({...d.attrs,...t}))}})})}),!0):!1},lN=(n,t={})=>({state:e,dispatch:i})=>{const r=Se(n,e.schema);return CD(r,t)(e,i)},cN=(n,t={})=>({state:e,dispatch:i})=>{const r=Se(n,e.schema);return OD(r,t)(e,i)};var uN=Object.freeze({__proto__:null,blur:JD,clearContent:GD,clearNodes:YD,command:XD,createParagraphNear:QD,deleteCurrentNode:ZD,deleteNode:tI,deleteRange:eI,deleteSelection:nI,enter:iI,exitCode:rI,extendMarkRange:oI,first:aI,focus:lI,forEach:cI,insertContent:uI,insertContentAt:dI,joinUp:pI,joinDown:gI,joinBackward:mI,joinForward:bI,keyboardShortcut:xI,lift:vI,liftEmptyBlock:wI,liftListItem:SI,newlineInCode:_I,resetAttributes:kI,scrollIntoView:MI,selectAll:CI,selectNodeBackward:OI,selectNodeForward:AI,selectParentNode:TI,selectTextblockEnd:EI,selectTextblockStart:$I,setContent:PI,setMark:qI,setMeta:KI,setNode:JI,setNodeSelection:GI,setTextSelection:YI,sinkListItem:XI,splitBlock:QI,splitListItem:ZI,toggleList:tN,toggleMark:eN,toggleNode:nN,toggleWrap:iN,undoInputRule:rN,unsetAllMarks:sN,unsetMark:oN,updateAttributes:aN,wrapIn:lN,wrapInList:cN});const hN=nn.create({name:"commands",addCommands(){return{...uN}}}),fN=nn.create({name:"editable",addProseMirrorPlugins(){return[new He({key:new xn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),dN=nn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new He({key:new xn("focusEvents"),props:{handleDOMEvents:{focus:(t,e)=>{n.isFocused=!0;const i=n.state.tr.setMeta("focus",{event:e}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,e)=>{n.isFocused=!1;const i=n.state.tr.setMeta("blur",{event:e}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),pN=nn.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:h}=l,{pos:f,parent:d}=h,p=$t.atStart(c).from===f;return!u||!p||!d.type.isTextblock||d.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...i},s={...i,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return fh()||kb()?s:r},addProseMirrorPlugins(){return[new He({key:new xn("clearDocument"),appendTransaction:(n,t,e)=>{if(!(n.some(p=>p.docChanged)&&!t.doc.eq(e.doc)))return;const{empty:r,from:s,to:o}=t.selection,a=$t.atStart(t.doc).from,l=$t.atEnd(t.doc).to,c=s===a&&o===l,u=e.doc.textBetween(0,e.doc.content.size," "," ").length===0;if(r||!c||!u)return;const h=e.tr,f=al({state:e,transaction:h}),{commands:d}=new ll({editor:this.editor,state:f});if(d.clearNodes(),!!h.steps.length)return h}})]}}),gN=nn.create({name:"tabindex",addProseMirrorPlugins(){return[new He({key:new xn("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var mN=Object.freeze({__proto__:null,ClipboardTextSerializer:KD,Commands:hN,Editable:fN,FocusEvents:dN,Keymap:pN,Tabindex:gN});const bN=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function yN(n,t){const e=document.querySelector("style[data-tiptap-style]");if(e!==null)return e;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class xN extends DD{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=yN(bN,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const i=xb(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:i});this.view.updateState(r)}unregisterPlugin(t){if(this.isDestroyed)return;const e=typeof t=="string"?`${t}$`:t.key,i=this.state.reconfigure({plugins:this.state.plugins.filter(r=>!r.key.startsWith(e))});this.view.updateState(i)}createExtensionManager(){const e=[...this.options.enableCoreExtensions?Object.values(mN):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new vr(e,this)}createCommandManager(){this.commandManager=new ll({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=Mb(this.options.content,this.schema,this.options.parseOptions),e=_b(t,this.options.autofocus);this.view=new XP(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:yr.create({doc:t,selection:e||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const e=this.state.apply(t),i=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),i&&this.emit("selectionUpdate",{editor:this,transaction:t});const r=t.getMeta("focus"),s=t.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:t}),s&&this.emit("blur",{editor:this,event:s.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return Cb(this.state,t)}isActive(t,e){const i=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return VI(this.state,i,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return RI(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:i={}}=t||{};return zI(this.state.doc,{blockSeparator:e,textSerializers:{...wb(this.schema),...i}})}get isEmpty(){return WI(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}}function jr(n){return new ul({find:n.find,handler:({state:t,range:e,match:i})=>{const r=Et(n.getAttributes,void 0,i);if(r===!1||r===null)return null;const{tr:s}=t,o=i[i.length-1],a=i[0];let l=e.to;if(o){const c=a.search(/\S/),u=e.from+a.indexOf(o),h=u+o.length;if(fa(e.from,e.to,t.doc).filter(d=>d.mark.type.excluded.find(m=>m===n.type&&m!==d.mark.type)).filter(d=>d.to>u).length)return null;h<e.to&&s.delete(h,e.to),u>e.from&&s.delete(e.from+c,u),l=e.from+c+o.length,s.addMark(e.from+c,l,n.type.create(r||{})),s.removeStoredMark(n.type)}}})}function Ob(n){return new ul({find:n.find,handler:({state:t,range:e,match:i})=>{const r=Et(n.getAttributes,void 0,i)||{},{tr:s}=t,o=e.from;let a=e.to;if(i[1]){const l=i[0].lastIndexOf(i[1]);let c=o+l;c>a?c=a:a=c+i[1].length;const u=i[0][i[0].length-1];s.insertText(u,o+i[0].length-1),s.replaceWith(c,a,n.type.create(r))}else i[0]&&s.replaceWith(o,a,n.type.create(r))}})}function lu(n){return new ul({find:n.find,handler:({state:t,range:e,match:i})=>{const r=t.doc.resolve(e.from),s=Et(n.getAttributes,void 0,i)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),n.type))return null;t.tr.delete(e.from,e.to).setBlockType(e.from,e.from,n.type,s)}})}function js(n){return new ul({find:n.find,handler:({state:t,range:e,match:i,chain:r})=>{const s=Et(n.getAttributes,void 0,i)||{},o=t.tr.delete(e.from,e.to),l=o.doc.resolve(e.from).blockRange(),c=l&&Qu(l,n.type,s);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:h,storedMarks:f}=t,{splittableMarks:d}=n.editor.extensionManager,p=f||h.$to.parentOffset&&h.$from.marks();if(p){const m=p.filter(v=>d.includes(v.type.name));o.ensureMarks(m)}}if(n.keepAttributes){const h=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";r().updateAttributes(h,s).run()}const u=o.doc.resolve(e.from-1).nodeBefore;u&&u.type===n.type&&Mi(o.doc,e.from-1)&&(!n.joinPredicate||n.joinPredicate(i,u))&&o.join(e.from-1)}})}class cn{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Et(gt(this,"addOptions",{name:this.name}))),this.storage=Et(gt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new cn(t)}configure(t={}){const e=this.extend();return e.options=hl(this.options,t),e.storage=Et(gt(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new cn(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Et(gt(e,"addOptions",{name:e.name})),e.storage=Et(gt(e,"addStorage",{name:e.name,options:e.options})),e}static handleExit({editor:t,mark:e}){const{tr:i}=t.state,r=t.state.selection.$from;if(r.pos===r.end()){const o=r.marks();if(!!!o.find(c=>c?.type.name===e.name))return!1;const l=o.find(c=>c?.type.name===e.name);return l&&i.removeStoredMark(l),i.insertText(" ",r.pos),t.view.dispatch(i),!0}return!1}}let Xe=class cu{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Et(gt(this,"addOptions",{name:this.name}))),this.storage=Et(gt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new cu(t)}configure(t={}){const e=this.extend();return e.options=hl(this.options,t),e.storage=Et(gt(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new cu(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Et(gt(e,"addOptions",{name:e.name})),e.storage=Et(gt(e,"addStorage",{name:e.name,options:e.options})),e}};function ir(n){return new jD({find:n.find,handler:({state:t,range:e,match:i})=>{const r=Et(n.getAttributes,void 0,i);if(r===!1||r===null)return null;const{tr:s}=t,o=i[i.length-1],a=i[0];let l=e.to;if(o){const c=a.search(/\S/),u=e.from+a.indexOf(o),h=u+o.length;if(fa(e.from,e.to,t.doc).filter(d=>d.mark.type.excluded.find(m=>m===n.type&&m!==d.mark.type)).filter(d=>d.to>u).length)return null;h<e.to&&s.delete(h,e.to),u>e.from&&s.delete(e.from+c,u),l=e.from+c+o.length,s.addMark(e.from+c,l,n.type.create(r||{})),s.removeStoredMark(n.type)}}})}const vN="aaa1rp3barth4b0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re2s2c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y0eats7k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking0channel11l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t0isalat7u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0at2delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d0network8tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0eles2s3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster5ia3d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0cys3drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7serati6ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic3tual5v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rthwesternmutual14on4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cher3ks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w0time7i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0channel7ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u0elos6wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",wN="1213426321653223333353565455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Hr=(n,t)=>{for(const e in t)n[e]=t[e];return n},uu="numeric",hu="ascii",fu="alpha",Io="asciinumeric",po="alphanumeric",du="domain",Ab="emoji",SN="scheme",_N="slashscheme",ap="whitespace";function kN(n,t){return n in t||(t[n]=[]),t[n]}function Vi(n,t,e){t[uu]&&(t[Io]=!0,t[po]=!0),t[hu]&&(t[Io]=!0,t[fu]=!0),t[Io]&&(t[po]=!0),t[fu]&&(t[po]=!0),t[po]&&(t[du]=!0),t[Ab]&&(t[du]=!0);for(const i in t){const r=kN(i,e);r.indexOf(n)<0&&r.push(n)}}function MN(n,t){const e={};for(const i in t)t[i].indexOf(n)>=0&&(e[i]=!0);return e}function We(n){n===void 0&&(n=null),this.j={},this.jr=[],this.jd=null,this.t=n}We.groups={};We.prototype={accepts(){return!!this.t},go(n){const t=this,e=t.j[n];if(e)return e;for(let i=0;i<t.jr.length;i++){const r=t.jr[i][0],s=t.jr[i][1];if(s&&r.test(n))return s}return t.jd},has(n,t){return t===void 0&&(t=!1),t?n in this.j:!!this.go(n)},ta(n,t,e,i){for(let r=0;r<n.length;r++)this.tt(n[r],t,e,i)},tr(n,t,e,i){i=i||We.groups;let r;return t&&t.j?r=t:(r=new We(t),e&&i&&Vi(t,e,i)),this.jr.push([n,r]),r},ts(n,t,e,i){let r=this;const s=n.length;if(!s)return r;for(let o=0;o<s-1;o++)r=r.tt(n[o]);return r.tt(n[s-1],t,e,i)},tt(n,t,e,i){i=i||We.groups;const r=this;if(t&&t.j)return r.j[n]=t,t;const s=t;let o,a=r.go(n);if(a?(o=new We,Hr(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new We,s){if(i)if(o.t&&typeof o.t=="string"){const l=Hr(MN(o.t,i),e);Vi(s,l,i)}else e&&Vi(s,e,i);o.t=s}return r.j[n]=o,o}};const vt=(n,t,e,i,r)=>n.ta(t,e,i,r),rn=(n,t,e,i,r)=>n.tr(t,e,i,r),lp=(n,t,e,i,r)=>n.ts(t,e,i,r),it=(n,t,e,i,r)=>n.tt(t,e,i,r),Rn="WORD",pu="UWORD",Hs="LOCALHOST",gu="TLD",mu="UTLD",No="SCHEME",mr="SLASH_SCHEME",ph="NUM",Tb="WS",gh="NL",wr="OPENBRACE",Cs="OPENBRACKET",Os="OPENANGLEBRACKET",As="OPENPAREN",Bi="CLOSEBRACE",Sr="CLOSEBRACKET",_r="CLOSEANGLEBRACKET",Fi="CLOSEPAREN",da="AMPERSAND",pa="APOSTROPHE",ga="ASTERISK",Qn="AT",ma="BACKSLASH",ba="BACKTICK",ya="CARET",ei="COLON",mh="COMMA",xa="DOLLAR",vn="DOT",va="EQUALS",bh="EXCLAMATION",wn="HYPHEN",wa="PERCENT",Sa="PIPE",_a="PLUS",ka="POUND",Ma="QUERY",yh="QUOTE",xh="SEMI",Sn="SLASH",Ts="TILDE",Ca="UNDERSCORE",Eb="EMOJI",Oa="SYM";var $b=Object.freeze({__proto__:null,WORD:Rn,UWORD:pu,LOCALHOST:Hs,TLD:gu,UTLD:mu,SCHEME:No,SLASH_SCHEME:mr,NUM:ph,WS:Tb,NL:gh,OPENBRACE:wr,OPENBRACKET:Cs,OPENANGLEBRACKET:Os,OPENPAREN:As,CLOSEBRACE:Bi,CLOSEBRACKET:Sr,CLOSEANGLEBRACKET:_r,CLOSEPAREN:Fi,AMPERSAND:da,APOSTROPHE:pa,ASTERISK:ga,AT:Qn,BACKSLASH:ma,BACKTICK:ba,CARET:ya,COLON:ei,COMMA:mh,DOLLAR:xa,DOT:vn,EQUALS:va,EXCLAMATION:bh,HYPHEN:wn,PERCENT:wa,PIPE:Sa,PLUS:_a,POUND:ka,QUERY:Ma,QUOTE:yh,SEMI:xh,SLASH:Sn,TILDE:Ts,UNDERSCORE:Ca,EMOJI:Eb,SYM:Oa});const fr=/[a-z]/,lc=/\p{L}/u,cc=/\p{Emoji}/u,uc=/\d/,cp=/\s/,up=`
`,CN="",ON="";let go=null,mo=null;function AN(n){n===void 0&&(n=[]);const t={};We.groups=t;const e=new We;go==null&&(go=hp(vN)),mo==null&&(mo=hp(wN)),it(e,"'",pa),it(e,"{",wr),it(e,"[",Cs),it(e,"<",Os),it(e,"(",As),it(e,"}",Bi),it(e,"]",Sr),it(e,">",_r),it(e,")",Fi),it(e,"&",da),it(e,"*",ga),it(e,"@",Qn),it(e,"`",ba),it(e,"^",ya),it(e,":",ei),it(e,",",mh),it(e,"$",xa),it(e,".",vn),it(e,"=",va),it(e,"!",bh),it(e,"-",wn),it(e,"%",wa),it(e,"|",Sa),it(e,"+",_a),it(e,"#",ka),it(e,"?",Ma),it(e,'"',yh),it(e,"/",Sn),it(e,";",xh),it(e,"~",Ts),it(e,"_",Ca),it(e,"\\",ma);const i=rn(e,uc,ph,{[uu]:!0});rn(i,uc,i);const r=rn(e,fr,Rn,{[hu]:!0});rn(r,fr,r);const s=rn(e,lc,pu,{[fu]:!0});rn(s,fr),rn(s,lc,s);const o=rn(e,cp,Tb,{[ap]:!0});it(e,up,gh,{[ap]:!0}),it(o,up),rn(o,cp,o);const a=rn(e,cc,Eb,{[Ab]:!0});rn(a,cc,a),it(a,CN,a);const l=it(a,ON);rn(l,cc,a);const c=[[fr,r]],u=[[fr,null],[lc,s]];for(let h=0;h<go.length;h++)Yn(e,go[h],gu,Rn,c);for(let h=0;h<mo.length;h++)Yn(e,mo[h],mu,pu,u);Vi(gu,{tld:!0,ascii:!0},t),Vi(mu,{utld:!0,alpha:!0},t),Yn(e,"file",No,Rn,c),Yn(e,"mailto",No,Rn,c),Yn(e,"http",mr,Rn,c),Yn(e,"https",mr,Rn,c),Yn(e,"ftp",mr,Rn,c),Yn(e,"ftps",mr,Rn,c),Vi(No,{scheme:!0,ascii:!0},t),Vi(mr,{slashscheme:!0,ascii:!0},t),n=n.sort((h,f)=>h[0]>f[0]?1:-1);for(let h=0;h<n.length;h++){const f=n[h][0],p=n[h][1]?{[SN]:!0}:{[_N]:!0};f.indexOf("-")>=0?p[du]=!0:fr.test(f)?uc.test(f)?p[Io]=!0:p[hu]=!0:p[uu]=!0,lp(e,f,f,p)}return lp(e,"localhost",Hs,{ascii:!0}),e.jd=new We(Oa),{start:e,tokens:Hr({groups:t},$b)}}function TN(n,t){const e=EN(t.replace(/[A-Z]/g,a=>a.toLowerCase())),i=e.length,r=[];let s=0,o=0;for(;o<i;){let a=n,l=null,c=0,u=null,h=-1,f=-1;for(;o<i&&(l=a.go(e[o]));)a=l,a.accepts()?(h=0,f=0,u=a):h>=0&&(h+=e[o].length,f++),c+=e[o].length,s+=e[o].length,o++;s-=h,o-=f,c-=h,r.push({t:u.t,v:t.slice(s-c,s),s:s-c,e:s})}return r}function EN(n){const t=[],e=n.length;let i=0;for(;i<e;){let r=n.charCodeAt(i),s,o=r<55296||r>56319||i+1===e||(s=n.charCodeAt(i+1))<56320||s>57343?n[i]:n.slice(i,i+2);t.push(o),i+=o.length}return t}function Yn(n,t,e,i,r){let s;const o=t.length;for(let a=0;a<o-1;a++){const l=t[a];n.j[l]?s=n.j[l]:(s=new We(i),s.jr=r.slice(),n.j[l]=s),n=s}return s=new We(e),s.jr=r.slice(),n.j[t[o-1]]=s,s}function hp(n){const t=[],e=[];let i=0,r="0123456789";for(;i<n.length;){let s=0;for(;r.indexOf(n[i+s])>=0;)s++;if(s>0){t.push(e.join(""));for(let o=parseInt(n.substring(i,i+s),10);o>0;o--)e.pop();i+=s}else e.push(n[i]),i++}return t}const Vs={defaultProtocol:"http",events:null,format:fp,formatHref:fp,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function vh(n,t){t===void 0&&(t=null);let e=Hr({},Vs);n&&(e=Hr(e,n instanceof vh?n.o:n));const i=e.ignoreTags,r=[];for(let s=0;s<i.length;s++)r.push(i[s].toUpperCase());this.o=e,t&&(this.defaultRender=t),this.ignoreTags=r}vh.prototype={o:Vs,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,t,e){const i=t!=null;let r=this.o[n];return r&&(typeof r=="object"?(r=e.t in r?r[e.t]:Vs[n],typeof r=="function"&&i&&(r=r(t,e))):typeof r=="function"&&i&&(r=r(t,e.t,e)),r)},getObj(n,t,e){let i=this.o[n];return typeof i=="function"&&t!=null&&(i=i(t,e.t,e)),i},render(n){const t=n.render(this);return(this.get("render",null,n)||this.defaultRender)(t,n.t,n)}};function fp(n){return n}function Pb(n,t){this.t="token",this.v=n,this.tk=t}Pb.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const t=this.toString(),e=n.get("truncate",t,this),i=n.get("format",t,this);return e&&i.length>e?i.substring(0,e)+"":i},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n){return n===void 0&&(n=Vs.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const t=this,e=this.toHref(n.get("defaultProtocol")),i=n.get("formatHref",e,this),r=n.get("tagName",e,t),s=this.toFormattedString(n),o={},a=n.get("className",e,t),l=n.get("target",e,t),c=n.get("rel",e,t),u=n.getObj("attributes",e,t),h=n.getObj("events",e,t);return o.href=i,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Hr(o,u),{tagName:r,attributes:o,content:s,eventListeners:h}}};function pl(n,t){class e extends Pb{constructor(r,s){super(r,s),this.t=n}}for(const i in t)e.prototype[i]=t[i];return e.t=n,e}const dp=pl("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),pp=pl("text"),$N=pl("nl"),Ei=pl("url",{isLink:!0,toHref(n){return n===void 0&&(n=Vs.defaultProtocol),this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Hs&&n[1].t===ei}}),ye=n=>new We(n);function PN(n){let{groups:t}=n;const e=t.domain.concat([da,ga,Qn,ma,ba,ya,xa,va,wn,ph,wa,Sa,_a,ka,Sn,Oa,Ts,Ca]),i=[pa,_r,Bi,Sr,Fi,ei,mh,vn,bh,Os,wr,Cs,As,Ma,yh,xh],r=[da,pa,ga,ma,ba,ya,Bi,xa,va,wn,wr,wa,Sa,_a,ka,Ma,Sn,Oa,Ts,Ca],s=ye(),o=it(s,Ts);vt(o,r,o),vt(o,t.domain,o);const a=ye(),l=ye(),c=ye();vt(s,t.domain,a),vt(s,t.scheme,l),vt(s,t.slashscheme,c),vt(a,r,o),vt(a,t.domain,a);const u=it(a,Qn);it(o,Qn,u),it(l,Qn,u),it(c,Qn,u);const h=it(o,vn);vt(h,r,o),vt(h,t.domain,o);const f=ye();vt(u,t.domain,f),vt(f,t.domain,f);const d=it(f,vn);vt(d,t.domain,f);const p=ye(dp);vt(d,t.tld,p),vt(d,t.utld,p),it(u,Hs,p);const m=it(f,wn);vt(m,t.domain,f),vt(p,t.domain,f),it(p,vn,d),it(p,wn,m);const v=it(p,ei);vt(v,t.numeric,dp);const C=it(a,wn),E=it(a,vn);vt(C,t.domain,a),vt(E,r,o),vt(E,t.domain,a);const F=ye(Ei);vt(E,t.tld,F),vt(E,t.utld,F),vt(F,t.domain,a),vt(F,r,o),it(F,vn,E),it(F,wn,C),it(F,Qn,u);const q=it(F,ei),j=ye(Ei);vt(q,t.numeric,j);const A=ye(Ei),R=ye();vt(A,e,A),vt(A,i,R),vt(R,e,A),vt(R,i,R),it(F,Sn,A),it(j,Sn,A);const L=it(l,ei),rt=it(c,ei),pt=it(rt,Sn),ut=it(pt,Sn);vt(l,t.domain,a),it(l,vn,E),it(l,wn,C),vt(c,t.domain,a),it(c,vn,E),it(c,wn,C),vt(L,t.domain,A),it(L,Sn,A),vt(ut,t.domain,A),vt(ut,e,A),it(ut,Sn,A);const kt=it(A,wr),Dt=it(A,Cs),U=it(A,Os),V=it(A,As);it(R,wr,kt),it(R,Cs,Dt),it(R,Os,U),it(R,As,V),it(kt,Bi,A),it(Dt,Sr,A),it(U,_r,A),it(V,Fi,A),it(kt,Bi,A);const W=ye(Ei),H=ye(Ei),z=ye(Ei),G=ye(Ei);vt(kt,e,W),vt(Dt,e,H),vt(U,e,z),vt(V,e,G);const st=ye(),Z=ye(),ct=ye(),Nt=ye();return vt(kt,i),vt(Dt,i),vt(U,i),vt(V,i),vt(W,e,W),vt(H,e,H),vt(z,e,z),vt(G,e,G),vt(W,i,W),vt(H,i,H),vt(z,i,z),vt(G,i,G),vt(st,e,st),vt(Z,e,H),vt(ct,e,z),vt(Nt,e,G),vt(st,i,st),vt(Z,i,Z),vt(ct,i,ct),vt(Nt,i,Nt),it(H,Sr,A),it(z,_r,A),it(G,Fi,A),it(W,Bi,A),it(Z,Sr,A),it(ct,_r,A),it(Nt,Fi,A),it(st,Fi,A),it(s,Hs,F),it(s,gh,$N),{start:s,tokens:$b}}function DN(n,t,e){let i=e.length,r=0,s=[],o=[];for(;r<i;){let a=n,l=null,c=null,u=0,h=null,f=-1;for(;r<i&&!(l=a.go(e[r].t));)o.push(e[r++]);for(;r<i&&(c=l||a.go(e[r].t));)l=null,a=c,a.accepts()?(f=0,h=a):f>=0&&f++,r++,u++;if(f<0)r-=u,r<i&&(o.push(e[r]),r++);else{o.length>0&&(s.push(hc(pp,t,o)),o=[]),r-=f,u-=f;const d=h.t,p=e.slice(r-u,r);s.push(hc(d,t,p))}}return o.length>0&&s.push(hc(pp,t,o)),s}function hc(n,t,e){const i=e[0].s,r=e[e.length-1].e,s=t.slice(i,r);return new n(s,e)}const IN=typeof console<"u"&&console&&console.warn||(()=>{}),NN="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",re={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function LN(){We.groups={},re.scanner=null,re.parser=null,re.tokenQueue=[],re.pluginQueue=[],re.customSchemes=[],re.initialized=!1}function gp(n,t){if(t===void 0&&(t=!1),re.initialized&&IN(`linkifyjs: already initialized - will not register custom scheme "${n}" ${NN}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
 1. Must only contain digits, lowercase ASCII letters or "-"
 2. Cannot start or end with "-"
 3. "-" cannot repeat`);re.customSchemes.push([n,t])}function RN(){re.scanner=AN(re.customSchemes);for(let n=0;n<re.tokenQueue.length;n++)re.tokenQueue[n][1]({scanner:re.scanner});re.parser=PN(re.scanner.tokens);for(let n=0;n<re.pluginQueue.length;n++)re.pluginQueue[n][1]({scanner:re.scanner,parser:re.parser});re.initialized=!0}function Db(n){return re.initialized||RN(),DN(re.parser.start,n,TN(re.scanner.start,n))}function wh(n,t,e){if(t===void 0&&(t=null),e===void 0&&(e=null),t&&typeof t=="object"){if(e)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);e=t,t=null}const i=new vh(e),r=Db(n),s=[];for(let o=0;o<r.length;o++){const a=r[o];a.isLink&&(!t||a.t===t)&&s.push(a.toFormattedObject(i))}return s}function mp(n,t){t===void 0&&(t=null);const e=Db(n);return e.length===1&&e[0].isLink&&(!t||e[0].t===t)}function zN(n){return new He({key:new xn("autolink"),appendTransaction:(t,e,i)=>{const r=t.some(u=>u.docChanged)&&!e.doc.eq(i.doc),s=t.some(u=>u.getMeta("preventAutolink"));if(!r||s)return;const{tr:o}=i,a=DI(e.doc,[...t]),{mapping:l}=a;if(HI(a).forEach(({oldRange:u,newRange:h})=>{fa(u.from,u.to,e.doc).filter(m=>m.mark.type===n.type).forEach(m=>{const v=l.map(m.from),C=l.map(m.to),E=fa(v,C,i.doc).filter(L=>L.mark.type===n.type);if(!E.length)return;const F=E[0],q=e.doc.textBetween(m.from,m.to,void 0," "),j=i.doc.textBetween(F.from,F.to,void 0," "),A=mp(q),R=mp(j);A&&!R&&o.removeMark(F.from,F.to,n.type)});const f=NI(i.doc,h,m=>m.isTextblock);let d,p;if(f.length>1?(d=f[0],p=i.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):f.length&&i.doc.textBetween(h.from,h.to," "," ").endsWith(" ")&&(d=f[0],p=i.doc.textBetween(d.pos,h.to,void 0," ")),d&&p){const m=p.split(" ").filter(E=>E!=="");if(m.length<=0)return!1;const v=m[m.length-1],C=d.pos+p.lastIndexOf(v);if(!v)return!1;wh(v).filter(E=>E.isLink).filter(E=>n.validate?n.validate(E.value):!0).map(E=>({...E,from:C+E.start+1,to:C+E.end+1})).forEach(E=>{o.addMark(E.from,E.to,n.type.create({href:E.href}))})}}),!!o.steps.length)return o}})}function BN(n){return new He({key:new xn("handleClickLink"),props:{handleClick:(t,e,i)=>{var r,s,o;const a=Cb(t.state,n.type.name),l=(r=i.target)===null||r===void 0?void 0:r.closest("a"),c=(s=l?.href)!==null&&s!==void 0?s:a.href,u=(o=l?.target)!==null&&o!==void 0?o:a.target;return l&&c?(window.open(c,u),!0):!1}}})}function FN(n){return new He({key:new xn("handlePasteLink"),props:{handlePaste:(t,e,i)=>{const{state:r}=t,{selection:s}=r,{empty:o}=s;if(o)return!1;let a="";i.content.forEach(c=>{a+=c.textContent});const l=wh(a).find(c=>c.isLink&&c.value===a);return!a||!l?!1:(n.editor.commands.setMark(n.type,{href:l.href}),!0)}}})}const jN=cn.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(n=>{if(typeof n=="string"){gp(n);return}gp(n.scheme,n.optionalSlashes)})},onDestroy(){LN()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:n}){return["a",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setLink:n=>({chain:t})=>t().setMark(this.name,n).setMeta("preventAutolink",!0).run(),toggleLink:n=>({chain:t})=>t().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ir({find:n=>wh(n).filter(t=>this.options.validate?this.options.validate(t.value):!0).filter(t=>t.isLink).map(t=>({text:t.value,index:t.start,data:t})),type:this.type,getAttributes:n=>{var t;return{href:(t=n.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){const n=[];return this.options.autolink&&n.push(zN({type:this.type,validate:this.options.validate})),this.options.openOnClick&&n.push(BN({type:this.type})),this.options.linkOnPaste&&n.push(FN({editor:this.editor,type:this.type})),n}}),HN=cn.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),VN=/^\s*>\s$/,WN=Xe.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[js({find:VN,type:this.type})]}}),UN=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,qN=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,KN=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,JN=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,GN=cn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[jr({find:UN,type:this.type}),jr({find:KN,type:this.type})]},addPasteRules(){return[ir({find:qN,type:this.type}),ir({find:JN,type:this.type})]}}),YN=Xe.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",ce(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),bp=cn.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:t})=>{const e=dl(n,this.type);return Object.entries(e).some(([,r])=>!!r)?!0:t.unsetMark(this.name)}}}}),yp=/^\s*([-+*])\s$/,XN=Xe.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(YN.name,this.editor.getAttributes(bp.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=js({find:yp,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=js({find:yp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(bp.name),editor:this.editor})),[n]}}),QN=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,ZN=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,tL=cn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[jr({find:QN,type:this.type})]},addPasteRules(){return[ir({find:ZN,type:this.type})]}}),eL=/^```([a-z]+)?[\s\n]$/,nL=/^~~~([a-z]+)?[\s\n]$/,iL=Xe.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:n=>{var t;const{languageClassPrefix:e}=this.options,s=[...((t=n.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(o=>o.startsWith(e)).map(o=>o.replace(e,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:t}){return["pre",ce(this.options.HTMLAttributes,t),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:t})=>t.setNode(this.name,n),toggleCodeBlock:n=>({commands:t})=>t.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:t}=this.editor.state.selection,e=t.pos===1;return!n||t.parent.type.name!==this.name?!1:e||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=n,{selection:e}=t,{$from:i,empty:r}=e;if(!r||i.parent.type!==this.type)return!1;const s=i.parentOffset===i.parent.nodeSize-2,o=i.parent.textContent.endsWith(`

`);return!s||!o?!1:n.chain().command(({tr:a})=>(a.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=n,{selection:e,doc:i}=t,{$from:r,empty:s}=e;if(!s||r.parent.type!==this.type||!(r.parentOffset===r.parent.nodeSize-2))return!1;const a=r.after();return a===void 0||i.nodeAt(a)?!1:n.commands.exitCode()}}},addInputRules(){return[lu({find:eL,type:this.type,getAttributes:n=>({language:n[1]})}),lu({find:nL,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new He({key:new xn("codeBlockVSCodeHandler"),props:{handlePaste:(n,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const e=t.clipboardData.getData("text/plain"),i=t.clipboardData.getData("vscode-editor-data"),r=i?JSON.parse(i):void 0,s=r?.mode;if(!e||!s)return!1;const{tr:o}=n.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(Pt.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(e.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),rL=Xe.create({name:"doc",topNode:!0,content:"block+"});function sL(n={}){return new He({view(t){return new oL(t,n)}})}class oL{constructor(t,e){this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let r=s=>{this[i](s)};return t.dom.addEventListener(i,r),{name:i,handler:r}})}destroy(){this.handlers.forEach(({name:t,handler:e})=>this.editorView.dom.removeEventListener(t,e))}update(t,e){this.cursorPos!=null&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),e=!t.parent.inlineContent,i;if(e){let a=t.nodeBefore,l=t.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),h=a?u.bottom:u.top;a&&l&&(h=(h+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),i={left:u.left,right:u.right,top:h-this.width/2,bottom:h+this.width/2}}}}if(!i){let a=this.editorView.coordsAtPos(this.cursorPos);i={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let r=this.editorView.dom.offsetParent;this.element||(this.element=r.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),this.element.classList.toggle("prosemirror-dropcursor-block",e),this.element.classList.toggle("prosemirror-dropcursor-inline",!e);let s,o;if(!r||r==document.body&&getComputedStyle(r).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=r.getBoundingClientRect();s=a.left-r.scrollLeft,o=a.top-r.scrollTop}this.element.style.left=i.left-s+"px",this.element.style.top=i.top-o+"px",this.element.style.width=i.right-i.left+"px",this.element.style.height=i.bottom-i.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),i=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),r=i&&i.type.spec.disableDropCursor,s=typeof r=="function"?r(this.editorView,e,t):r;if(e&&!s){let o=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=O0(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}const aL=nn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[sL(this.options)]}});class ae extends $t{constructor(t){super(t,t)}map(t,e){let i=t.resolve(e.map(this.head));return ae.valid(i)?new ae(i):$t.near(i)}content(){return ft.empty}eq(t){return t instanceof ae&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ae(t.resolve(e.pos))}getBookmark(){return new Sh(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!lL(t)||!cL(t))return!1;let i=e.type.spec.allowGapCursor;if(i!=null)return i;let r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(t,e,i=!1){t:for(;;){if(!i&&ae.valid(t))return t;let r=t.pos,s=null;for(let o=t.depth;;o--){let a=t.node(o);if(e>0?t.indexAfter(o)<a.childCount:t.index(o)>0){s=a.child(e>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;r+=e;let l=t.doc.resolve(r);if(ae.valid(l))return l}for(;;){let o=e>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Ct.isSelectable(s)){t=t.doc.resolve(r+s.nodeSize*e),i=!1;continue t}break}s=o,r+=e;let a=t.doc.resolve(r);if(ae.valid(a))return a}return null}}}ae.prototype.visible=!1;ae.findFrom=ae.findGapCursorFrom;$t.jsonID("gapcursor",ae);class Sh{constructor(t){this.pos=t}map(t){return new Sh(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return ae.valid(e)?new ae(e):$t.near(e)}}function lL(n){for(let t=n.depth;t>=0;t--){let e=n.index(t),i=n.node(t);if(e==0){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(e-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function cL(n){for(let t=n.depth;t>=0;t--){let e=n.indexAfter(t),i=n.node(t);if(e==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(e);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function uL(){return new He({props:{decorations:pL,createSelectionBetween(n,t,e){return t.pos==e.pos&&ae.valid(e)?new ae(e):null},handleClick:fL,handleKeyDown:hL,handleDOMEvents:{beforeinput:dL}}})}const hL=fb({ArrowLeft:bo("horiz",-1),ArrowRight:bo("horiz",1),ArrowUp:bo("vert",-1),ArrowDown:bo("vert",1)});function bo(n,t){const e=n=="vert"?t>0?"down":"up":t>0?"right":"left";return function(i,r,s){let o=i.selection,a=t>0?o.$to:o.$from,l=o.empty;if(o instanceof Pt){if(!s.endOfTextblock(e)||a.depth==0)return!1;l=!1,a=i.doc.resolve(t>0?a.after():a.before())}let c=ae.findGapCursorFrom(a,t,l);return c?(r&&r(i.tr.setSelection(new ae(c))),!0):!1}}function fL(n,t,e){if(!n||!n.editable)return!1;let i=n.state.doc.resolve(t);if(!ae.valid(i))return!1;let r=n.posAtCoords({left:e.clientX,top:e.clientY});return r&&r.inside>-1&&Ct.isSelectable(n.state.doc.nodeAt(r.inside))?!1:(n.dispatch(n.state.tr.setSelection(new ae(i))),!0)}function dL(n,t){if(t.inputType!="insertCompositionText"||!(n.state.selection instanceof ae))return!1;let{$from:e}=n.state.selection,i=e.parent.contentMatchAt(e.index()).findWrapping(n.state.schema.nodes.text);if(!i)return!1;let r=et.empty;for(let o=i.length-1;o>=0;o--)r=et.from(i[o].createAndFill(null,r));let s=n.state.tr.replace(e.pos,e.pos,new ft(r,0,0));return s.setSelection(Pt.near(s.doc.resolve(e.pos+1))),n.dispatch(s),!1}function pL(n){if(!(n.selection instanceof ae))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",pe.create(n.doc,[ln.widget(n.selection.head,t,{key:"gapcursor"})])}const gL=nn.create({name:"gapCursor",addProseMirrorPlugins(){return[uL()]},extendNodeSchema(n){var t;const e={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(t=Et(gt(n,"allowGapCursor",e)))!==null&&t!==void 0?t:null}}}),mL=Xe.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",ce(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:t,state:e,editor:i})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:r,storedMarks:s}=e;if(r.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=i.extensionManager,l=s||r.$to.parentOffset&&r.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const h=l.filter(f=>a.includes(f.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),bL=Xe.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:t}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,ce(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:n=>({commands:t})=>this.options.levels.includes(n.level)?t.setNode(this.name,n):!1,toggleHeading:n=>({commands:t})=>this.options.levels.includes(n.level)?t.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,t)=>({...n,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(n=>lu({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Aa=200,Ae=function(){};Ae.prototype.append=function(t){return t.length?(t=Ae.from(t),!this.length&&t||t.length<Aa&&this.leafAppend(t)||this.length<Aa&&t.leafPrepend(this)||this.appendInner(t)):this};Ae.prototype.prepend=function(t){return t.length?Ae.from(t).append(this):this};Ae.prototype.appendInner=function(t){return new yL(this,t)};Ae.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?Ae.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};Ae.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ae.prototype.forEach=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=this.length),e<=i?this.forEachInner(t,e,i,0):this.forEachInvertedInner(t,e,i,0)};Ae.prototype.map=function(t,e,i){e===void 0&&(e=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(s,o){return r.push(t(s,o))},e,i),r};Ae.from=function(t){return t instanceof Ae?t:t&&t.length?new Ib(t):Ae.empty};var Ib=function(n){function t(i){n.call(this),this.values=i}n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(r,s){return r==0&&s==this.length?this:new t(this.values.slice(r,s))},t.prototype.getInner=function(r){return this.values[r]},t.prototype.forEachInner=function(r,s,o,a){for(var l=s;l<o;l++)if(r(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,o,a){for(var l=s-1;l>=o;l--)if(r(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(r){if(this.length+r.length<=Aa)return new t(this.values.concat(r.flatten()))},t.prototype.leafPrepend=function(r){if(this.length+r.length<=Aa)return new t(r.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t}(Ae);Ae.empty=new Ib([]);var yL=function(n){function t(e,i){n.call(this),this.left=e,this.right=i,this.length=e.length+i.length,this.depth=Math.max(e.depth,i.depth)+1}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},t.prototype.forEachInner=function(i,r,s,o){var a=this.left.length;if(r<a&&this.left.forEachInner(i,r,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(i,Math.max(r-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(i,r,s,o){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(i,r-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(i,Math.min(r,a),s,o)===!1)return!1},t.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var s=this.left.length;return r<=s?this.left.slice(i,r):i>=s?this.right.slice(i-s,r-s):this.left.slice(i,s).append(this.right.slice(0,r-s))},t.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new t(r,this.right)},t.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new t(this.left,new t(this.right,i)):new t(this,i)},t}(Ae),Nb=Ae;const xL=500;class dn{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,s;e&&(r=this.remapping(i,this.items.length),s=r.maps.length);let o=t.tr,a,l,c=[],u=[];return this.items.forEach((h,f)=>{if(!h.step){r||(r=this.remapping(i,f+1),s=r.maps.length),s--,u.push(h);return}if(r){u.push(new _n(h.map));let d=h.step.map(r.slice(s)),p;d&&o.maybeStep(d).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new _n(p,void 0,void 0,c.length+u.length))),s--,p&&r.appendMap(p,s)}else o.maybeStep(h.step);if(h.selection)return a=r?h.selection.map(r.slice(s)):h.selection,l=new dn(this.items.slice(0,i).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(t,e,i,r){let s=[],o=this.eventCount,a=this.items,l=!r&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let h=t.steps[u].invert(t.docs[u]),f=new _n(t.mapping.maps[u],h,e),d;(d=l&&l.merge(f))&&(f=d,u?s.pop():a=a.slice(0,a.length-1)),s.push(f),e&&(o++,e=void 0),r||(l=f)}let c=o-i.depth;return c>wL&&(a=vL(a,c),o-=c),new dn(a.append(s),o)}remapping(t,e){let i=new Or;return this.items.forEach((r,s)=>{let o=r.mirrorOffset!=null&&s-r.mirrorOffset>=t?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,o)},t,e),i}addMaps(t){return this.eventCount==0?this:new dn(this.items.append(t.map(e=>new _n(e))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-e),s=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},r);let l=e;this.items.forEach(f=>{let d=s.getMirror(--l);if(d==null)return;o=Math.min(o,d);let p=s.maps[d];if(f.step){let m=t.steps[d].invert(t.docs[d]),v=f.selection&&f.selection.map(s.slice(l+1,d));v&&a++,i.push(new _n(p,m,v))}else i.push(new _n(p))},r);let c=[];for(let f=e;f<o;f++)c.push(new _n(s.maps[f]));let u=this.items.slice(0,r).append(c).append(i),h=new dn(u,a);return h.emptyItemCount()>xL&&(h=h.compress(this.items.length-i.length)),h}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),i=e.maps.length,r=[],s=0;return this.items.forEach((o,a)=>{if(a>=t)r.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(e.slice(i)),c=l&&l.getMap();if(i--,c&&e.appendMap(c,i),l){let u=o.selection&&o.selection.map(e.slice(i));u&&s++;let h=new _n(c.invert(),l,u),f,d=r.length-1;(f=r.length&&r[d].merge(h))?r[d]=f:r.push(h)}}else o.map&&i--},this.items.length,0),new dn(Nb.from(r.reverse()),s)}}dn.empty=new dn(Nb.empty,0);function vL(n,t){let e;return n.forEach((i,r)=>{if(i.selection&&t--==0)return e=r,!1}),n.slice(e)}class _n{constructor(t,e,i,r){this.map=t,this.step=e,this.selection=i,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new _n(e.getMap().invert(),e,this.selection)}}}class Zn{constructor(t,e,i,r){this.done=t,this.undone=e,this.prevRanges=i,this.prevTime=r}}const wL=20;function SL(n,t,e,i){let r=e.getMeta(fi),s;if(r)return r.historyState;e.getMeta(kL)&&(n=new Zn(n.done,n.undone,null,0));let o=e.getMeta("appendedTransaction");if(e.steps.length==0)return n;if(o&&o.getMeta(fi))return o.getMeta(fi).redo?new Zn(n.done.addTransform(e,void 0,i,Lo(t)),n.undone,xp(e.mapping.maps[e.steps.length-1]),n.prevTime):new Zn(n.done,n.undone.addTransform(e,void 0,i,Lo(t)),null,n.prevTime);if(e.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.prevTime==0||!o&&(n.prevTime<(e.time||0)-i.newGroupDelay||!_L(e,n.prevRanges)),l=o?fc(n.prevRanges,e.mapping):xp(e.mapping.maps[e.steps.length-1]);return new Zn(n.done.addTransform(e,a?t.selection.getBookmark():void 0,i,Lo(t)),dn.empty,l,e.time)}else return(s=e.getMeta("rebased"))?new Zn(n.done.rebased(e,s),n.undone.rebased(e,s),fc(n.prevRanges,e.mapping),n.prevTime):new Zn(n.done.addMaps(e.mapping.maps),n.undone.addMaps(e.mapping.maps),fc(n.prevRanges,e.mapping),n.prevTime)}function _L(n,t){if(!t)return!1;if(!n.docChanged)return!0;let e=!1;return n.mapping.maps[0].forEach((i,r)=>{for(let s=0;s<t.length;s+=2)i<=t[s+1]&&r>=t[s]&&(e=!0)}),e}function xp(n){let t=[];return n.forEach((e,i,r,s)=>t.push(r,s)),t}function fc(n,t){if(!n)return null;let e=[];for(let i=0;i<n.length;i+=2){let r=t.map(n[i],1),s=t.map(n[i+1],-1);r<=s&&e.push(r,s)}return e}function Lb(n,t,e,i){let r=Lo(t),s=fi.get(t).spec.config,o=(i?n.undone:n.done).popEvent(t,r);if(!o)return;let a=o.selection.resolve(o.transform.doc),l=(i?n.done:n.undone).addTransform(o.transform,t.selection.getBookmark(),s,r),c=new Zn(i?l:o.remaining,i?o.remaining:l,null,0);e(o.transform.setSelection(a).setMeta(fi,{redo:i,historyState:c}).scrollIntoView())}let dc=!1,vp=null;function Lo(n){let t=n.plugins;if(vp!=t){dc=!1,vp=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){dc=!0;break}}return dc}const fi=new xn("history"),kL=new xn("closeHistory");function ML(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new He({key:fi,state:{init(){return new Zn(dn.empty,dn.empty,null,0)},apply(t,e,i){return SL(e,i,t,n)}},config:n,props:{handleDOMEvents:{beforeinput(t,e){let i=e.inputType,r=i=="historyUndo"?Rb:i=="historyRedo"?zb:null;return r?(e.preventDefault(),r(t.state,t.dispatch)):!1}}}})}const Rb=(n,t)=>{let e=fi.getState(n);return!e||e.done.eventCount==0?!1:(t&&Lb(e,n,t,!1),!0)},zb=(n,t)=>{let e=fi.getState(n);return!e||e.undone.eventCount==0?!1:(t&&Lb(e,n,t,!0),!0)},CL=nn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:t})=>Rb(n,t),redo:()=>({state:n,dispatch:t})=>zb(n,t)}},addProseMirrorPlugins(){return[ML(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),OL=Xe.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",ce(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n})=>n().insertContent({type:this.name}).command(({tr:t,dispatch:e})=>{var i;if(e){const{$to:r}=t.selection,s=r.end();if(r.nodeAfter)t.setSelection(Pt.create(t.doc,r.pos));else{const o=(i=r.parent.type.contentMatch.defaultType)===null||i===void 0?void 0:i.create();o&&(t.insert(s,o),t.setSelection(Pt.create(t.doc,s)))}t.scrollIntoView()}return!0}).run()}},addInputRules(){return[Ob({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),AL=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,TL=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,EL=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,$L=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,PL=cn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[jr({find:AL,type:this.type}),jr({find:EL,type:this.type})]},addPasteRules(){return[ir({find:TL,type:this.type}),ir({find:$L,type:this.type})]}}),DL=Xe.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",ce(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),IL=Xe.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",ce(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),wp=cn.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:t})=>{const e=dl(n,this.type);return Object.entries(e).some(([,r])=>!!r)?!0:t.unsetMark(this.name)}}}}),Sp=/^(\d+)\.\s$/,NL=Xe.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:t,...e}=n;return t===1?["ol",ce(this.options.HTMLAttributes,e),0]:["ol",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(IL.name,this.editor.getAttributes(wp.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=js({find:Sp,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=js({find:Sp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(wp.name),editor:this.editor})),[n]}}),LL=Xe.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),RL=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,zL=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,BL=cn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[jr({find:RL,type:this.type})]},addPasteRules(){return[ir({find:zL,type:this.type})]}}),FL=Xe.create({name:"text",group:"inline"}),jL=nn.create({name:"starterKit",addExtensions(){var n,t,e,i,r,s,o,a,l,c,u,h,f,d,p,m,v,C;const E=[];return this.options.blockquote!==!1&&E.push(WN.configure((n=this.options)===null||n===void 0?void 0:n.blockquote)),this.options.bold!==!1&&E.push(GN.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.bulletList!==!1&&E.push(XN.configure((e=this.options)===null||e===void 0?void 0:e.bulletList)),this.options.code!==!1&&E.push(tL.configure((i=this.options)===null||i===void 0?void 0:i.code)),this.options.codeBlock!==!1&&E.push(iL.configure((r=this.options)===null||r===void 0?void 0:r.codeBlock)),this.options.document!==!1&&E.push(rL.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&E.push(aL.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&E.push(gL.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&E.push(mL.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&E.push(bL.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&E.push(CL.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&E.push(OL.configure((h=this.options)===null||h===void 0?void 0:h.horizontalRule)),this.options.italic!==!1&&E.push(PL.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&E.push(DL.configure((d=this.options)===null||d===void 0?void 0:d.listItem)),this.options.orderedList!==!1&&E.push(NL.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&E.push(LL.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&E.push(BL.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&E.push(FL.configure((C=this.options)===null||C===void 0?void 0:C.text)),E}});var HL=Pm;function VL(n,t,e){var i=n.length;return e=e===void 0?i:e,!t&&e>=i?n:HL(n,t,e)}var WL=VL,UL="\\ud800-\\udfff",qL="\\u0300-\\u036f",KL="\\ufe20-\\ufe2f",JL="\\u20d0-\\u20ff",GL=qL+KL+JL,YL="\\ufe0e\\ufe0f",XL="\\u200d",QL=RegExp("["+XL+UL+GL+YL+"]");function ZL(n){return QL.test(n)}var Bb=ZL;function tR(n){return n.split("")}var eR=tR,Fb="\\ud800-\\udfff",nR="\\u0300-\\u036f",iR="\\ufe20-\\ufe2f",rR="\\u20d0-\\u20ff",sR=nR+iR+rR,oR="\\ufe0e\\ufe0f",aR="["+Fb+"]",bu="["+sR+"]",yu="\\ud83c[\\udffb-\\udfff]",lR="(?:"+bu+"|"+yu+")",jb="[^"+Fb+"]",Hb="(?:\\ud83c[\\udde6-\\uddff]){2}",Vb="[\\ud800-\\udbff][\\udc00-\\udfff]",cR="\\u200d",Wb=lR+"?",Ub="["+oR+"]?",uR="(?:"+cR+"(?:"+[jb,Hb,Vb].join("|")+")"+Ub+Wb+")*",hR=Ub+Wb+uR,fR="(?:"+[jb+bu+"?",bu,Hb,Vb,aR].join("|")+")",dR=RegExp(yu+"(?="+yu+")|"+fR+hR,"g");function pR(n){return n.match(dR)||[]}var gR=pR,mR=eR,bR=Bb,yR=gR;function xR(n){return bR(n)?yR(n):mR(n)}var vR=xR,wR=WL,SR=Bb,_R=vR,kR=Uu;function MR(n){return function(t){t=kR(t);var e=SR(t)?_R(t):void 0,i=e?e[0]:t.charAt(0),r=e?wR(e,1).join(""):t.slice(1);return i[n]()+r}}var CR=MR,OR=CR,AR=OR("toUpperCase"),TR=AR,ER=Uu,$R=TR;function PR(n){return $R(ER(n).toLowerCase())}var qb=PR;const DR=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,IR=Xe.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",ce(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:t})=>t.insertContent({type:this.name,attrs:n})}},addInputRules(){return[Ob({find:DR,type:this.type,getAttributes:n=>{const[,,t,e,i]=n;return{src:e,alt:t,title:i}}})]}}),NR=St("<span></span>",2),LR=St("<li></li>",2),RR=St('<input type="url">',1),zR=St("<article><footer><nav><ul><li></li></ul><ul><li></li></ul></nav></footer></article>",14),BR=St("<ul><li></li><li></li></ul>",6),FR=St("<ul><li></li></ul>",4),jR=St('<article class="rich-editor"><header><nav><ul></ul><ul></ul><ul></ul><ul></ul></nav></header><footer><nav><ul><li></li></ul><ul><li></li><li></li></ul><ul><li></li></ul></nav></footer></article>',32),HR=n=>{const t=n.children,e=new xN({element:NR.cloneNode(!0),content:t,extensions:[jL,HN,jN.configure({openOnClick:!1}),IR.configure({allowBase64:!0})]}),i=o=>{const a=()=>e.isActive(o.name,o.attributes),[l,c]=ee(a());e.on("transaction",()=>c(a()));const u=`${qb(o.name[0])}${o.name.slice(1)}`,h=`toggle${u}`,f=`set${u}`;return(()=>{const d=LR.cloneNode(!0);return J(d,I(Lt,{get icon(){return o.icon},action:()=>{(e.commands[h]??e.commands[f])(o.attributes),e.commands.focus()},get class(){return l()?void 0:"outline"}})),d})()},r=o=>{const a=(()=>{const u=RR.cloneNode(!0);return u.$$keydown=({key:h})=>{switch(h){case"Escape":l();break;case"Enter":c();break}},Oe(()=>u.value=o.href),u})();function l(){oe.back()}function c(){e.commands.setLink({href:a.value,target:"_blank"}),l(),e.commands.focus()}return(()=>{const u=zR.cloneNode(!0),h=u.firstChild,f=h.firstChild,d=f.firstChild,p=d.firstChild,m=d.nextSibling,v=m.firstChild;return J(u,a,h),J(p,I(Lt,{icon:"close",action:l})),J(v,I(Lt,{icon:"done",action:c})),u})()},s=()=>{const[o,a]=ee(e.getAttributes("link")?.href??"");return e.on("transaction",()=>a(e.getAttributes("link")?.href??"")),()=>I(Kr,{get children(){return[I(Je,{get when(){return o()},get children(){const l=BR.cloneNode(!0),c=l.firstChild,u=c.nextSibling;return J(c,I(Lt,{icon:"link",action:()=>oe.push(()=>I(r,{get href(){return o()}}))})),J(u,I(Lt,{icon:"link_off",action:()=>e.commands.unsetLink(),class:"outline"})),l}}),I(Je,{when:!0,get children(){const l=FR.cloneNode(!0),c=l.firstChild;return J(c,I(Lt,{icon:"add_link",action:()=>oe.push(()=>I(r,{get href(){return o()}})),class:"outline"})),l}})]}})};return()=>(()=>{const o=jR.cloneNode(!0),a=o.firstChild,l=a.firstChild,c=l.firstChild,u=c.nextSibling,h=u.nextSibling,f=h.nextSibling,d=a.nextSibling,p=d.firstChild,m=p.firstChild,v=m.firstChild,C=m.nextSibling,E=C.firstChild,F=E.nextSibling,q=C.nextSibling,j=q.firstChild;return o.$$click=()=>e.commands.focus(),J(c,I(i,{icon:"format_h1",name:"heading",attributes:{level:1}}),null),J(c,I(i,{icon:"format_h2",name:"heading",attributes:{level:2}}),null),J(c,I(i,{icon:"format_h3",name:"heading",attributes:{level:3}}),null),J(c,I(i,{icon:"format_h4",name:"heading",attributes:{level:4}}),null),J(c,I(i,{icon:"format_h5",name:"heading",attributes:{level:5}}),null),J(c,I(i,{icon:"format_h6",name:"heading",attributes:{level:6}}),null),J(c,I(i,{icon:"code",name:"code"}),null),J(c,I(i,{icon:"format_paragraph",name:"paragraph"}),null),J(u,I(i,{icon:"format_quote",name:"blockquote"}),null),J(u,I(i,{icon:"data_object",name:"codeBlock"}),null),J(h,I(i,{icon:"format_list_numbered",name:"orderedList"}),null),J(h,I(i,{icon:"format_list_bulleted",name:"bulletList"}),null),J(l,I(s,{}),f),J(f,I(i,{icon:"format_bold",name:"bold"}),null),J(f,I(i,{icon:"format_italic",name:"italic"}),null),J(f,I(i,{icon:"format_underlined",name:"underline"}),null),J(f,I(i,{icon:"format_strikethrough",name:"strike"}),null),J(o,()=>e.options.element,d),J(v,I(Lt,{icon:"close",action:()=>oe.back()})),J(E,I(Lt,{icon:"undo",action:()=>e.commands.undo()})),J(F,I(Lt,{icon:"redo",action:()=>e.commands.redo()})),J(j,I(Lt,{icon:"done",action:()=>{n.onSave(e.getHTML()),oe.back()}})),o})()};Si(["keydown","click"]);const VR=St("<div></div>",2),WR=St('<div class="multiline-viewer"></div>',2),UR=n=>{const t=VR.cloneNode(!0);return sr(()=>{const e=$n(Mt.store,n.path)??"";n.path==="person.description"?t.innerHTML=e.replace("idkfa",`<a href='?idkfa${Ju()}' style='color: inherit'>idkfa</a>`):t.innerHTML=e}),(()=>{const e=WR.cloneNode(!0);return J(e,I(Ce,{get when(){return fe.get()==="edit"},get children(){return I(Lt,{icon:"edit_note",action:()=>oe.push(()=>I(HR,{onSave:i=>Mt.update(r=>Yu(r,n.path,i)),get children(){return $n(Mt.store,n.path)??""}}))})}}),null),J(e,t,null),e})()},Ue=n=>{const[t,e]=yn(n,["multiline"]);return I(Ce,{get when(){return t.multiline},get fallback(){return I(IE,e)},get children(){return I(UR,e)}})},_p=St("<li></li>",2),qR=St("<ul></ul>",2);function _h(n){const[t,e]=yn(n,["children","path","factory","inline"]);function i(){function r(o){Mt.update(a=>{let l=$n(a,t.path);l||(l=[],Yu(a,t.path,l)),l.push(o)})}const s=t.factory;s?oe.push(()=>I(s,{callback:r})):r(null)}return(()=>{const r=qR.cloneNode(!0);return _i(r,e,!1,!0),J(r,I(Mr,{get each(){return $n(Mt.store,n.path)},children:(s,o)=>(()=>{const a=_p.cloneNode(!0);return J(a,I(Ce,{get when(){return fe.get()==="edit"},get fallback(){return t.children(`${n.path}[${o()}]`)},get children(){return I(Qi,{get children(){return[Re(()=>t.children(`${n.path}[${o()}]`)),I(Lt,{icon:"delete",action:()=>Mt.update(l=>$n(l,t.path).splice(o(),1)),class:"outline danger"})]}})}})),a})()}),null),J(r,I(Ce,{get when(){return fe.get()==="edit"},get children(){const s=_p.cloneNode(!0);return J(s,I(Lt,{icon:"add",action:i,class:"outline"})),s}}),null),r})()}const KR=St("<button></button>",2),Kb=n=>{const[t,e]=yn(n,["action","active","name","class"]);return(()=>{const i=KR.cloneNode(!0);return _i(i,Un({get class(){return Qs("keyword",t.active?void 0:"outline",t.class)},get onClick(){return t.action}},e),!1,!0),J(i,()=>t.name),i})()};const Jb=n=>I(_h,{get path(){return n.path},class:"tags",get factory(){return n.factory},children:t=>I(Ou.Provider,{get value(){return Re(()=>!!n.readonly)()?"view":fe.get()},get children(){return[I(De,{name:"loyalty"}),I(Ue,{path:t})]}})}),JR=St("<article><header><hgroup><h1></h1><h2></h2></hgroup></header><footer><nav><ul></ul><ul><li></li></ul></nav></footer></article>",20),GR="keywords",kh=n=>{const t=`${GR}.${n.keyword}`,e=i=>`${t}.${i}`;return()=>(()=>{const i=JR.cloneNode(!0),r=i.firstChild,s=r.firstChild,o=s.firstChild,a=o.nextSibling,l=r.nextSibling,c=l.firstChild,u=c.firstChild,h=u.nextSibling,f=h.firstChild;return i.style.setProperty("width","100%"),J(o,()=>n.keyword),J(a,I(Ue,{get path(){return e("url")}})),J(i,I(Ue,{get path(){return e("description")},multiline:!0}),l),J(i,I(Jb,{get path(){return e("tags")}}),l),J(f,I(Lt,{icon:"done",action:()=>{oe.back(),n.callback&&n.callback()}})),i})()},YR=St('<article><footer><nav><ul><li></li></ul><ul><li><input type="search" placeholder="enter keyword"></li></ul><ul><li></li></ul></nav></footer></article>',19),XR=n=>{const[t,e]=ee(""),[i,r]=ee(Object.keys(Mt.store.keywords));function s(){oe.back(),Mt.update(l=>l.keywords[t()]={}),o(t()),oe.push(()=>I(kh,{get keyword(){return t()}}))}function o(l=i()[0]){n.callback(l),oe.back()}function a(){oe.back()}return()=>(()=>{const l=YR.cloneNode(!0),c=l.firstChild,u=c.firstChild,h=u.firstChild,f=h.firstChild,d=h.nextSibling,p=d.firstChild,m=p.firstChild,v=d.nextSibling,C=v.firstChild;return l.style.setProperty("width","100%"),J(l,I(i0,{nowrap:!0,get children(){return I(Mr,{get each(){return i()},children:E=>I(Kb,{action:()=>o(E),name:E,get active(){return pc(E,t())}})})}}),c),J(f,I(Lt,{icon:"close",action:a,class:"secondary outline"})),m.$$keyup=({key:E,target:F})=>{if(F instanceof HTMLInputElement){const q=F.value.toLowerCase();switch(E){case"Enter":if(t().length<3)return;pc(t(),i()[0])?o():s();return;case"Escape":a();return}r(Object.keys(Mt.store.keywords).map(j=>[j,j.toLowerCase()]).filter(([,j])=>j.startsWith(q)).sort(([,j],[,A])=>j.localeCompare(A)).map(([j])=>j)),e(F.value)}},m.autofocus=!0,J(C,I(Kr,{get fallback(){return I(Lt,{icon:"question_mark",disabled:!0,action:()=>{}})},get children(){return[I(Je,{get when(){return pc(t(),i()[0])},get children(){return I(Lt,{icon:"done",action:()=>o(i()[0])})}}),I(Je,{get when(){return t().length>2},get children(){return I(Lt,{icon:"add",action:s})}})]}})),Oe(()=>m.value=t()),l})()},pc=(n,t)=>n?.localeCompare(t??"",void 0,{sensitivity:"base"})===0;Si(["keyup"]);const QR=n=>I(_h,{class:"keyword-list",get path(){return n.path},factory:XR,children:t=>{const e=$n(Mt.store,t);return I(Kb,{action:()=>oe.push(()=>I(kh,{keyword:e})),name:e})}});const ZR=St("<section><h6></h6></section>",4),Ta=n=>{const[t,e]=yn(n,["children"]);return I(Ce,{get when(){return $n(Mt.store,n.path)?.length||fe.get()==="edit"},get children(){const i=ZR.cloneNode(!0),r=i.firstChild;return J(r,()=>qb(String(Ns(n.path.split("."))))),J(i,I(_h,Un({class:"inline"},e,{get children(){return t.children}})),null),i}})},t5=St("<footer></footer>",2),e5=St("<article><header><hgroup><h4></h4><h5></h5></hgroup></header></article>",10),n5="cv.experience",i5=n=>{const t=Mt.store.cv.experience[n.id],e=`${n5}[${[n.id]}]`,i=r=>`${e}.${r}`;return(()=>{const r=e5.cloneNode(!0),s=r.firstChild,o=s.firstChild,a=o.firstChild,l=a.nextSibling;return J(a,I(Qi,{get children(){return[I($o,{record:t}),I(Ue,{path:`${e}.title`})]}})),J(l,I(Ue,{path:`${e}.interval`})),J(r,I(Ce,{get when(){return t.type==="professional"},get children(){return[I(Ta,{get path(){return i("roles")},children:c=>I(Ue,{path:c})}),I(Ta,{get path(){return i("tasks")},children:c=>I(Ue,{path:c})})]}}),null),J(r,I(Ue,{get path(){return i("description")},multiline:!0}),null),J(r,I(Ce,{get when(){return t.keywords?.length||fe.get()==="edit"},get children(){const c=t5.cloneNode(!0);return J(c,I(QR,{get path(){return i("keywords")}})),c}}),null),Oe(()=>Xg(r,Qs(t.type,"record"))),r})()},kp=St("<h2>Experience</h2>",2),r5=St("<section></section>",2),Mp=St("<h3></h3>",2),s5=St('<section class="scope"></section>',2),gc={professional:0,education:1,hobby:2},o5={professional:"work",education:"school",hobby:"self_improvement"},Cp={professional:"Work Projects",education:"Education",hobby:"Hobbies and Interests"},a5=()=>{const[n,t]=ee({_:[]}),e=i=>{const[r,s]=i.substring(0,7).split("/");return s&&r?new Date(+s,+r-1,0,0,0,0,0).getTime():Number.MAX_SAFE_INTEGER};return sr(()=>{const i=Mt.store.cv.experience.map((r,s)=>({record:r,id:s})).filter(({record:{type:r}})=>mc(gc[r],...Mt.store.cv.profile.scope)).sort(({record:{interval:r}},{record:{interval:s}})=>e(s)-e(r));if(Mt.store.cv.profile.grouped){const r={};for(const{record:s,id:o}of i)r[s.type]?r[s.type].push(o):r[s.type]=[o];t(r)}else t({_:i.map(({id:r})=>r)})}),(()=>{const i=r5.cloneNode(!0);return J(i,I(Ce,{get when(){return fe.get()==="edit"&&!Mt.store.cv.profile.grouped},get fallback(){return kp.cloneNode(!0)},get children(){return I(Qi,{style:{width:"100%","justify-content":"space-between"},get children(){return[kp.cloneNode(!0),I(Qi,{get children(){return I(Mr,{each:["professional","education","hobby"],children:r=>I(Ce,{get when(){return mc(gc[r],...Mt.store.cv.profile.scope)},get children(){return I(Lt,{get icon(){return o5[r]},action:()=>{Mt.update(s=>s.cv.experience.push(Op(r)))},class:r})}})})}})]}})}}),null),J(i,I(Mr,{get each(){return Re(()=>!!Mt.store.cv.profile.grouped)()?["professional","education","hobby"].filter(r=>mc(gc[r],...Mt.store.cv.profile.scope)):["_"]},children:r=>(()=>{const s=s5.cloneNode(!0);return J(s,I(Ce,{get when(){return n()[r]?.length>1||fe.get()==="edit"},get children(){return[I(Ce,{get when(){return Re(()=>!!Mt.store.cv.profile.grouped)()&&fe.get()==="edit"},get fallback(){return(()=>{const o=Mp.cloneNode(!0);return J(o,()=>Cp[r]),o})()},get children(){return I(i0,{style:{width:"100%","justify-content":"space-between"},get children(){return[(()=>{const o=Mp.cloneNode(!0);return J(o,()=>Cp[r]),o})(),I(Lt,{icon:"add",action:()=>{Mt.update(o=>o.cv.experience.push(Op(r)))},class:r})]}})}}),I(Mr,{get each(){return n()[r]},children:o=>I(i5,{id:o})})]}})),s})()}),null),i})()},mc=(n,t,e)=>n>=t&&n<=e,Op=n=>{switch(n){case"education":case"hobby":return{type:n,title:"",interval:"",keywords:[]};case"professional":return{type:n,title:"",interval:"",roles:[],tasks:[],keywords:[]}}};/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function to(n){return n+.5|0}const si=(n,t,e)=>Math.max(Math.min(n,e),t);function ys(n){return si(to(n*2.55),0,255)}function di(n){return si(to(n*255),0,255)}function Fn(n){return si(to(n/2.55)/100,0,1)}function Ap(n){return si(to(n*100),0,100)}const sn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xu=[..."0123456789ABCDEF"],l5=n=>xu[n&15],c5=n=>xu[(n&240)>>4]+xu[n&15],yo=n=>(n&240)>>4===(n&15),u5=n=>yo(n.r)&&yo(n.g)&&yo(n.b)&&yo(n.a);function h5(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&sn[n[1]]*17,g:255&sn[n[2]]*17,b:255&sn[n[3]]*17,a:t===5?sn[n[4]]*17:255}:(t===7||t===9)&&(e={r:sn[n[1]]<<4|sn[n[2]],g:sn[n[3]]<<4|sn[n[4]],b:sn[n[5]]<<4|sn[n[6]],a:t===9?sn[n[7]]<<4|sn[n[8]]:255})),e}const f5=(n,t)=>n<255?t(n):"";function d5(n){var t=u5(n)?l5:c5;return n?"#"+t(n.r)+t(n.g)+t(n.b)+f5(n.a,t):void 0}const p5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Gb(n,t,e){const i=t*Math.min(e,1-e),r=(s,o=(s+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function g5(n,t,e){const i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function m5(n,t,e){const i=Gb(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function b5(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function Mh(n){const e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=b5(e,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function Ch(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(di)}function Oh(n,t,e){return Ch(Gb,n,t,e)}function y5(n,t,e){return Ch(m5,n,t,e)}function x5(n,t,e){return Ch(g5,n,t,e)}function Yb(n){return(n%360+360)%360}function v5(n){const t=p5.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?ys(+t[5]):di(+t[5]));const r=Yb(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=y5(r,s,o):t[1]==="hsv"?i=x5(r,s,o):i=Oh(r,s,o),{r:i[0],g:i[1],b:i[2],a:e}}function w5(n,t){var e=Mh(n);e[0]=Yb(e[0]+t),e=Oh(e),n.r=e[0],n.g=e[1],n.b=e[2]}function S5(n){if(!n)return;const t=Mh(n),e=t[0],i=Ap(t[1]),r=Ap(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Fn(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const Tp={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ep={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function _5(){const n={},t=Object.keys(Ep),e=Object.keys(Tp);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<e.length;r++)s=e[r],a=a.replace(s,Tp[s]);s=parseInt(Ep[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let xo;function k5(n){xo||(xo=_5(),xo.transparent=[0,0,0,0]);const t=xo[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const M5=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function C5(n){const t=M5.exec(n);let e=255,i,r,s;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?ys(o):si(o*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?ys(i):si(i,0,255)),r=255&(t[4]?ys(r):si(r,0,255)),s=255&(t[6]?ys(s):si(s,0,255)),{r:i,g:r,b:s,a:e}}}function O5(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Fn(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const bc=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,dr=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function A5(n,t,e){const i=dr(Fn(n.r)),r=dr(Fn(n.g)),s=dr(Fn(n.b));return{r:di(bc(i+e*(dr(Fn(t.r))-i))),g:di(bc(r+e*(dr(Fn(t.g))-r))),b:di(bc(s+e*(dr(Fn(t.b))-s))),a:n.a+e*(t.a-n.a)}}function vo(n,t,e){if(n){let i=Mh(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Oh(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Xb(n,t){return n&&Object.assign(t||{},n)}function $p(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=di(n[3]))):(t=Xb(n,{r:0,g:0,b:0,a:1}),t.a=di(t.a)),t}function T5(n){return n.charAt(0)==="r"?C5(n):v5(n)}class Ws{constructor(t){if(t instanceof Ws)return t;const e=typeof t;let i;e==="object"?i=$p(t):e==="string"&&(i=h5(t)||k5(t)||T5(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Xb(this._rgb);return t&&(t.a=Fn(t.a)),t}set rgb(t){this._rgb=$p(t)}rgbString(){return this._valid?O5(this._rgb):void 0}hexString(){return this._valid?d5(this._rgb):void 0}hslString(){return this._valid?S5(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=A5(this._rgb,t._rgb,e)),this}clone(){return new Ws(this.rgb)}alpha(t){return this._rgb.a=di(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=to(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return vo(this._rgb,2,t),this}darken(t){return vo(this._rgb,2,-t),this}saturate(t){return vo(this._rgb,1,t),this}desaturate(t){return vo(this._rgb,1,-t),this}rotate(t){return w5(this._rgb,t),this}}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */const E5=(()=>{let n=0;return()=>n++})();function Kt(n){return n===null||typeof n>"u"}function le(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ft(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function xe(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function tn(n,t){return xe(n)?n:t}function Vt(n,t){return typeof n>"u"?t:n}const $5=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Gt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Ee(n,t,e,i){let r,s,o;if(le(n))if(s=n.length,i)for(r=s-1;r>=0;r--)t.call(e,n[r],r);else for(r=0;r<s;r++)t.call(e,n[r],r);else if(Ft(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)t.call(e,n[o[r]],o[r])}function Pp(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Ea(n){if(le(n))return n.map(Ea);if(Ft(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=Ea(n[e[r]]);return t}return n}function Qb(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function P5(n,t,e,i){if(!Qb(n))return;const r=t[n],s=e[n];Ft(r)&&Ft(s)?Us(r,s,i):t[n]=Ea(s)}function Us(n,t,e){const i=le(t)?t:[t],r=i.length;if(!Ft(n))return n;e=e||{};const s=e.merger||P5;let o;for(let a=0;a<r;++a){if(o=i[a],!Ft(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,e)}return n}function Es(n,t){return Us(n,t,{merger:D5})}function D5(n,t,e){if(!Qb(n))return;const i=t[n],r=e[n];Ft(i)&&Ft(r)?Es(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Ea(r))}const Dp={"":n=>n,x:n=>n.x,y:n=>n.y};function I5(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function N5(n){const t=I5(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Vr(n,t){return(Dp[t]||(Dp[t]=N5(t)))(n)}function Ah(n){return n.charAt(0).toUpperCase()+n.slice(1)}const un=n=>typeof n<"u",wi=n=>typeof n=="function",Ip=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function L5(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const je=Math.PI,Pn=2*je,$a=Number.POSITIVE_INFINITY,R5=je/180,Ke=je/2,$i=je/4,Np=je*2/3,oi=Math.log10,pi=Math.sign;function Ro(n,t,e){return Math.abs(n-t)<e}function Lp(n){const t=Math.round(n);n=Ro(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(oi(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function z5(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}function Pa(n){return!isNaN(parseFloat(n))&&isFinite(n)}function B5(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Zb(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function ai(n){return n*(je/180)}function Th(n){return n*(180/je)}function Rp(n){if(!xe(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function F5(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let s=Math.atan2(i,e);return s<-.5*je&&(s+=Pn),{angle:s,distance:r}}function Cn(n){return(n%Pn+Pn)%Pn}function j5(n,t,e,i){const r=Cn(n),s=Cn(t),o=Cn(e),a=Cn(s-r),l=Cn(o-r),c=Cn(r-s),u=Cn(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function jn(n,t,e){return Math.max(t,Math.min(e,n))}function H5(n){return jn(n,-32768,32767)}function kr(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Eh(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}const vu=(n,t,e,i)=>Eh(n,e,i?r=>{const s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),V5=(n,t,e)=>Eh(n,e,i=>n[i][t]>=e);function W5(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const ty=["push","pop","shift","splice","unshift"];function U5(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ty.forEach(e=>{const i="_onData"+Ah(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function zp(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(ty.forEach(s=>{delete n[s]}),delete n._chartjs)}function ey(n){const t=new Set;let e,i;for(e=0,i=n.length;e<i;++e)t.add(n[e]);return t.size===i?n:Array.from(t)}const ny=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function iy(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,ny.call(window,()=>{i=!1,n.apply(t,e)}))}}function q5(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const ry=n=>n==="start"?"left":n==="end"?"right":"center",Ze=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,K5=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t,wo=n=>n===0||n===1,Bp=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Pn/e)),Fp=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Pn/e)+1,$s={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ke)+1,easeOutSine:n=>Math.sin(n*Ke),easeInOutSine:n=>-.5*(Math.cos(je*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>wo(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>wo(n)?n:Bp(n,.075,.3),easeOutElastic:n=>wo(n)?n:Fp(n,.075,.3),easeInOutElastic(n){return wo(n)?n:n<.5?.5*Bp(n*2,.1125,.45):.5+.5*Fp(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-$s.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?$s.easeInBounce(n*2)*.5:$s.easeOutBounce(n*2-1)*.5+.5};function sy(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function jp(n){return sy(n)?n:new Ws(n)}function yc(n){return sy(n)?n:new Ws(n).saturate(.5).darken(.1).hexString()}const J5=["x","y","borderWidth","radius","tension"],G5=["color","borderColor","backgroundColor"];function Y5(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:G5},numbers:{type:"number",properties:J5}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function X5(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Hp=new Map;function Q5(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Hp.get(e);return i||(i=new Intl.NumberFormat(n,t),Hp.set(e,i)),i}function $h(n,t,e){return Q5(t,e).format(n)}const oy={values(n){return le(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=Z5(n,e)}const o=oi(Math.abs(s)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),$h(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(oi(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?oy.numeric.call(this,n,t,e):""}};function Z5(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var gl={formatters:oy};function t3(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gl.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const rr=Object.create(null),wu=Object.create(null);function Ps(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function xc(n,t,e){return typeof t=="string"?Us(Ps(n,t),e):Us(Ps(n,""),t)}class e3{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>yc(r.backgroundColor),this.hoverBorderColor=(i,r)=>yc(r.borderColor),this.hoverColor=(i,r)=>yc(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return xc(this,t,e)}get(t){return Ps(this,t)}describe(t,e){return xc(wu,t,e)}override(t,e){return xc(rr,t,e)}route(t,e,i,r){const s=Ps(this,t),o=Ps(this,i),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=o[r];return Ft(l)?Object.assign({},c,l):Vt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var he=new e3({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Y5,X5,t3]);function n3(n){return!n||Kt(n.size)||Kt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Da(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function i3(n,t,e,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const a=e.length;let l,c,u,h,f;for(l=0;l<a;l++)if(h=e[l],h!=null&&le(h)!==!0)o=Da(n,r,s,o,h);else if(le(h))for(c=0,u=h.length;c<u;c++)f=h[c],f!=null&&!le(f)&&(o=Da(n,r,s,o,f));n.restore();const d=s.length/2;if(d>e.length){for(l=0;l<d;l++)delete r[s[l]];s.splice(0,d)}return o}function Pi(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function Vp(n,t){t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore()}function r3(n,t,e,i,r){let s,o,a,l,c,u,h,f;const d=t.pointStyle,p=t.rotation,m=t.radius;let v=(p||0)*R5;if(d&&typeof d=="object"&&(s=d.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(v),n.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),n.restore();return}if(!(isNaN(m)||m<=0)){switch(n.beginPath(),d){default:r?n.ellipse(e,i,r/2,m,0,0,Pn):n.arc(e,i,m,0,Pn),n.closePath();break;case"triangle":u=r?r/2:m,n.moveTo(e+Math.sin(v)*u,i-Math.cos(v)*m),v+=Np,n.lineTo(e+Math.sin(v)*u,i-Math.cos(v)*m),v+=Np,n.lineTo(e+Math.sin(v)*u,i-Math.cos(v)*m),n.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(v+$i)*l,h=Math.cos(v+$i)*(r?r/2-c:l),a=Math.sin(v+$i)*l,f=Math.sin(v+$i)*(r?r/2-c:l),n.arc(e-h,i-a,c,v-je,v-Ke),n.arc(e+f,i-o,c,v-Ke,v),n.arc(e+h,i+a,c,v,v+Ke),n.arc(e-f,i+o,c,v+Ke,v+je),n.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=r?r/2:l,n.rect(e-u,i-l,2*u,2*l);break}v+=$i;case"rectRot":h=Math.cos(v)*(r?r/2:m),o=Math.cos(v)*m,a=Math.sin(v)*m,f=Math.sin(v)*(r?r/2:m),n.moveTo(e-h,i-a),n.lineTo(e+f,i-o),n.lineTo(e+h,i+a),n.lineTo(e-f,i+o),n.closePath();break;case"crossRot":v+=$i;case"cross":h=Math.cos(v)*(r?r/2:m),o=Math.cos(v)*m,a=Math.sin(v)*m,f=Math.sin(v)*(r?r/2:m),n.moveTo(e-h,i-a),n.lineTo(e+h,i+a),n.moveTo(e+f,i-o),n.lineTo(e-f,i+o);break;case"star":h=Math.cos(v)*(r?r/2:m),o=Math.cos(v)*m,a=Math.sin(v)*m,f=Math.sin(v)*(r?r/2:m),n.moveTo(e-h,i-a),n.lineTo(e+h,i+a),n.moveTo(e+f,i-o),n.lineTo(e-f,i+o),v+=$i,h=Math.cos(v)*(r?r/2:m),o=Math.cos(v)*m,a=Math.sin(v)*m,f=Math.sin(v)*(r?r/2:m),n.moveTo(e-h,i-a),n.lineTo(e+h,i+a),n.moveTo(e+f,i-o),n.lineTo(e-f,i+o);break;case"line":o=r?r/2:Math.cos(v)*m,a=Math.sin(v)*m,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(v)*(r?r/2:m),i+Math.sin(v)*m);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function ay(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Ph(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Dh(n){n.restore()}function Wr(n,t,e,i,r,s={}){const o=le(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(n.save(),n.font=r.string,s3(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&a3(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Kt(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,e,i,s.maxWidth)),n.fillText(c,e,i,s.maxWidth),o3(n,e,i,c,s),i+=r.lineHeight;n.restore()}function s3(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Kt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function o3(n,t,e,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,c=e+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function a3(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Ih(n,t){const{x:e,y:i,w:r,h:s,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,-Ke,je,!0),n.lineTo(e,i+s-o.bottomLeft),n.arc(e+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,je,Ke,!0),n.lineTo(e+r-o.bottomRight,i+s),n.arc(e+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ke,0,!0),n.lineTo(e+r,i+o.topRight),n.arc(e+r-o.topRight,i+o.topRight,o.topRight,0,-Ke,!0),n.lineTo(e+o.topLeft,i)}const l3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,c3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function u3(n,t){const e=(""+n).match(l3);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const h3=n=>+n||0;function ly(n,t){const e={},i=Ft(t),r=i?Object.keys(t):t,s=Ft(n)?i?o=>Vt(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of r)e[o]=h3(s(o));return e}function cy(n){return ly(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Nh(n){return ly(n,["topLeft","topRight","bottomLeft","bottomRight"])}function hn(n){const t=cy(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function En(n,t){n=n||{},t=t||he.font;let e=Vt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Vt(n.style,t.style);i&&!(""+i).match(c3)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Vt(n.family,t.family),lineHeight:u3(Vt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Vt(n.weight,t.weight),string:""};return r.string=n3(r),r}function So(n,t,e,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),r=!1),e!==void 0&&le(a)&&(a=a[e%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function f3(n,t,e){const{min:i,max:r}=n,s=$5(t,(r-i)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function is(n,t){return Object.assign(Object.create(n),t)}function Lh(n,t=[""],e=n,i,r=()=>n[0]){un(i)||(i=dy("_fallback",n));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:e,_fallback:i,_getTarget:r,override:o=>Lh([o,...n],t,e,i)};return new Proxy(s,{deleteProperty(o,a){return delete o[a],delete o._keys,delete n[0][a],!0},get(o,a){return hy(o,a,()=>v3(a,t,n,o))},getOwnPropertyDescriptor(o,a){return Reflect.getOwnPropertyDescriptor(o._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,a){return Up(o).includes(a)},ownKeys(o){return Up(o)},set(o,a,l){const c=o._storage||(o._storage=r());return o[a]=c[a]=l,delete o._keys,!0}})}function Ur(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:uy(n,i),setContext:s=>Ur(n,s,e,i),override:s=>Ur(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return hy(s,o,()=>p3(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function uy(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:wi(e)?e:()=>e,isIndexable:wi(i)?i:()=>i}}const d3=(n,t)=>n?n+Ah(t):t,Rh=(n,t)=>Ft(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function hy(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t))return n[t];const i=e();return n[t]=i,i}function p3(n,t,e){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let a=i[t];return wi(a)&&o.isScriptable(t)&&(a=g3(t,a,n,e)),le(a)&&a.length&&(a=m3(t,a,n,o.isIndexable)),Rh(t,a)&&(a=Ur(a,r,s&&s[t],o)),a}function g3(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);return a.add(n),t=t(s,o||i),a.delete(n),Rh(n,t)&&(t=zh(r._scopes,r,n,t)),t}function m3(n,t,e,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(un(s.index)&&i(n))t=t[s.index%t.length];else if(Ft(t[0])){const l=t,c=r._scopes.filter(u=>u!==l);t=[];for(const u of l){const h=zh(c,r,n,u);t.push(Ur(h,s,o&&o[n],a))}}return t}function fy(n,t,e){return wi(n)?n(t,e):n}const b3=(n,t)=>n===!0?t:typeof n=="string"?Vr(t,n):void 0;function y3(n,t,e,i,r){for(const s of t){const o=b3(e,s);if(o){n.add(o);const a=fy(o._fallback,e,r);if(un(a)&&a!==e&&a!==i)return a}else if(o===!1&&un(i)&&e!==i)return null}return!1}function zh(n,t,e,i){const r=t._rootScopes,s=fy(t._fallback,e,i),o=[...n,...r],a=new Set;a.add(i);let l=Wp(a,o,e,s||e,i);return l===null||un(s)&&s!==e&&(l=Wp(a,o,s,l,i),l===null)?!1:Lh(Array.from(a),[""],r,s,()=>x3(t,e,i))}function Wp(n,t,e,i,r){for(;e;)e=y3(n,t,e,i,r);return e}function x3(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return le(r)&&Ft(e)?e:r||{}}function v3(n,t,e,i){let r;for(const s of t)if(r=dy(d3(s,n),e),un(r))return Rh(n,r)?zh(e,i,n,r):r}function dy(n,t){for(const e of t){if(!e)continue;const i=e[n];if(un(i))return i}}function Up(n){let t=n._keys;return t||(t=n._keys=w3(n._scopes)),t}function w3(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function py(){return typeof window<"u"&&typeof document<"u"}function Bh(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Ia(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const ml=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function S3(n,t){return ml(n).getPropertyValue(t)}const _3=["top","right","bottom","left"];function Yi(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=_3[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const k3=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function M3(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(k3(r,s,n.target))a=r,l=s;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Li(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=ml(e),s=r.boxSizing==="border-box",o=Yi(r,"padding"),a=Yi(r,"border","width"),{x:l,y:c,box:u}=M3(n,e),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:d,height:p}=t;return s&&(d-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/d*e.width/i),y:Math.round((c-f)/p*e.height/i)}}function C3(n,t,e){let i,r;if(t===void 0||e===void 0){const s=Bh(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{const o=s.getBoundingClientRect(),a=ml(s),l=Yi(a,"border","width"),c=Yi(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=Ia(a.maxWidth,s,"clientWidth"),r=Ia(a.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:i||$a,maxHeight:r||$a}}const _o=n=>Math.round(n*10)/10;function O3(n,t,e,i){const r=ml(n),s=Yi(r,"margin"),o=Ia(r.maxWidth,n,"clientWidth")||$a,a=Ia(r.maxHeight,n,"clientHeight")||$a,l=C3(n,t,e);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const f=Yi(r,"border","width"),d=Yi(r,"padding");c-=d.width+f.width,u-=d.height+f.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=_o(Math.min(c,o,l.maxWidth)),u=_o(Math.min(u,a,l.maxHeight)),c&&!u&&(u=_o(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=_o(Math.floor(u*i))),{width:c,height:u}}function qp(n,t,e){const i=t||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const A3=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return n}();function Kp(n,t){const e=S3(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const T3=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},E3=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function vc(n,t,e){return n?T3(t,e):E3()}function $3(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function P3(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class D3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const s=e.listeners[r],o=e.duration;s.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ny.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var zn=new D3;const Jp="transparent",I3={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=jp(n||Jp),r=i.valid&&jp(t||Jp);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class N3{constructor(t,e,i,r){const s=e[i];r=So([t.to,r,s,t.from]);const o=So([t.from,s,r]);this._active=!0,this._fn=t.fn||I3[t.type||typeof o],this._easing=$s[t.easing]||$s.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=So([t.to,e,r,t.from]),this._from=So([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||e<i),!this._active){this._target[r]=a,this._notify(!0);return}if(e<0){this._target[r]=s;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class L3{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ft(t))return;const e=Object.keys(he.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!Ft(s))return;const o={};for(const a of e)o[a]=s[a];(le(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,r=z3(t,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&R3(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){const i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(t,e));continue}const u=e[c];let h=s[c];const f=i.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){t[c]=u;continue}s[c]=h=new N3(f,t,c,u),r.push(h)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return zn.add(this._chart,i),!0}}function R3(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function z3(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Gp(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function B3(n,t,e){if(e===!1)return!1;const i=Gp(n,e),r=Gp(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function F3(n){let t,e,i,r;return Ft(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function gy(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function Yp(n,t,e,i={}){const r=n.keys,s=i.mode==="single";let o,a,l,c;if(t!==null){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===e){if(i.all)continue;break}c=n.values[l],xe(c)&&(s||t===0||pi(t)===pi(c))&&(t+=c)}return t}}function j3(n){const t=Object.keys(n),e=new Array(t.length);let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],e[i]={x:s,y:n[s]};return e}function Xp(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function H3(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function V3(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function W3(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Qp(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function Zp(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=H3(s,o,i),h=t.length;let f;for(let d=0;d<h;++d){const p=t[d],{[l]:m,[c]:v}=p,C=p._stacks||(p._stacks={});f=C[c]=W3(r,u,m),f[a]=v,f._top=Qp(f,o,!0,i.type),f._bottom=Qp(f,o,!1,i.type);const E=f._visualValues||(f._visualValues={});E[a]=v}}function wc(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function U3(n,t){return is(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function q3(n,t,e){return is(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function ls(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const s=r._stacks;if(!s||s[i]===void 0||s[i][e]===void 0)return;delete s[i][e],s[i]._visualValues!==void 0&&s[i]._visualValues[e]!==void 0&&delete s[i]._visualValues[e]}}}const Sc=n=>n==="reset"||n==="none",tg=(n,t)=>t?n:Object.assign({},n),K3=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:gy(e,!0),values:null};class my{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Xp(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ls(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(h,f,d,p)=>h==="x"?f:h==="r"?p:d,s=e.xAxisID=Vt(i.xAxisID,wc(t,"x")),o=e.yAxisID=Vt(i.yAxisID,wc(t,"y")),a=e.rAxisID=Vt(i.rAxisID,wc(t,"r")),l=e.indexAxis,c=e.iAxisID=r(l,s,o,a),u=e.vAxisID=r(l,o,s,a);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&zp(this._data,this),t._stacked&&ls(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ft(e))this._data=j3(e);else if(i!==e){if(i){zp(i,this);const r=this._cachedMeta;ls(r),r._parsed=[]}e&&Object.isExtensible(e)&&U5(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=e._stacked;e._stacked=Xp(e.vScale,e),e.stack!==i.stack&&(r=!0,ls(e),e.stack=i.stack),this._resyncElements(t),(r||s!==e._stacked)&&Zp(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=t===0&&e===r.length?!0:i._sorted,c=t>0&&i._parsed[t-1],u,h,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{le(r[t])?f=this.parseArrayData(i,r,t,e):Ft(r[t])?f=this.parseObjectData(i,r,t,e):f=this.parsePrimitiveData(i,r,t,e);const d=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<e;++u)i._parsed[u+t]=h=f[u],l&&(d()&&(l=!1),c=h);i._sorted=l}o&&Zp(this,f)}parsePrimitiveData(t,e,i,r){const{iScale:s,vScale:o}=t,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(r);let f,d,p;for(f=0,d=r;f<d;++f)p=f+i,h[f]={[a]:u||s.parse(c[p],p),[l]:o.parse(e[p],p)};return h}parseArrayData(t,e,i,r){const{xScale:s,yScale:o}=t,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+i,h=e[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(t,e,i,r){const{xScale:s,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,f,d;for(u=0,h=r;u<h;++u)f=u+i,d=e[f],c[u]={x:s.parse(Vr(d,a),f),y:o.parse(Vr(d,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,s=this._cachedMeta,o=e[t.axis],a={keys:gy(r,!0),values:e._stacks[t.axis]._visualValues};return Yp(a,o,s.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const s=i[e.axis];let o=s===null?NaN:s;const a=r&&i._stacks[e.axis];r&&a&&(r.values=a,o=Yp(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&t===i.iScale,o=r.length,a=this._getOtherScale(t),l=K3(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=V3(a);let f,d;function p(){d=r[f];const m=d[a.axis];return!xe(d[t.axis])||u>m||h<m}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(c,t,d,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(c,t,d,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=e.length;r<s;++r)o=e[r][t.axis],xe(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=F3(Vt(this.options.clip,B3(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],s=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(t,s,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(t,s))}for(u=0;u<o.length;++u)o[u].draw(t,s)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];s=o.$context||(o.$context=q3(this.getContext(),t,o)),s.parsed=this.getParsed(t),s.raw=r.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=U3(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",s=this._cachedDataOpts,o=t+"-"+e,a=s[o],l=this.enableOptionSharing&&un(i);if(a)return tg(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),u),d=Object.keys(he.elements[t]),p=()=>this.getContext(i,r,e),m=c.resolveNamedOptions(f,d,p,h);return m.$shared&&(m.$shared=l,s[o]=Object.freeze(tg(m,l))),m}_resolveAnimations(t,e,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${e}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,e),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(t,i,e))}const c=new L3(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Sc(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(e,s)||s!==r;return this.updateSharedOptions(s,e,i),{sharedOptions:s,includeOptions:o}}updateElement(t,e,i,r){Sc(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!Sc(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const s=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=e.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,e,i=!0){const r=this._cachedMeta,s=r.data,o=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=o;a--)c[a]=c[a-e]};for(l(s),a=t;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(t,e),i&&this.updateElements(s,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&ls(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function J3(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=ey(i.sort((r,s)=>r-s))}return n._cache.$bar}function G3(n){const t=n.iScale,e=J3(t,n.type);let i=t._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(un(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return i}function Y3(n,t,e,i){const r=e.barThickness;let s,o;return Kt(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[n]-s/2}}function X3(n,t,e,i){const r=t.pixels,s=r[n];let o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null;const l=e.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:c}}function Q3(n,t,e,i){const r=e.parse(n[0],i),s=e.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function by(n,t,e,i){return le(n)?Q3(n,t,e,i):t[e.axis]=e.parse(n,i),t}function eg(n,t,e,i){const r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,f;for(c=e,u=e+i;c<u;++c)f=t[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(by(f,h,s,c));return l}function _c(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Z3(n,t,e){return n!==0?pi(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function tz(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}function ez(n,t,e,i){let r=t.borderSkipped;const s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=tz(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=c:(e._bottom||0)===i?r=u:(s[ng(u,o,a,l)]=!0,r=c)),s[ng(r,o,a,l)]=!0,n.borderSkipped=s}function ng(n,t,e,i){return i?(n=nz(n,t,e),n=ig(n,e,t)):n=ig(n,t,e),n}function nz(n,t,e){return n===t?e:n===e?t:n}function ig(n,t,e){return n==="start"?t:n==="end"?e:n}function iz(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class rz extends my{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,r){return eg(t,e,i,r)}parseArrayData(t,e,i,r){return eg(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:s,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let f,d,p,m;for(f=i,d=i+r;f<d;++f)m=e[f],p={},p[s.axis]=s.parse(Vr(m,c),f),h.push(by(Vr(m,u),p,o,f));return h}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const s=i._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,s=this.getParsed(t),o=s._custom,a=_c(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(e,r);for(let d=e;d<e+i;d++){const p=this.getParsed(d),m=s||Kt(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(d),v=this._calculateBarIndexPixels(d,u),C=(p._stacks||{})[a.axis],E={horizontal:c,base:m.base,enableBorderRadius:!C||_c(p._custom)||o===C._top||o===C._bottom,x:c?m.head:v.center,y:c?v.center:m.head,height:c?v.size:Math.abs(m.size),width:c?Math.abs(m.size):v.size};f&&(E.options=h||this.resolveDataElementOptions(d,t[d].active?"active":r));const F=E.options||t[d].options;ez(E,F,C,o),iz(E,F,u.ratio),this.updateElement(t[d],d,E,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=i.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(e),u=c&&c[l.vScale.axis];if(Kt(u)||isNaN(u))return!0};for(const l of r)if(!(e!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const r=this._getStacks(t,i),s=e!==void 0?r.indexOf(e):-1;return s===-1?r.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let s,o;for(s=0,o=e.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=t.barThickness;return{min:a||G3(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(t),c=l._custom,u=_c(c);let h=l[e.axis],f=0,d=i?this.applyStack(e,l,i):h,p,m;d!==h&&(f=d-h,d=h),u&&(h=c.barStart,d=c.barEnd-c.barStart,h!==0&&pi(h)!==pi(c.barEnd)&&(f=0),f+=h);const v=!Kt(s)&&!u?s:f;let C=e.getPixelForValue(v);if(this.chart.getDataVisibility(t)?p=e.getPixelForValue(f+d):p=C,m=p-C,Math.abs(m)<o){m=Z3(m,e,a)*o,h===a&&(C-=m/2);const E=e.getPixelForDecimal(0),F=e.getPixelForDecimal(1),q=Math.min(E,F),j=Math.max(E,F);C=Math.max(Math.min(C,j),q),p=C+m,i&&!u&&(l._stacks[e.axis]._visualValues[r]=e.getValueForPixel(p)-e.getValueForPixel(C))}if(C===e.getPixelForValue(a)){const E=pi(m)*e.getLineWidthForValue(a)/2;C+=E,m-=E}return{size:m,base:C,head:p,center:p+m/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,s=r.skipNull,o=Vt(r.maxBarThickness,1/0);let a,l;if(e.grouped){const c=s?this._getStackCount(t):e.stackCount,u=r.barThickness==="flex"?X3(t,e,r,c):Y3(t,e,r,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[e.axis]!==null&&i[s].draw(this._ctx)}}function Di(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Fh{static override(t){Object.assign(Fh.prototype,t)}constructor(t){this.options=t||{}}init(){}formats(){return Di()}parse(){return Di()}format(){return Di()}add(){return Di()}diff(){return Di()}startOf(){return Di()}endOf(){return Di()}}var sz={_date:Fh};function oz(n,t,e,i){const{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&s.length){const l=a._reversePixels?V5:vu;if(i){if(r._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const h=l(s,t,e-u),f=l(s,t,e+u);return{lo:h.lo,hi:f.hi}}}}else return l(s,t,e)}return{lo:0,hi:s.length-1}}function eo(n,t,e,i,r){const s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:f}=oz(s[a],t,o,r);for(let d=h;d<=f;++d){const p=u[d];p.skip||i(p,c,d)}}}function az(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const s=t?Math.abs(i.x-r.x):0,o=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function kc(n,t,e,i,r){const s=[];return!r&&!n.isPointInArea(t)||eo(n,e,t,function(a,l,c){!r&&!ay(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function lz(n,t,e,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=F5(o,{x:t.x,y:t.y});j5(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return eo(n,e,t,s),r}function cz(n,t,e,i,r,s){let o=[];const a=az(e);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const d=u.inRange(t.x,t.y,r);if(i&&!d)return;const p=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(p))&&!d)return;const v=a(t,p);v<l?(o=[{element:u,datasetIndex:h,index:f}],l=v):v===l&&o.push({element:u,datasetIndex:h,index:f})}return eo(n,e,t,c),o}function Mc(n,t,e,i,r,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!i?lz(n,t,e,r):cz(n,t,e,i,r,s)}function rg(n,t,e,i,r){const s=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return eo(n,e,t,(l,c,u)=>{l[o](t[e],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,r))}),i&&!a?[]:s}var uz={evaluateInteractionItems:eo,modes:{index(n,t,e,i){const r=Li(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?kc(n,r,s,i,o):Mc(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,i){const r=Li(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?kc(n,r,s,i,o):Mc(n,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,t,e,i){const r=Li(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return kc(n,r,s,i,o)},nearest(n,t,e,i){const r=Li(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return Mc(n,r,s,e.intersect,i,o)},x(n,t,e,i){const r=Li(t,n);return rg(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=Li(t,n);return rg(n,r,"y",e.intersect,i)}}};const yy=["left","top","right","bottom"];function cs(n,t){return n.filter(e=>e.pos===t)}function sg(n,t){return n.filter(e=>yy.indexOf(e.pos)===-1&&e.box.axis===t)}function us(n,t){return n.sort((e,i)=>{const r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function hz(n){const t=[];let e,i,r,s,o,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:s,options:{stack:o,stackWeight:a=1}}=r,t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}function fz(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:s}=e;if(!i||!yy.includes(r))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function dz(n,t){const e=fz(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&t.availableHeight)}return e}function pz(n){const t=hz(n),e=us(t.filter(c=>c.box.fullSize),!0),i=us(cs(t,"left"),!0),r=us(cs(t,"right")),s=us(cs(t,"top"),!0),o=us(cs(t,"bottom")),a=sg(t,"x"),l=sg(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:cs(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function og(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function xy(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function gz(n,t,e,i){const{pos:r,box:s}=e,o=n.maxPadding;if(!Ft(r)){e.size&&(n[r]-=e.size);const h=i[e.stack]||{size:0,count:1};h.size=Math.max(h.size,e.horizontal?s.height:s.width),e.size=h.size/h.count,n[r]+=e.size}s.getPadding&&xy(o,s.getPadding());const a=Math.max(0,t.outerWidth-og(o,n,"left","right")),l=Math.max(0,t.outerHeight-og(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function mz(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function bz(n,t){const e=t.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}return i(n?["left","right"]:["top","bottom"])}function xs(n,t,e,i){const r=[];let s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||t.w,a.height||t.h,bz(a.horizontal,t));const{same:h,other:f}=gz(t,e,a,i);c|=h&&r.length,u=u||f,l.fullSize||r.push(a)}return c&&xs(r,t,e,i)||u}function ko(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function ag(n,t,e,i){const r=e.padding;let{x:s,y:o}=t;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=t.w*u,f=c.size||l.height;un(c.start)&&(o=c.start),l.fullSize?ko(l,r.left,o,e.outerWidth-r.right-r.left,f):ko(l,t.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{const h=t.h*u,f=c.size||l.width;un(c.start)&&(s=c.start),l.fullSize?ko(l,s,r.top,f,e.outerHeight-r.bottom-r.top):ko(l,s,t.top+c.placed,f,h),c.start=s,c.placed+=h,s=l.right}}t.x=s,t.y=o}var li={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=hn(n.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=pz(n.boxes),l=a.vertical,c=a.horizontal;Ee(n.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,v)=>v.box.options&&v.box.options.display===!1?m:m+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);xy(f,hn(i));const d=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),p=dz(l.concat(c),h);xs(a.fullSize,d,h,p),xs(l,d,h,p),xs(c,d,h,p)&&xs(l,d,h,p),mz(d),ag(a.leftAndTop,d,h,p),d.x+=d.w,d.y+=d.h,ag(a.rightAndBottom,d,h,p),n.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},Ee(a.chartArea,m=>{const v=m.box;Object.assign(v,n.chartArea),v.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class vy{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class yz extends vy{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const zo="$chartjs",xz={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lg=n=>n===null||n==="";function vz(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[zo]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",lg(r)){const s=Kp(n,"width");s!==void 0&&(n.width=s)}if(lg(i))if(n.style.height==="")n.height=n.width/(t||2);else{const s=Kp(n,"height");s!==void 0&&(n.height=s)}return n}const wy=A3?{passive:!0}:!1;function wz(n,t,e){n.addEventListener(t,e,wy)}function Sz(n,t,e){n.canvas.removeEventListener(t,e,wy)}function _z(n,t){const e=xz[n.type]||n.type,{x:i,y:r}=Li(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Na(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function kz(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Na(a.addedNodes,i),o=o&&!Na(a.removedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function Mz(n,t,e){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Na(a.removedNodes,i),o=o&&!Na(a.addedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const qs=new Map;let cg=0;function Sy(){const n=window.devicePixelRatio;n!==cg&&(cg=n,qs.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Cz(n,t){qs.size||window.addEventListener("resize",Sy),qs.set(n,t)}function Oz(n){qs.delete(n),qs.size||window.removeEventListener("resize",Sy)}function Az(n,t,e){const i=n.canvas,r=i&&Bh(i);if(!r)return;const s=iy((a,l)=>{const c=r.clientWidth;e(a,l),c<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),Cz(n,s),o}function Cc(n,t,e){e&&e.disconnect(),t==="resize"&&Oz(n)}function Tz(n,t,e){const i=n.canvas,r=iy(s=>{n.ctx!==null&&e(_z(s,n))},n);return wz(i,t,r),r}class Ez extends vy{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(vz(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[zo])return!1;const i=e[zo].initial;["height","width"].forEach(s=>{const o=i[s];Kt(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[zo],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),o={attach:kz,detach:Mz,resize:Az}[e]||Tz;r[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:Cc,detach:Cc,resize:Cc}[e]||Sz)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return O3(t,e,i,r)}isAttached(t){const e=Bh(t);return!!(e&&e.isConnected)}}function $z(n){return!py()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?yz:Ez}class bl{static defaults={};static defaultRoutes=void 0;active=!1;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Pa(this.x)&&Pa(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}function Pz(n,t){const e=n.options.ticks,i=Dz(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?Nz(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return Lz(t,c,s,o/r),c;const u=Iz(s,t,r);if(o>0){let h,f;const d=o>1?Math.round((l-a)/(o-1)):null;for(Mo(t,c,u,Kt(d)?0:a-d,a),h=0,f=o-1;h<f;h++)Mo(t,c,u,s[h],s[h+1]);return Mo(t,c,u,l,Kt(d)?t.length:l+d),c}return Mo(t,c,u),c}function Dz(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function Iz(n,t,e){const i=Rz(n),r=t.length/e;if(!i)return Math.max(r,1);const s=z5(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function Nz(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function Lz(n,t,e,i){let r=0,s=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(t.push(n[o]),r++,s=e[r*i])}function Mo(n,t,e,i,r){const s=Vt(i,0),o=Math.min(Vt(r,n.length),n.length);let a=0,l,c,u;for(e=Math.ceil(e),r&&(l=r-i,e=l/Math.floor(l/e)),u=s;u<0;)a++,u=Math.round(s+a*e);for(c=Math.max(s,0);c<o;c++)c===u&&(t.push(n[c]),a++,u=Math.round(s+a*e))}function Rz(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const zz=n=>n==="left"?"right":n==="right"?"left":n,ug=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,hg=(n,t)=>Math.min(t||n,n);function fg(n,t){const e=[],i=n.length/t,r=n.length;let s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function Bz(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(r),c;if(!(e&&(i===1?c=Math.max(l-s,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<s-a||l>o+a)))return l}function Fz(n,t){Ee(n,e=>{const i=e.gc,r=i.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}function hs(n){return n.drawTicks?n.tickLength:0}function dg(n,t){if(!n.display)return 0;const e=En(n.font,t),i=hn(n.padding);return(le(n.text)?n.text.length:1)*e.lineHeight+i.height}function jz(n,t){return is(n,{scale:t,type:"scale"})}function Hz(n,t,e){return is(n,{tick:e,index:t,type:"tick"})}function Vz(n,t,e){let i=ry(n);return(e&&t!=="right"||!e&&t==="right")&&(i=zz(i)),i}function Wz(n,t,e,i){const{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let h=0,f,d,p;const m=o-r,v=a-s;if(n.isHorizontal()){if(d=Ze(i,s,a),Ft(e)){const C=Object.keys(e)[0],E=e[C];p=u[C].getPixelForValue(E)+m-t}else e==="center"?p=(c.bottom+c.top)/2+m-t:p=ug(n,e,t);f=a-s}else{if(Ft(e)){const C=Object.keys(e)[0],E=e[C];d=u[C].getPixelForValue(E)-v+t}else e==="center"?d=(c.left+c.right)/2-v+t:d=ug(n,e,t);p=Ze(i,o,r),h=e==="left"?-Ke:Ke}return{titleX:d,titleY:p,maxWidth:f,rotation:h}}class ar extends bl{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=tn(t,Number.POSITIVE_INFINITY),e=tn(e,Number.NEGATIVE_INFINITY),i=tn(i,Number.POSITIVE_INFINITY),r=tn(r,Number.NEGATIVE_INFINITY),{min:tn(t,i),max:tn(e,r),minDefined:xe(t),maxDefined:xe(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(i=Math.max(i,o.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:tn(e,tn(i,e)),max:tn(i,tn(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Gt(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=f3(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?fg(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Pz(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Gt(this.options.afterUpdate,[this])}beforeSetDimensions(){Gt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Gt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Gt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Gt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=Gt(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){Gt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Gt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=hg(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,d=jn(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/i:d/(i-1),h+6>a&&(a=d/(i-(t.offset?.5:1)),l=this.maxHeight-hs(t.grid)-e.padding-dg(t.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=Th(Math.min(Math.asin(jn((u.highest.height+6)/a,-1,1)),Math.asin(jn(l/c,-1,1))-Math.asin(jn(f/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Gt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Gt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=dg(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=hs(s)+l):(t.height=this.maxHeight,t.width=hs(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),d=i.padding*2,p=ai(this.labelRotation),m=Math.cos(p),v=Math.sin(p);if(a){const C=i.mirror?0:v*h.width+m*f.height;t.height=Math.min(this.maxHeight,t.height+C+d)}else{const C=i.mirror?0:m*h.width+v*f.height;t.width=Math.min(this.maxWidth,t.width+C+d)}this._calculatePadding(c,u,v,m)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,d=0;l?c?(f=r*t.width,d=i*e.height):(f=i*t.height,d=r*e.width):s==="start"?d=e.width:s==="end"?f=t.width:s!=="inner"&&(f=t.width/2,d=e.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-h+o)*this.width/(this.width-h),0)}else{let u=e.height/2,h=t.height/2;s==="start"?(u=0,h=t.height):s==="end"&&(u=e.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Gt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Kt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=fg(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(e/hg(e,i));let c=0,u=0,h,f,d,p,m,v,C,E,F,q,j;for(h=0;h<e;h+=l){if(p=t[h].label,m=this._resolveTickFontOptions(h),r.font=v=m.string,C=s[v]=s[v]||{data:{},gc:[]},E=m.lineHeight,F=q=0,!Kt(p)&&!le(p))F=Da(r,C.data,C.gc,F,p),q=E;else if(le(p))for(f=0,d=p.length;f<d;++f)j=p[f],!Kt(j)&&!le(j)&&(F=Da(r,C.data,C.gc,F,j),q+=E);o.push(F),a.push(q),c=Math.max(F,c),u=Math.max(q,u)}Fz(s,e);const A=o.indexOf(c),R=a.indexOf(u),L=rt=>({width:o[rt]||0,height:a[rt]||0});return{first:L(0),last:L(e-1),widest:L(A),highest:L(R),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return H5(this._alignToPixels?Pi(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=Hz(this.getContext(),t,i))}return this.$context||(this.$context=jz(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ai(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=hs(s),d=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,v=m/2,C=function(W){return Pi(i,W,m)};let E,F,q,j,A,R,L,rt,pt,ut,kt,Dt;if(o==="top")E=C(this.bottom),R=this.bottom-f,rt=E-v,ut=C(t.top)+v,Dt=t.bottom;else if(o==="bottom")E=C(this.top),ut=t.top,Dt=C(t.bottom)-v,R=E+v,rt=this.top+f;else if(o==="left")E=C(this.right),A=this.right-f,L=E-v,pt=C(t.left)+v,kt=t.right;else if(o==="right")E=C(this.left),pt=t.left,kt=C(t.right)-v,A=E+v,L=this.left+f;else if(e==="x"){if(o==="center")E=C((t.top+t.bottom)/2+.5);else if(Ft(o)){const W=Object.keys(o)[0],H=o[W];E=C(this.chart.scales[W].getPixelForValue(H))}ut=t.top,Dt=t.bottom,R=E+v,rt=R+f}else if(e==="y"){if(o==="center")E=C((t.left+t.right)/2);else if(Ft(o)){const W=Object.keys(o)[0],H=o[W];E=C(this.chart.scales[W].getPixelForValue(H))}A=E-v,L=A-f,pt=t.left,kt=t.right}const U=Vt(r.ticks.maxTicksLimit,h),V=Math.max(1,Math.ceil(h/U));for(F=0;F<h;F+=V){const W=this.getContext(F),H=s.setContext(W),z=a.setContext(W),G=H.lineWidth,st=H.color,Z=z.dash||[],ct=z.dashOffset,Nt=H.tickWidth,Wt=H.tickColor,mt=H.tickBorderDash||[],y=H.tickBorderDashOffset;q=Bz(this,F,l),q!==void 0&&(j=Pi(i,q,G),c?A=L=pt=kt=j:R=rt=ut=Dt=j,d.push({tx1:A,ty1:R,tx2:L,ty2:rt,x1:pt,y1:ut,x2:kt,y2:Dt,width:G,color:st,borderDash:Z,borderDashOffset:ct,tickWidth:Nt,tickColor:Wt,tickBorderDash:mt,tickBorderDashOffset:y}))}return this._ticksLength=h,this._borderValue=E,d}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,f=hs(i.grid),d=f+u,p=h?-u:d,m=-ai(this.labelRotation),v=[];let C,E,F,q,j,A,R,L,rt,pt,ut,kt,Dt="middle";if(r==="top")A=this.bottom-p,R=this._getXAxisLabelAlignment();else if(r==="bottom")A=this.top+p,R=this._getXAxisLabelAlignment();else if(r==="left"){const V=this._getYAxisLabelAlignment(f);R=V.textAlign,j=V.x}else if(r==="right"){const V=this._getYAxisLabelAlignment(f);R=V.textAlign,j=V.x}else if(e==="x"){if(r==="center")A=(t.top+t.bottom)/2+d;else if(Ft(r)){const V=Object.keys(r)[0],W=r[V];A=this.chart.scales[V].getPixelForValue(W)+d}R=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")j=(t.left+t.right)/2-d;else if(Ft(r)){const V=Object.keys(r)[0],W=r[V];j=this.chart.scales[V].getPixelForValue(W)}R=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(l==="start"?Dt="top":l==="end"&&(Dt="bottom"));const U=this._getLabelSizes();for(C=0,E=a.length;C<E;++C){F=a[C],q=F.label;const V=s.setContext(this.getContext(C));L=this.getPixelForTick(C)+s.labelOffset,rt=this._resolveTickFontOptions(C),pt=rt.lineHeight,ut=le(q)?q.length:1;const W=ut/2,H=V.color,z=V.textStrokeColor,G=V.textStrokeWidth;let st=R;o?(j=L,R==="inner"&&(C===E-1?st=this.options.reverse?"left":"right":C===0?st=this.options.reverse?"right":"left":st="center"),r==="top"?c==="near"||m!==0?kt=-ut*pt+pt/2:c==="center"?kt=-U.highest.height/2-W*pt+pt:kt=-U.highest.height+pt/2:c==="near"||m!==0?kt=pt/2:c==="center"?kt=U.highest.height/2-W*pt:kt=U.highest.height-ut*pt,h&&(kt*=-1),m!==0&&!V.showLabelBackdrop&&(j+=pt/2*Math.sin(m))):(A=L,kt=(1-ut)*pt/2);let Z;if(V.showLabelBackdrop){const ct=hn(V.backdropPadding),Nt=U.heights[C],Wt=U.widths[C];let mt=kt-ct.top,y=0-ct.left;switch(Dt){case"middle":mt-=Nt/2;break;case"bottom":mt-=Nt;break}switch(R){case"center":y-=Wt/2;break;case"right":y-=Wt;break}Z={left:y,top:mt,width:Wt+ct.width,height:Nt+ct.height,color:V.backdropColor}}v.push({label:q,font:rt,textOffset:kt,options:{rotation:m,color:H,strokeColor:z,strokeWidth:G,textAlign:st,textBaseline:Dt,translation:[j,A],backdrop:Z}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ai(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,l=o.widest.width;let c,u;return e==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):e==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const l=r[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=Pi(t,this.left,o)-o/2,u=Pi(t,this.right,a)+a/2,h=f=l):(h=Pi(t,this.top,o)-o/2,f=Pi(t,this.bottom,a)+a/2,c=u=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,h),e.lineTo(u,f),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Ph(i,r);const s=this.getLabelItems(t);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Wr(i,c,0,u,l,a)}r&&Dh(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const s=En(i.font),o=hn(i.padding),a=i.align;let l=s.lineHeight/2;e==="bottom"||e==="center"||Ft(e)?(l+=o.bottom,le(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=Wz(this,l,e,a);Wr(t,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:f,textAlign:Vz(a,e,r),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Vt(t.grid&&t.grid.z,-1),r=Vt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ar.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const a=e[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return En(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Co{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;Kz(e)&&(i=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,Uz(t,o,i),this.override&&he.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in he[r]&&(delete he[r][i],this.override&&delete rr[i])}}function Uz(n,t,e){const i=Us(Object.create(null),[e?he.get(e):{},he.get(t),n.defaults]);he.set(t,i),n.defaultRoutes&&qz(t,n.defaultRoutes),n.descriptors&&he.describe(t,n.descriptors)}function qz(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");he.route(s,r,l,a)})}function Kz(n){return"id"in n&&"defaults"in n}class Jz{constructor(){this.controllers=new Co(my,"datasets",!0),this.elements=new Co(bl,"elements"),this.plugins=new Co(Object,"plugins"),this.scales=new Co(ar,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Ee(r,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const r=Ah(t);Gt(i["before"+r],[],i),e[t](i),Gt(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var kn=new Jz;class Gz{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,i);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,r){r=r||{};for(const s of t){const o=s.plugin,a=o[i],l=[e,r,s.options];if(Gt(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Kt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Vt(i.options&&i.options.plugins,{}),s=Yz(i);return r===!1&&!e?[]:Qz(t,s,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function Yz(n){const t={},e=[],i=Object.keys(kn.plugins.items);for(let s=0;s<i.length;s++)e.push(kn.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function Xz(n,t){return!t&&n===!1?null:n===!0?{}:n}function Qz(n,{plugins:t,localIds:e},i,r){const s=[],o=n.getContext();for(const a of t){const l=a.id,c=Xz(i[l],r);c!==null&&s.push({plugin:a,options:Zz(n.config,{plugin:a,local:e[l]},c,o)})}return s}function Zz(n,{plugin:t,local:e},i,r){const s=n.pluginScopeKeys(t),o=n.getOptionScopes(i,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Su(n,t){const e=he.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function t4(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function e4(n,t){return n===t?"_index_":"_value_"}function n4(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function La(n,t){if(n==="x"||n==="y"||n==="r"||(n=t.axis||n4(t.position)||n.length>1&&La(n[0].toLowerCase(),t),n))return n;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function i4(n,t){const e=rr[n.type]||{scales:{}},i=t.scales||{},r=Su(n.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Ft(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=La(o,a),c=e4(l,r),u=e.scales||{};s[o]=Es(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||Su(a,t),u=(rr[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=t4(h,l),d=o[f+"AxisID"]||f;s[d]=s[d]||Object.create(null),Es(s[d],[{axis:f},i[d],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];Es(a,[he.scales[a.type],he.scale])}),s}function _y(n){const t=n.options||(n.options={});t.plugins=Vt(t.plugins,{}),t.scales=i4(n,t)}function ky(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function r4(n){return n=n||{},n.data=ky(n.data),_y(n),n}const pg=new Map,My=new Set;function Oo(n,t){let e=pg.get(n);return e||(e=t(),pg.set(n,e),My.add(e)),e}const fs=(n,t,e)=>{const i=Vr(t,e);i!==void 0&&n.add(i)};class s4{constructor(t){this._config=r4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ky(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),_y(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Oo(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Oo(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Oo(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Oo(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(h=>fs(l,t,h))),u.forEach(h=>fs(l,r,h)),u.forEach(h=>fs(l,rr[s]||{},h)),u.forEach(h=>fs(l,he,h)),u.forEach(h=>fs(l,wu,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),My.has(e)&&o.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,rr[e]||{},he.datasets[e]||{},{type:e},he,wu]}resolveNamedOptions(t,e,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=gg(this._resolverCache,t,r);let l=o;if(a4(o,e)){s.$shared=!1,i=wi(i)?i():i;const c=this.createResolver(t,i,a);l=Ur(o,i,c)}for(const c of e)s[c]=l[c];return s}createResolver(t,e,i=[""],r){const{resolver:s}=gg(this._resolverCache,t,i);return Ft(e)?Ur(s,e,void 0,r):s}}function gg(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let s=i.get(r);return s||(s={resolver:Lh(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const o4=n=>Ft(n)&&Object.getOwnPropertyNames(n).reduce((t,e)=>t||wi(n[e]),!1);function a4(n,t){const{isScriptable:e,isIndexable:i}=uy(n);for(const r of t){const s=e(r),o=i(r),a=(o||s)&&n[r];if(s&&(wi(a)||o4(a))||o&&le(a))return!0}return!1}var l4="4.2.1";const c4=["top","bottom","left","right","chartArea"];function mg(n,t){return n==="top"||n==="bottom"||c4.indexOf(n)===-1&&t==="x"}function bg(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function yg(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Gt(e&&e.onComplete,[n],t)}function u4(n){const t=n.chart,e=t.options.animation;Gt(e&&e.onProgress,[n],t)}function Cy(n){return py()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Bo={},xg=n=>{const t=Cy(n);return Object.values(Bo).filter(e=>e.canvas===t).pop()};function h4(n,t,e){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=t){const o=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=o)}}}function f4(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function d4(n){const{xScale:t,yScale:e}=n;if(t&&e)return{left:t.left,right:t.right,top:e.top,bottom:e.bottom}}let _u=class{static defaults=he;static instances=Bo;static overrides=rr;static registry=kn;static version=l4;static getChart=xg;static register(...t){kn.add(...t),vg()}static unregister(...t){kn.remove(...t),vg()}constructor(t,e){const i=this.config=new s4(e),r=Cy(t),s=xg(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||$z(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=E5(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Gz,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=q5(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Bo[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}zn.listen(this,"complete",yg),zn.listen(this,"progress",u4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:s}=this;return Kt(t)?e&&s?s:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return kn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Vp(this.canvas,this.ctx),this}stop(){return zn.stop(this),this}resize(t,e){zn.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,qp(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Gt(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Ee(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];e&&(s=s.concat(Object.keys(e).map(o=>{const a=e[o],l=La(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ee(s,o=>{const a=o.options,l=a.id,c=La(l,a),u=Vt(a.type,o.dtype);(a.position===void 0||mg(a.position,c)!==mg(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const f=kn.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,t)}),Ee(r,(o,a)=>{o||delete i[a]}),Ee(i,o=>{li.configure(this,o,o.options),li.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,s)=>r.index-s.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(bg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const s=e[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Su(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=kn.getController(a),{datasetElementType:c,dataElementType:u}=he.datasets[a];Object.assign(l,{dataElementType:kn.getElement(u),datasetElementType:c&&kn.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ee(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Ee(s,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(bg("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ee(this.scales,t=>{li.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Ip(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of e){const o=i==="_removeElements"?-s:s;h4(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=s=>new Set(t.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<e;s++)if(!Ip(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;li.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Ee(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,wi(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(zn.has(this)?this.attached&&!zn.running(this)&&zn.start(this):(this.draw(),yg({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resize(i,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,s;for(r=0,s=e.length;r<s;++r){const o=e[r];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,r=!i.disabled,s=d4(t)||this.chartArea,o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Ph(e,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),t.controller.draw(),r&&Dh(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return ay(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const s=uz.modes[e];return typeof s=="function"?s(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=is(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);un(e)?(s.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),zn.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Vp(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Bo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(s,o)=>{e.addEventListener(this,s,o),t[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ee(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},r=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){Ee(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ee(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let s,o,a,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Pp(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(e,t),a=i?t:s(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:s}=this,o=e,a=this._getActiveElements(t,r,i,o),l=L5(t),c=f4(t,this._lastEvent,i,l);i&&(this._lastEvent=null,Gt(s.onHover,[t,a,this],this),l&&Gt(s.onClick,[t,a,this],this));const u=!Pp(a,r);return(u||e)&&(this._active=a,this._updateHoverStyles(a,r,e)),this._lastEvent=c,u}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}};function vg(){return Ee(_u.instances,n=>n._plugins.invalidate())}function Oy(n,t){const{x:e,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return n.horizontal?(h=o/2,a=Math.min(e,r),l=Math.max(e,r),c=i-h,u=i+h):(h=s/2,a=e-h,l=e+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function ci(n,t,e,i){return n?0:jn(t,e,i)}function p4(n,t,e){const i=n.options.borderWidth,r=n.borderSkipped,s=cy(i);return{t:ci(r.top,s.top,0,e),r:ci(r.right,s.right,0,t),b:ci(r.bottom,s.bottom,0,e),l:ci(r.left,s.left,0,t)}}function g4(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Nh(r),o=Math.min(t,e),a=n.borderSkipped,l=i||Ft(r);return{topLeft:ci(!l||a.top||a.left,s.topLeft,0,o),topRight:ci(!l||a.top||a.right,s.topRight,0,o),bottomLeft:ci(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:ci(!l||a.bottom||a.right,s.bottomRight,0,o)}}function m4(n){const t=Oy(n),e=t.right-t.left,i=t.bottom-t.top,r=p4(n,e/2,i/2),s=g4(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Oc(n,t,e,i){const r=t===null,s=e===null,a=n&&!(r&&s)&&Oy(n,i);return a&&(r||kr(t,a.left,a.right))&&(s||kr(e,a.top,a.bottom))}function b4(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function y4(n,t){n.rect(t.x,t.y,t.w,t.h)}function Ac(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}class x4 extends bl{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=m4(this),a=b4(o.radius)?Ih:y4;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,Ac(o,e,s)),t.clip(),a(t,Ac(s,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Ac(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return Oc(this,t,e,i)}inXRange(t,e){return Oc(this,t,null,e)}inYRange(t,e){return Oc(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const wg=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},v4=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Sg extends bl{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Gt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=En(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=wg(i,s);let c,u;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=t;s.textAlign="left",s.textBaseline="middle";let f=-1,d=-u;return this.legendItems.forEach((p,m)=>{const v=i+e/2+s.measureText(p.text).width;(m===0||c[c.length-1]+v+2*a>o)&&(h+=u,c[c.length-(m>0?0:1)]=0,d+=u,f++),l[m]={left:0,top:d,row:f,width:v,height:r},c[c.length-1]+=v+a}),h}_fitCols(t,e,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let h=a,f=0,d=0,p=0,m=0;return this.legendItems.forEach((v,C)=>{const{itemWidth:E,itemHeight:F}=w4(i,e,s,v,r);C>0&&d+F+2*a>u&&(h+=f+a,c.push({width:f,height:d}),p+=f+a,m++,f=d=0),l[C]={left:p,top:d,col:m,width:E,height:F},f=Math.max(f,E),d+=F+a}),h+=f,c.push({width:f,height:d}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,o=vc(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ze(i,this.left+r,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=Ze(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+t+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Ze(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=Ze(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Ph(t,this),this._draw(),Dh(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,a=he.color,l=vc(t.rtl,this.left,this.width),c=En(o.font),{padding:u}=o,h=c.size,f=h/2;let d;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:p,boxHeight:m,itemHeight:v}=wg(o,h),C=function(A,R,L){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;r.save();const rt=Vt(L.lineWidth,1);if(r.fillStyle=Vt(L.fillStyle,a),r.lineCap=Vt(L.lineCap,"butt"),r.lineDashOffset=Vt(L.lineDashOffset,0),r.lineJoin=Vt(L.lineJoin,"miter"),r.lineWidth=rt,r.strokeStyle=Vt(L.strokeStyle,a),r.setLineDash(Vt(L.lineDash,[])),o.usePointStyle){const pt={radius:m*Math.SQRT2/2,pointStyle:L.pointStyle,rotation:L.rotation,borderWidth:rt},ut=l.xPlus(A,p/2),kt=R+f;r3(r,pt,ut,kt,o.pointStyleWidth&&p)}else{const pt=R+Math.max((h-m)/2,0),ut=l.leftForLtr(A,p),kt=Nh(L.borderRadius);r.beginPath(),Object.values(kt).some(Dt=>Dt!==0)?Ih(r,{x:ut,y:pt,w:p,h:m,radius:kt}):r.rect(ut,pt,p,m),r.fill(),rt!==0&&r.stroke()}r.restore()},E=function(A,R,L){Wr(r,L.text,A,R+v/2,c,{strikethrough:L.hidden,textAlign:l.textAlign(L.textAlign)})},F=this.isHorizontal(),q=this._computeTitleHeight();F?d={x:Ze(s,this.left+u,this.right-i[0]),y:this.top+u+q,line:0}:d={x:this.left+u,y:Ze(s,this.top+q+u,this.bottom-e[0].height),line:0},$3(this.ctx,t.textDirection);const j=v+u;this.legendItems.forEach((A,R)=>{r.strokeStyle=A.fontColor,r.fillStyle=A.fontColor;const L=r.measureText(A.text).width,rt=l.textAlign(A.textAlign||(A.textAlign=o.textAlign)),pt=p+f+L;let ut=d.x,kt=d.y;l.setWidth(this.width),F?R>0&&ut+pt+u>this.right&&(kt=d.y+=j,d.line++,ut=d.x=Ze(s,this.left+u,this.right-i[d.line])):R>0&&kt+j>this.bottom&&(ut=d.x=ut+e[d.line].width+u,d.line++,kt=d.y=Ze(s,this.top+q+u,this.bottom-e[d.line].height));const Dt=l.x(ut);if(C(Dt,kt,A),ut=K5(rt,ut+p+f,F?ut+pt:this.right,t.rtl),E(l.x(ut),kt,A),F)d.x+=pt+u;else if(typeof A.text!="string"){const U=c.lineHeight;d.y+=Ay(A,U)}else d.y+=j}),P3(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=En(e.font),r=hn(e.padding);if(!e.display)return;const s=vc(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=i.size/2,c=r.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=Ze(t.align,h,this.right-f);else{const p=this.columnSizes.reduce((m,v)=>Math.max(m,v.height),0);u=c+Ze(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const d=Ze(a,h,h+f);o.textAlign=s.textAlign(ry(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,Wr(o,e.text,d,u,i)}_computeTitleHeight(){const t=this.options.title,e=En(t.font),i=hn(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(kr(t,this.left,this.right)&&kr(e,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],kr(t,r.left,r.left+r.width)&&kr(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!k4(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,s=v4(r,i);r&&!s&&Gt(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&Gt(e.onHover,[t,i,this],this)}else i&&Gt(e.onClick,[t,i,this],this)}}function w4(n,t,e,i,r){const s=S4(i,n,t,e),o=_4(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}function S4(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+i.measureText(r).width}function _4(n,t,e){let i=n;return typeof t.text!="string"&&(i=Ay(t,e)),i}function Ay(n,t){const e=n.text?n.text.length+.5:0;return t*e}function k4(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var M4={id:"legend",_element:Sg,start(n,t,e){const i=n.legend=new Sg({ctx:n.ctx,options:e,chart:n});li.configure(n,i,e),li.addBox(n,i)},stop(n){li.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;li.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),u=hn(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const C4=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function O4(n,t,e,i){const r=n.indexOf(t);if(r===-1)return C4(n,t,e,i);const s=n.lastIndexOf(t);return r!==s?e:r}const A4=(n,t)=>n===null?null:jn(Math.round(n),0,t);function _g(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class T4 extends ar{static id="category";static defaults={ticks:{callback:_g}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:s}of e)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Kt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:O4(i,t,Vt(e,t),this._addedLabels),A4(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){return _g.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function E4(n,t){const e=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=n,d=s||1,p=u-1,{min:m,max:v}=t,C=!Kt(o),E=!Kt(a),F=!Kt(c),q=(v-m)/(h+1);let j=Lp((v-m)/p/d)*d,A,R,L,rt;if(j<1e-14&&!C&&!E)return[{value:m},{value:v}];rt=Math.ceil(v/j)-Math.floor(m/j),rt>p&&(j=Lp(rt*j/p/d)*d),Kt(l)||(A=Math.pow(10,l),j=Math.ceil(j*A)/A),r==="ticks"?(R=Math.floor(m/j)*j,L=Math.ceil(v/j)*j):(R=m,L=v),C&&E&&s&&B5((a-o)/s,j/1e3)?(rt=Math.round(Math.min((a-o)/j,u)),j=(a-o)/rt,R=o,L=a):F?(R=C?o:R,L=E?a:L,rt=c-1,j=(L-R)/rt):(rt=(L-R)/j,Ro(rt,Math.round(rt),j/1e3)?rt=Math.round(rt):rt=Math.ceil(rt));const pt=Math.max(Rp(j),Rp(R));A=Math.pow(10,Kt(l)?pt:l),R=Math.round(R*A)/A,L=Math.round(L*A)/A;let ut=0;for(C&&(f&&R!==o?(e.push({value:o}),R<o&&ut++,Ro(Math.round((R+ut*j)*A)/A,o,kg(o,q,n))&&ut++):R<o&&ut++);ut<rt;++ut)e.push({value:Math.round((R+ut*j)*A)/A});return E&&f&&L!==a?e.length&&Ro(e[e.length-1].value,a,kg(a,q,n))?e[e.length-1].value=a:e.push({value:a}):(!E||L===a)&&e.push({value:L}),e}function kg(n,t,{horizontal:e,minRotation:i}){const r=ai(i),s=(e?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+n).length;return Math.min(t/s,o)}class Ra extends ar{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Kt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=e?r:l,a=l=>s=i?s:l;if(t){const l=pi(r),c=pi(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,o=E4(r,s);return t.bounds==="ticks"&&Zb(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return $h(t,this.chart.options.locale,this.options.ticks.format)}}class $4 extends Ra{static id="linear";static defaults={ticks:{callback:gl.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=xe(t)?t:0,this.max=xe(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=ai(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Ks=n=>Math.floor(oi(n)),Ii=(n,t)=>Math.pow(10,Ks(n)+t);function Mg(n){return n/Math.pow(10,Ks(n))===1}function Cg(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function P4(n,t){const e=t-n;let i=Ks(e);for(;Cg(n,t,i)>10;)i++;for(;Cg(n,t,i)<10;)i--;return Math.min(i,Ks(n))}function D4(n,{min:t,max:e}){t=tn(n.min,t);const i=[],r=Ks(t);let s=P4(t,e),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),f=tn(n.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;f<e;)i.push({value:f,major:Mg(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),f=Math.round((l+u+h*Math.pow(10,s))*o)/o;const d=tn(n.max,f);return i.push({value:d,major:Mg(d),significand:h}),i}class WF extends ar{static id="logarithmic";static defaults={ticks:{callback:gl.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Ra.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return xe(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=xe(t)?Math.max(0,t):null,this.max=xe(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!xe(this._userMin)&&(this.min=t===Ii(this.min,0)?Ii(this.min,-1):Ii(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=t?i:a,o=a=>r=e?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Ii(i,-1)),o(Ii(r,1)))),i<=0&&s(Ii(r,-1)),r<=0&&o(Ii(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=D4(e,this);return t.bounds==="ticks"&&Zb(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":$h(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=oi(t),this._valueRange=oi(this.max)-oi(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(oi(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function ku(n){const t=n.ticks;if(t.display&&n.display){const e=hn(t.backdropPadding);return Vt(t.font&&t.font.size,he.font.size)+e.height}return 0}function I4(n,t,e){return e=le(e)?e:[e],{w:i3(n,t.string,e),h:e.length*t.lineHeight}}function Og(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function N4(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?je/s:0;for(let l=0;l<s;l++){const c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+r[l],a),h=En(c.font),f=I4(n.ctx,h,n._pointLabels[l]);i[l]=f;const d=Cn(n.getIndexAngle(l)+a),p=Math.round(Th(d)),m=Og(p,u.x,f.w,0,180),v=Og(p,u.y,f.h,90,270);L4(e,t,d,m,v)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=R4(n,i,r)}function L4(n,t,e,i,r){const s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,n.t=Math.min(n.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function R4(n,t,e){const i=[],r=n._pointLabels.length,s=n.options,o=ku(s)/2,a=n.drawingArea,l=s.pointLabels.centerPointLabels?je/r:0;for(let c=0;c<r;c++){const u=n.getPointPosition(c,a+o+e[c],l),h=Math.round(Th(Cn(u.angle+Ke))),f=t[c],d=F4(u.y,f.h,h),p=z4(h),m=B4(u.x,f.w,p);i.push({x:u.x,y:d,textAlign:p,left:m,top:d,right:m+f.w,bottom:d+f.h})}return i}function z4(n){return n===0||n===180?"center":n<180?"left":"right"}function B4(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function F4(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function j4(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const s=i.setContext(n.getPointLabelContext(r)),o=En(s.font),{x:a,y:l,textAlign:c,left:u,top:h,right:f,bottom:d}=n._pointLabelItems[r],{backdropColor:p}=s;if(!Kt(p)){const m=Nh(s.borderRadius),v=hn(s.backdropPadding);e.fillStyle=p;const C=u-v.left,E=h-v.top,F=f-u+v.width,q=d-h+v.height;Object.values(m).some(j=>j!==0)?(e.beginPath(),Ih(e,{x:C,y:E,w:F,h:q,radius:m}),e.fill()):e.fillRect(C,E,F,q)}Wr(e,n._pointLabels[r],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}function Ty(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,Pn);else{let s=n.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,t),r.lineTo(s.x,s.y)}}function H4(n,t,e,i,r){const s=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),Ty(n,e,o,i),s.closePath(),s.stroke(),s.restore())}function V4(n,t,e){return is(n,{label:e,index:t,type:"pointLabel"})}class UF extends Ra{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:gl.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=hn(ku(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=xe(t)&&!isNaN(t)?t:0,this.max=xe(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ku(this.options))}generateTickLabels(t){Ra.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=Gt(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?N4(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){const e=Pn/(this._pointLabels.length||1),i=this.options.startAngle||0;return Cn(t*e+ai(i))}getDistanceFromCenterForValue(t){if(Kt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Kt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return V4(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-Ke+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Ty(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:s}=e,o=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&j4(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),d=r.setContext(f),p=s.setContext(f);H4(this,d,l,o,p)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(t.lineWidth=f,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!e.reverse)return;const c=i.setContext(this.getContext(l)),u=En(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const h=hn(c.backdropPadding);t.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}Wr(t,a.label,0,-s,u,{color:c.color})}),t.restore()}drawTitle(){}}const yl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qe=Object.keys(yl);function W4(n,t){return n-t}function Ag(n,t){if(Kt(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),xe(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(r&&(o=r==="week"&&(Pa(s)||s===!0)?e.startOf(o,"isoWeek",s):e.startOf(o,r)),+o)}function Tg(n,t,e,i){const r=qe.length;for(let s=qe.indexOf(n);s<r-1;++s){const o=yl[qe[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return qe[s]}return qe[r-1]}function U4(n,t,e,i,r){for(let s=qe.length-1;s>=qe.indexOf(e);s--){const o=qe[s];if(yl[o].common&&n._adapter.diff(r,i,o)>=t-1)return o}return qe[e?qe.indexOf(e):0]}function q4(n){for(let t=qe.indexOf(n)+1,e=qe.length;t<e;++t)if(yl[qe[t]].common)return qe[t]}function Eg(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=Eh(e,t),s=e[i]>=t?e[i]:e[r];n[s]=!0}}function K4(n,t,e,i){const r=n._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function $g(n,t,e){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return s===0||!e?i:K4(n,i,r,e)}class Pg extends ar{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new sz._date(t.adapters.date);r.init(e),Es(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Ag(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=xe(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),s=xe(s)&&!isNaN(s)?s:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=W5(r,s,o);return this._unit=e.unit||(i.autoSkip?Tg(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):U4(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:q4(this._unit),this.initOffsets(r),t.reverse&&a.reverse(),$g(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,s;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=jn(e,0,o),i=jn(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Tg(s.minUnit,e,i,this._getLabelCapacity(e)),a=Vt(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Pa(l)||l===!0,u={};let h=e,f,d;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,d=0;f<i;f=+t.add(f,a,o),d++)Eg(u,f,p);return(f===i||r.bounds==="ticks"||d===1)&&Eg(u,f,p),Object.keys(u).sort((m,v)=>m-v).map(m=>+m)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,s=this._unit,o=e||r[s];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,r){const s=this.options,o=s.ticks.callback;if(o)return Gt(o,[t,e,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=i[e],d=c&&h&&f&&f.major;return this._adapter.format(t,r||(d?h:u))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=ai(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,s=this._tickFormatFunction(t,0,$g(this,[t],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(Ag(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return ey(t.sort(W4))}}function Ao(n,t,e){let i=0,r=n.length-1,s,o,a,l;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=vu(n,"pos",t)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=vu(n,"time",t)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);const c=o-s;return c?a+(l-a)*(t-s)/c:a}class qF extends Pg{static id="timeseries";static defaults=Pg.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ao(e,this.min),this._tableRange=Ao(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Ao(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Ao(this._table,i*this._tableRange+this._minPos,!0)}}const J4=St("<canvas></canvas>",2),G4=n=>{const t=(()=>{const i=J4.cloneNode(!0);return Qg(r=>document.adoptNode(r),i),i})();let e;return sr(()=>{e?.destroy(),_u.register(n.plugins),e=new _u(t,{type:n.type,data:n.data,options:n.options}),e.resize(e.width,(n.data.labels?.length??0)*32+96)}),t};var Y4="__lodash_hash_undefined__";function X4(n){return this.__data__.set(n,Y4),this}var Q4=X4;function Z4(n){return this.__data__.has(n)}var tB=Z4,eB=Eu,nB=Q4,iB=tB;function za(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new eB;++t<e;)this.add(n[t])}za.prototype.add=za.prototype.push=nB;za.prototype.has=iB;var jh=za;function rB(n,t,e,i){for(var r=n.length,s=e+(i?1:-1);i?s--:++s<r;)if(t(n[s],s,n))return s;return-1}var sB=rB;function oB(n){return n!==n}var aB=oB;function lB(n,t,e){for(var i=e-1,r=n.length;++i<r;)if(n[i]===t)return i;return-1}var cB=lB,uB=sB,hB=aB,fB=cB;function dB(n,t,e){return t===t?fB(n,t,e):uB(n,hB,e)}var pB=dB,gB=pB;function mB(n,t){var e=n==null?0:n.length;return!!e&&gB(n,t,0)>-1}var Hh=mB;function bB(n,t,e){for(var i=-1,r=n==null?0:n.length;++i<r;)if(e(t,n[i]))return!0;return!1}var Vh=bB;function yB(n,t){return n.has(t)}var Wh=yB,xB=jh,vB=Hh,wB=Vh,SB=Xs,_B=Gs,Dg=Wh,kB=Math.min;function MB(n,t,e){for(var i=e?wB:vB,r=n[0].length,s=n.length,o=s,a=Array(s),l=1/0,c=[];o--;){var u=n[o];o&&t&&(u=SB(u,_B(t))),l=kB(u.length,l),a[o]=!e&&(t||r>=120&&u.length>=120)?new xB(o&&u):void 0}u=n[0];var h=-1,f=a[0];t:for(;++h<r&&c.length<l;){var d=u[h],p=t?t(d):d;if(d=e||d!==0?d:0,!(f?Dg(f,p):i(c,p,e))){for(o=s;--o;){var m=a[o];if(!(m?Dg(m,p):i(n[o],p,e)))continue t}f&&f.push(p),c.push(d)}}return c}var CB=MB,OB=Lu;function AB(n){return OB(n)?n:[]}var TB=AB,EB=Xs,$B=CB,PB=zu,DB=TB,IB=PB(function(n){var t=EB(n,DB);return t.length&&t[0]===n[0]?$B(t):[]}),Ig=IB;function NB(){}var LB=NB;function RB(n){var t=-1,e=Array(n.size);return n.forEach(function(i){e[++t]=i}),e}var Ey=RB,Tc=Mm,zB=LB,BB=Ey,FB=1/0,jB=Tc&&1/BB(new Tc([,-0]))[1]==FB?function(n){return new Tc(n)}:zB,HB=jB,VB=jh,WB=Hh,UB=Vh,qB=Wh,KB=HB,JB=Ey,GB=200;function YB(n,t,e){var i=-1,r=WB,s=n.length,o=!0,a=[],l=a;if(e)o=!1,r=UB;else if(s>=GB){var c=t?null:KB(n);if(c)return JB(c);o=!1,r=qB,l=new VB}else l=t?[]:a;t:for(;++i<s;){var u=n[i],h=t?t(u):u;if(u=e||u!==0?u:0,o&&h===h){for(var f=l.length;f--;)if(l[f]===h)continue t;t&&l.push(h),a.push(u)}else r(l,h,e)||(l!==a&&l.push(h),a.push(u))}return a}var XB=YB,QB=XB;function ZB(n){return n&&n.length?QB(n):[]}var $y=ZB;var tF=jh,eF=Hh,nF=Vh,iF=Xs,rF=Gs,sF=Wh,oF=200;function aF(n,t,e,i){var r=-1,s=eF,o=!0,a=n.length,l=[],c=t.length;if(!a)return l;e&&(t=iF(t,rF(e))),i?(s=nF,o=!1):t.length>=oF&&(s=sF,o=!1,t=new tF(t));t:for(;++r<a;){var u=n[r],h=e==null?u:e(u);if(u=i||u!==0?u:0,o&&h===h){for(var f=c;f--;)if(t[f]===h)continue t;l.push(u)}else s(t,h,i)||l.push(u)}return l}var lF=aF,cF=lF,uF=Im,hF=zu,Ng=Lu,fF=hF(function(n,t){return Ng(n)?cF(n,uF(t,1,Ng,!0)):[]}),dF=fF;const pF=St('<article><header><h2>Choose tag</h2></header><ul class="tags"></ul><footer><nav><ul><li></li></ul><ul><li><input type="search" placeholder="enter keyword"></li></ul><ul><li></li></ul></nav></footer></article>',25),gF=St("<li></li>",2),mF=n=>{const t=()=>$y(dF([...Object.values(Mt.store.keywords).flatMap(({tags:l})=>l??[]),...Object.keys(Mt.store.keywords).map(l=>l.toLowerCase())],Mt.store.cv.profile.tags??[])).sort().filter(l=>l.includes(e())),[e,i]=ee(""),[r,s]=ee(t());function o(l=r()[0]){n.callback(l),oe.back()}function a(){oe.back()}return()=>(()=>{const l=pF.cloneNode(!0),c=l.firstChild,u=c.nextSibling,h=u.nextSibling,f=h.firstChild,d=f.firstChild,p=d.firstChild,m=d.nextSibling,v=m.firstChild,C=v.firstChild,E=m.nextSibling,F=E.firstChild;return l.style.setProperty("width","100%"),u.style.setProperty("flex-wrap","nowrap"),u.style.setProperty("overflow","scroll"),u.style.setProperty("scrollbar-width","none"),J(u,I(Mr,{get each(){return r()},children:q=>(()=>{const j=gF.cloneNode(!0);return j.$$click=()=>{n.callback(q),oe.back()},j.style.setProperty("cursor","pointer"),J(j,q),j})()})),J(p,I(Lt,{icon:"close",action:()=>oe.back()})),C.$$keyup=({key:q,target:j})=>{if(j instanceof HTMLInputElement){switch(q){case"Enter":e().length>2&&o();return;case"Escape":a();return}i(j.value),s(t())}},C.autofocus=!0,J(F,I(Lt,{icon:"done",action:o,get disabled(){return e().length<3}})),Oe(()=>C.value=e()),l})()};Si(["keyup","click"]);const bF=St("<article><header><h2>Profile tuning</h2></header><footer><nav><ul></ul><ul><li></li></ul></nav></footer></article>",16),yF=()=>()=>(()=>{const n=bF.cloneNode(!0),t=n.firstChild,e=t.nextSibling,i=e.firstChild,r=i.firstChild,s=r.nextSibling,o=s.firstChild;return n.$$keydown=({key:a})=>a==="Escape"&&oe.back(),n.style.setProperty("width","100%"),J(n,I(Ou.Provider,{value:"edit",get children(){return I(Jb,{path:"cv.profile.tags",factory:mF,readonly:!0})}}),e),J(o,I(Lt,{icon:"done",action:()=>oe.back()})),n})();Si(["keydown"]);const xF=St('<div class="chart-container"></div>',2),vF=St('<footer><nav><ul><li role="list"><ul role="listbox"><li><a> Duration</a></li><li><a> Records</a></li><li><a> Tags</a></li></ul></li></ul><ul><li></li></ul></nav></footer>',26),wF=St('<article class="profile"><header><nav><ul><li><h2>Profile</h2></li></ul><ul><li></li></ul></nav></header></article>',16),Lg={professional:0,education:1,hobby:2},SF={fitness:"total tag matches per all records",duration:"years for all fitting records",projects:"matched records"},_F=()=>{const[n,t]=ee("fitness"),[e,i]=ee(),[r,s]=ee({indexAxis:"y",maintainAspectRatio:!1,onClick:(d,[p])=>{const m=p&&(e()?.labels??[])[p.index];typeof m=="string"&&oe.push(()=>I(kh,{keyword:m}))},plugins:{legend:{labels:{font:{size:18}}}},responsive:!0,scales:{x:{stacked:!0,grid:{z:10},ticks:{display:!0,stepSize:1},title:{display:!0,font:{size:18}}},y:{stacked:!0,grid:{drawTicks:!0,tickLength:5},ticks:{font:{size:18}}}}});function o(){const d=[],p=[];function m(A){const[R,L]=A.split(/ [-] /);if(R.length>7)throw R;if(!L)return 1;const[rt,pt]=R.split("/").map(W=>+W),[ut,kt]=L.split("/").map(W=>+W),Dt=new Date(pt,rt-1),U=new Date(kt,ut-1);return((U.getFullYear()-Dt.getFullYear())*12+(U.getMonth()-Dt.getMonth()))/12}function v(A){return Ig($y([A.toLowerCase(),...Mt.store.keywords[A].tags??[]]),Mt.store.cv.profile.tags).length}const C=(A,R)=>({projects:1,duration:m(Mt.store.cv.experience[A].interval),fitness:v(R)});function E(A,R,L){A.projects++,A.duration+=m(Mt.store.cv.experience[R].interval),A.fitness+=v(L)}const F=Mt.store.cv.experience.flatMap(({keywords:A,type:R},L)=>A.map(rt=>({experienceId:L,keyword:rt,scope:R}))).filter(({keyword:A})=>Ig([A.toLowerCase(),...Mt.store.keywords[A].tags??[]],Mt.store.cv.profile.tags).length).filter(({scope:A})=>Rg(Lg[A],...Mt.store.cv.profile.scope)).reduce((A,{keyword:R,scope:L,experienceId:rt})=>(A[R]?A[R][L]?E(A[R][L],rt,R):A[R][L]=C(rt,R):A[R]={[L]:C(rt,R)},A),{}),q=A=>A.reduce((R,{projects:L,fitness:rt,duration:pt})=>(R.projects+=L,R.fitness+=rt,R.duration+=pt,R),{projects:0,duration:0,fitness:0}),j=h();for(const A of Object.keys(F).sort((R,L)=>j({name:R,stats:q(Object.values(F[R]))},{name:L,stats:q(Object.values(F[L]))})))d.push(A);for(const A of["professional","education","hobby"].filter(R=>Rg(Lg[R],...Mt.store.cv.profile.scope))){const R={label:A,data:[],backgroundColor:Mn.getColor(A)};for(const L of d)F[L][A]?R.data.push(F[L][A][n()]):R.data.push(0);p.push(R)}s(Wo(r(),{scales:{x:{title:{text:SF[n()]}}}})),i({labels:d,datasets:p})}function a(){const d={plugins:{legend:{labels:{color:Mn.getColor()}}},scales:{x:{grid:{color:Mn.getColor("primary")},title:{color:Mn.getColor()}},y:{grid:{color:Mn.getColor("primary")},ticks:{color:Mn.getColor()}}}};s(Wo({},r(),d))}Mn.observe(()=>{a(),o()}),a();const l=({name:d},{name:p})=>d.localeCompare(p),c=({name:d,stats:p},{name:m,stats:v})=>{const C=v[n()]-p[n()];return C||d.localeCompare(m)},u=()=>!0,[h,f]=ee(c);return ee(u),sr(o),()=>(()=>{const d=wF.cloneNode(!0),p=d.firstChild,m=p.firstChild,v=m.firstChild,C=v.nextSibling,E=C.firstChild;return J(E,I(Lt,{icon:"tune",action:()=>oe.push(()=>I(yF,{})),class:"secondary outline"})),J(d,I(Ce,{get when(){return e()?.labels?.length},get children(){return[(()=>{const F=xF.cloneNode(!0);return F.style.setProperty("position","relative"),J(F,I(G4,{type:"bar",get data(){return e()},get options(){return r()},plugins:[T4,$4,rz,x4,M4]})),F})(),(()=>{const F=vF.cloneNode(!0),q=F.firstChild,j=q.firstChild,A=j.firstChild,R=A.firstChild,L=R.firstChild,rt=L.firstChild,pt=rt.firstChild,ut=L.nextSibling,kt=ut.firstChild,Dt=kt.firstChild,U=ut.nextSibling,V=U.firstChild,W=V.firstChild,H=j.nextSibling,z=H.firstChild;return J(A,I(Kr,{get children(){return[I(Je,{get when(){return n()==="duration"},children:"Duration profile"}),I(Je,{get when(){return n()==="projects"},children:"Records profile"}),I(Je,{get when(){return n()==="fitness"},children:"Tags profile"})]}}),R),rt.$$click=()=>t("duration"),J(rt,I(De,{name:"calendar_month"}),pt),kt.$$click=()=>t("projects"),J(kt,I(De,{name:"workspaces"}),Dt),V.$$click=()=>t("fitness"),J(V,I(De,{name:"loyalty"}),W),J(z,I(Qa,{onIcon:"stacked_bar_chart",offIcon:"abc",get value(){return h()===c},handler:G=>f(()=>G?c:l)})),F})()]}}),null),d})()},Rg=(n,t,e)=>n>=t&&n<=e;Si(["click"]);const kF=St("<section><h1>Curriculum Vitae</h1></section>",4),MF=()=>(()=>{const n=kF.cloneNode(!0);return n.firstChild,n.style.setProperty("page-break-before","always"),J(n,I(_F,{}),null),J(n,I(a5,{}),null),n})();var Mu={},CF={get exports(){return Mu},set exports(n){Mu=n}};(function(n,t){(function(e,i){n.exports=i()})(self,()=>(()=>{var e={192:(o,a)=>{var l,c,u=function(){var h=function(U,V){var W=U,H=C[V],z=null,G=0,st=null,Z=[],ct={},Nt=function(k,T){z=function(D){for(var $=new Array(D),P=0;P<D;P+=1){$[P]=new Array(D);for(var K=0;K<D;K+=1)$[P][K]=null}return $}(G=4*W+17),Wt(0,0),Wt(G-7,0),Wt(0,G-7),y(),mt(),x(k,T),W>=7&&g(k),st==null&&(st=w(W,H,Z)),S(st,T)},Wt=function(k,T){for(var D=-1;D<=7;D+=1)if(!(k+D<=-1||G<=k+D))for(var $=-1;$<=7;$+=1)T+$<=-1||G<=T+$||(z[k+D][T+$]=0<=D&&D<=6&&($==0||$==6)||0<=$&&$<=6&&(D==0||D==6)||2<=D&&D<=4&&2<=$&&$<=4)},mt=function(){for(var k=8;k<G-8;k+=1)z[k][6]==null&&(z[k][6]=k%2==0);for(var T=8;T<G-8;T+=1)z[6][T]==null&&(z[6][T]=T%2==0)},y=function(){for(var k=E.getPatternPosition(W),T=0;T<k.length;T+=1)for(var D=0;D<k.length;D+=1){var $=k[T],P=k[D];if(z[$][P]==null)for(var K=-2;K<=2;K+=1)for(var nt=-2;nt<=2;nt+=1)z[$+K][P+nt]=K==-2||K==2||nt==-2||nt==2||K==0&&nt==0}},g=function(k){for(var T=E.getBCHTypeNumber(W),D=0;D<18;D+=1){var $=!k&&(T>>D&1)==1;z[Math.floor(D/3)][D%3+G-8-3]=$}for(D=0;D<18;D+=1)$=!k&&(T>>D&1)==1,z[D%3+G-8-3][Math.floor(D/3)]=$},x=function(k,T){for(var D=H<<3|T,$=E.getBCHTypeInfo(D),P=0;P<15;P+=1){var K=!k&&($>>P&1)==1;P<6?z[P][8]=K:P<8?z[P+1][8]=K:z[G-15+P][8]=K}for(P=0;P<15;P+=1)K=!k&&($>>P&1)==1,P<8?z[8][G-P-1]=K:P<9?z[8][15-P-1+1]=K:z[8][15-P-1]=K;z[G-8][8]=!k},S=function(k,T){for(var D=-1,$=G-1,P=7,K=0,nt=E.getMaskFunction(T),dt=G-1;dt>0;dt-=2)for(dt==6&&(dt-=1);;){for(var wt=0;wt<2;wt+=1)if(z[$][dt-wt]==null){var _t=!1;K<k.length&&(_t=(k[K]>>>P&1)==1),nt($,dt-wt)&&(_t=!_t),z[$][dt-wt]=_t,(P-=1)==-1&&(K+=1,P=7)}if(($+=D)<0||G<=$){$-=D,D=-D;break}}},w=function(k,T,D){for(var $=j.getRSBlocks(k,T),P=A(),K=0;K<D.length;K+=1){var nt=D[K];P.put(nt.getMode(),4),P.put(nt.getLength(),E.getLengthInBits(nt.getMode(),k)),nt.write(P)}var dt=0;for(K=0;K<$.length;K+=1)dt+=$[K].dataCount;if(P.getLengthInBits()>8*dt)throw"code length overflow. ("+P.getLengthInBits()+">"+8*dt+")";for(P.getLengthInBits()+4<=8*dt&&P.put(0,4);P.getLengthInBits()%8!=0;)P.putBit(!1);for(;!(P.getLengthInBits()>=8*dt||(P.put(236,8),P.getLengthInBits()>=8*dt));)P.put(17,8);return function(wt,_t){for(var Ot=0,Zt=0,te=0,zt=new Array(_t.length),Rt=new Array(_t.length),_=0;_<_t.length;_+=1){var b=_t[_].dataCount,X=_t[_].totalCount-b;Zt=Math.max(Zt,b),te=Math.max(te,X),zt[_]=new Array(b);for(var Y=0;Y<zt[_].length;Y+=1)zt[_][Y]=255&wt.getBuffer()[Y+Ot];Ot+=b;var tt=E.getErrorCorrectPolynomial(X),lt=q(zt[_],tt.getLength()-1).mod(tt);for(Rt[_]=new Array(tt.getLength()-1),Y=0;Y<Rt[_].length;Y+=1){var ht=Y+lt.getLength()-Rt[_].length;Rt[_][Y]=ht>=0?lt.getAt(ht):0}}var Tt=0;for(Y=0;Y<_t.length;Y+=1)Tt+=_t[Y].totalCount;var yt=new Array(Tt),xt=0;for(Y=0;Y<Zt;Y+=1)for(_=0;_<_t.length;_+=1)Y<zt[_].length&&(yt[xt]=zt[_][Y],xt+=1);for(Y=0;Y<te;Y+=1)for(_=0;_<_t.length;_+=1)Y<Rt[_].length&&(yt[xt]=Rt[_][Y],xt+=1);return yt}(P,$)};ct.addData=function(k,T){var D=null;switch(T=T||"Byte"){case"Numeric":D=R(k);break;case"Alphanumeric":D=L(k);break;case"Byte":D=rt(k);break;case"Kanji":D=pt(k);break;default:throw"mode:"+T}Z.push(D),st=null},ct.isDark=function(k,T){if(k<0||G<=k||T<0||G<=T)throw k+","+T;return z[k][T]},ct.getModuleCount=function(){return G},ct.make=function(){if(W<1){for(var k=1;k<40;k++){for(var T=j.getRSBlocks(k,H),D=A(),$=0;$<Z.length;$++){var P=Z[$];D.put(P.getMode(),4),D.put(P.getLength(),E.getLengthInBits(P.getMode(),k)),P.write(D)}var K=0;for($=0;$<T.length;$++)K+=T[$].dataCount;if(D.getLengthInBits()<=8*K)break}W=k}Nt(!1,function(){for(var nt=0,dt=0,wt=0;wt<8;wt+=1){Nt(!0,wt);var _t=E.getLostPoint(ct);(wt==0||nt>_t)&&(nt=_t,dt=wt)}return dt}())},ct.createTableTag=function(k,T){k=k||2;var D="";D+='<table style="',D+=" border-width: 0px; border-style: none;",D+=" border-collapse: collapse;",D+=" padding: 0px; margin: "+(T=T===void 0?4*k:T)+"px;",D+='">',D+="<tbody>";for(var $=0;$<ct.getModuleCount();$+=1){D+="<tr>";for(var P=0;P<ct.getModuleCount();P+=1)D+='<td style="',D+=" border-width: 0px; border-style: none;",D+=" border-collapse: collapse;",D+=" padding: 0px; margin: 0px;",D+=" width: "+k+"px;",D+=" height: "+k+"px;",D+=" background-color: ",D+=ct.isDark($,P)?"#000000":"#ffffff",D+=";",D+='"/>';D+="</tr>"}return(D+="</tbody>")+"</table>"},ct.createSvgTag=function(k,T,D,$){var P={};typeof arguments[0]=="object"&&(k=(P=arguments[0]).cellSize,T=P.margin,D=P.alt,$=P.title),k=k||2,T=T===void 0?4*k:T,(D=typeof D=="string"?{text:D}:D||{}).text=D.text||null,D.id=D.text?D.id||"qrcode-description":null,($=typeof $=="string"?{text:$}:$||{}).text=$.text||null,$.id=$.text?$.id||"qrcode-title":null;var K,nt,dt,wt,_t=ct.getModuleCount()*k+2*T,Ot="";for(wt="l"+k+",0 0,"+k+" -"+k+",0 0,-"+k+"z ",Ot+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',Ot+=P.scalable?"":' width="'+_t+'px" height="'+_t+'px"',Ot+=' viewBox="0 0 '+_t+" "+_t+'" ',Ot+=' preserveAspectRatio="xMinYMin meet"',Ot+=$.text||D.text?' role="img" aria-labelledby="'+O([$.id,D.id].join(" ").trim())+'"':"",Ot+=">",Ot+=$.text?'<title id="'+O($.id)+'">'+O($.text)+"</title>":"",Ot+=D.text?'<description id="'+O(D.id)+'">'+O(D.text)+"</description>":"",Ot+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',Ot+='<path d="',nt=0;nt<ct.getModuleCount();nt+=1)for(dt=nt*k+T,K=0;K<ct.getModuleCount();K+=1)ct.isDark(nt,K)&&(Ot+="M"+(K*k+T)+","+dt+wt);return(Ot+='" stroke="transparent" fill="black"/>')+"</svg>"},ct.createDataURL=function(k,T){k=k||2,T=T===void 0?4*k:T;var D=ct.getModuleCount()*k+2*T,$=T,P=D-T;return Dt(D,D,function(K,nt){if($<=K&&K<P&&$<=nt&&nt<P){var dt=Math.floor((K-$)/k),wt=Math.floor((nt-$)/k);return ct.isDark(wt,dt)?0:1}return 1})},ct.createImgTag=function(k,T,D){k=k||2,T=T===void 0?4*k:T;var $=ct.getModuleCount()*k+2*T,P="";return P+="<img",P+=' src="',P+=ct.createDataURL(k,T),P+='"',P+=' width="',P+=$,P+='"',P+=' height="',P+=$,P+='"',D&&(P+=' alt="',P+=O(D),P+='"'),P+"/>"};var O=function(k){for(var T="",D=0;D<k.length;D+=1){var $=k.charAt(D);switch($){case"<":T+="&lt;";break;case">":T+="&gt;";break;case"&":T+="&amp;";break;case'"':T+="&quot;";break;default:T+=$}}return T};return ct.createASCII=function(k,T){if((k=k||1)<2)return function(zt){zt=zt===void 0?2:zt;var Rt,_,b,X,Y,tt=1*ct.getModuleCount()+2*zt,lt=zt,ht=tt-zt,Tt={"":""," ":""," ":"","  ":" "},yt={"":""," ":""," ":" ","  ":" "},xt="";for(Rt=0;Rt<tt;Rt+=2){for(b=Math.floor((Rt-lt)/1),X=Math.floor((Rt+1-lt)/1),_=0;_<tt;_+=1)Y="",lt<=_&&_<ht&&lt<=Rt&&Rt<ht&&ct.isDark(b,Math.floor((_-lt)/1))&&(Y=" "),lt<=_&&_<ht&&lt<=Rt+1&&Rt+1<ht&&ct.isDark(X,Math.floor((_-lt)/1))?Y+=" ":Y+="",xt+=zt<1&&Rt+1>=ht?yt[Y]:Tt[Y];xt+=`
`}return tt%2&&zt>0?xt.substring(0,xt.length-tt-1)+Array(tt+1).join(""):xt.substring(0,xt.length-1)}(T);k-=1,T=T===void 0?2*k:T;var D,$,P,K,nt=ct.getModuleCount()*k+2*T,dt=T,wt=nt-T,_t=Array(k+1).join(""),Ot=Array(k+1).join("  "),Zt="",te="";for(D=0;D<nt;D+=1){for(P=Math.floor((D-dt)/k),te="",$=0;$<nt;$+=1)K=1,dt<=$&&$<wt&&dt<=D&&D<wt&&ct.isDark(P,Math.floor(($-dt)/k))&&(K=0),te+=K?_t:Ot;for(P=0;P<k;P+=1)Zt+=te+`
`}return Zt.substring(0,Zt.length-1)},ct.renderTo2dContext=function(k,T){T=T||2;for(var D=ct.getModuleCount(),$=0;$<D;$++)for(var P=0;P<D;P++)k.fillStyle=ct.isDark($,P)?"black":"white",k.fillRect($*T,P*T,T,T)},ct};h.stringToBytes=(h.stringToBytesFuncs={default:function(U){for(var V=[],W=0;W<U.length;W+=1){var H=U.charCodeAt(W);V.push(255&H)}return V}}).default,h.createStringToBytes=function(U,V){var W=function(){for(var z=kt(U),G=function(){var mt=z.read();if(mt==-1)throw"eof";return mt},st=0,Z={};;){var ct=z.read();if(ct==-1)break;var Nt=G(),Wt=G()<<8|G();Z[String.fromCharCode(ct<<8|Nt)]=Wt,st+=1}if(st!=V)throw st+" != "+V;return Z}(),H="?".charCodeAt(0);return function(z){for(var G=[],st=0;st<z.length;st+=1){var Z=z.charCodeAt(st);if(Z<128)G.push(Z);else{var ct=W[z.charAt(st)];typeof ct=="number"?(255&ct)==ct?G.push(ct):(G.push(ct>>>8),G.push(255&ct)):G.push(H)}}return G}};var f,d,p,m,v,C={L:1,M:0,Q:3,H:2},E=(f=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],d=1335,p=7973,v=function(U){for(var V=0;U!=0;)V+=1,U>>>=1;return V},(m={}).getBCHTypeInfo=function(U){for(var V=U<<10;v(V)-v(d)>=0;)V^=d<<v(V)-v(d);return 21522^(U<<10|V)},m.getBCHTypeNumber=function(U){for(var V=U<<12;v(V)-v(p)>=0;)V^=p<<v(V)-v(p);return U<<12|V},m.getPatternPosition=function(U){return f[U-1]},m.getMaskFunction=function(U){switch(U){case 0:return function(V,W){return(V+W)%2==0};case 1:return function(V,W){return V%2==0};case 2:return function(V,W){return W%3==0};case 3:return function(V,W){return(V+W)%3==0};case 4:return function(V,W){return(Math.floor(V/2)+Math.floor(W/3))%2==0};case 5:return function(V,W){return V*W%2+V*W%3==0};case 6:return function(V,W){return(V*W%2+V*W%3)%2==0};case 7:return function(V,W){return(V*W%3+(V+W)%2)%2==0};default:throw"bad maskPattern:"+U}},m.getErrorCorrectPolynomial=function(U){for(var V=q([1],0),W=0;W<U;W+=1)V=V.multiply(q([1,F.gexp(W)],0));return V},m.getLengthInBits=function(U,V){if(1<=V&&V<10)switch(U){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+U}else if(V<27)switch(U){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+U}else{if(!(V<41))throw"type:"+V;switch(U){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+U}}},m.getLostPoint=function(U){for(var V=U.getModuleCount(),W=0,H=0;H<V;H+=1)for(var z=0;z<V;z+=1){for(var G=0,st=U.isDark(H,z),Z=-1;Z<=1;Z+=1)if(!(H+Z<0||V<=H+Z))for(var ct=-1;ct<=1;ct+=1)z+ct<0||V<=z+ct||Z==0&&ct==0||st==U.isDark(H+Z,z+ct)&&(G+=1);G>5&&(W+=3+G-5)}for(H=0;H<V-1;H+=1)for(z=0;z<V-1;z+=1){var Nt=0;U.isDark(H,z)&&(Nt+=1),U.isDark(H+1,z)&&(Nt+=1),U.isDark(H,z+1)&&(Nt+=1),U.isDark(H+1,z+1)&&(Nt+=1),Nt!=0&&Nt!=4||(W+=3)}for(H=0;H<V;H+=1)for(z=0;z<V-6;z+=1)U.isDark(H,z)&&!U.isDark(H,z+1)&&U.isDark(H,z+2)&&U.isDark(H,z+3)&&U.isDark(H,z+4)&&!U.isDark(H,z+5)&&U.isDark(H,z+6)&&(W+=40);for(z=0;z<V;z+=1)for(H=0;H<V-6;H+=1)U.isDark(H,z)&&!U.isDark(H+1,z)&&U.isDark(H+2,z)&&U.isDark(H+3,z)&&U.isDark(H+4,z)&&!U.isDark(H+5,z)&&U.isDark(H+6,z)&&(W+=40);var Wt=0;for(z=0;z<V;z+=1)for(H=0;H<V;H+=1)U.isDark(H,z)&&(Wt+=1);return W+Math.abs(100*Wt/V/V-50)/5*10},m),F=function(){for(var U=new Array(256),V=new Array(256),W=0;W<8;W+=1)U[W]=1<<W;for(W=8;W<256;W+=1)U[W]=U[W-4]^U[W-5]^U[W-6]^U[W-8];for(W=0;W<255;W+=1)V[U[W]]=W;return{glog:function(H){if(H<1)throw"glog("+H+")";return V[H]},gexp:function(H){for(;H<0;)H+=255;for(;H>=256;)H-=255;return U[H]}}}();function q(U,V){if(U.length===void 0)throw U.length+"/"+V;var W=function(){for(var z=0;z<U.length&&U[z]==0;)z+=1;for(var G=new Array(U.length-z+V),st=0;st<U.length-z;st+=1)G[st]=U[st+z];return G}(),H={getAt:function(z){return W[z]},getLength:function(){return W.length},multiply:function(z){for(var G=new Array(H.getLength()+z.getLength()-1),st=0;st<H.getLength();st+=1)for(var Z=0;Z<z.getLength();Z+=1)G[st+Z]^=F.gexp(F.glog(H.getAt(st))+F.glog(z.getAt(Z)));return q(G,0)},mod:function(z){if(H.getLength()-z.getLength()<0)return H;for(var G=F.glog(H.getAt(0))-F.glog(z.getAt(0)),st=new Array(H.getLength()),Z=0;Z<H.getLength();Z+=1)st[Z]=H.getAt(Z);for(Z=0;Z<z.getLength();Z+=1)st[Z]^=F.gexp(F.glog(z.getAt(Z))+G);return q(st,0).mod(z)}};return H}var j=function(){var U=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],V=function(H,z){var G={};return G.totalCount=H,G.dataCount=z,G},W={getRSBlocks:function(H,z){var G=function(g,x){switch(x){case C.L:return U[4*(g-1)+0];case C.M:return U[4*(g-1)+1];case C.Q:return U[4*(g-1)+2];case C.H:return U[4*(g-1)+3];default:return}}(H,z);if(G===void 0)throw"bad rs block @ typeNumber:"+H+"/errorCorrectionLevel:"+z;for(var st=G.length/3,Z=[],ct=0;ct<st;ct+=1)for(var Nt=G[3*ct+0],Wt=G[3*ct+1],mt=G[3*ct+2],y=0;y<Nt;y+=1)Z.push(V(Wt,mt));return Z}};return W}(),A=function(){var U=[],V=0,W={getBuffer:function(){return U},getAt:function(H){var z=Math.floor(H/8);return(U[z]>>>7-H%8&1)==1},put:function(H,z){for(var G=0;G<z;G+=1)W.putBit((H>>>z-G-1&1)==1)},getLengthInBits:function(){return V},putBit:function(H){var z=Math.floor(V/8);U.length<=z&&U.push(0),H&&(U[z]|=128>>>V%8),V+=1}};return W},R=function(U){var V=U,W={getMode:function(){return 1},getLength:function(G){return V.length},write:function(G){for(var st=V,Z=0;Z+2<st.length;)G.put(H(st.substring(Z,Z+3)),10),Z+=3;Z<st.length&&(st.length-Z==1?G.put(H(st.substring(Z,Z+1)),4):st.length-Z==2&&G.put(H(st.substring(Z,Z+2)),7))}},H=function(G){for(var st=0,Z=0;Z<G.length;Z+=1)st=10*st+z(G.charAt(Z));return st},z=function(G){if("0"<=G&&G<="9")return G.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+G};return W},L=function(U){var V=U,W={getMode:function(){return 2},getLength:function(z){return V.length},write:function(z){for(var G=V,st=0;st+1<G.length;)z.put(45*H(G.charAt(st))+H(G.charAt(st+1)),11),st+=2;st<G.length&&z.put(H(G.charAt(st)),6)}},H=function(z){if("0"<=z&&z<="9")return z.charCodeAt(0)-"0".charCodeAt(0);if("A"<=z&&z<="Z")return z.charCodeAt(0)-"A".charCodeAt(0)+10;switch(z){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+z}};return W},rt=function(U){var V=h.stringToBytes(U);return{getMode:function(){return 4},getLength:function(W){return V.length},write:function(W){for(var H=0;H<V.length;H+=1)W.put(V[H],8)}}},pt=function(U){var V=h.stringToBytesFuncs.SJIS;if(!V)throw"sjis not supported.";(function(z,G){var st=V("");if(st.length!=2||(st[0]<<8|st[1])!=38726)throw"sjis not supported."})();var W=V(U),H={getMode:function(){return 8},getLength:function(z){return~~(W.length/2)},write:function(z){for(var G=W,st=0;st+1<G.length;){var Z=(255&G[st])<<8|255&G[st+1];if(33088<=Z&&Z<=40956)Z-=33088;else{if(!(57408<=Z&&Z<=60351))throw"illegal char at "+(st+1)+"/"+Z;Z-=49472}Z=192*(Z>>>8&255)+(255&Z),z.put(Z,13),st+=2}if(st<G.length)throw"illegal char at "+(st+1)}};return H},ut=function(){var U=[],V={writeByte:function(W){U.push(255&W)},writeShort:function(W){V.writeByte(W),V.writeByte(W>>>8)},writeBytes:function(W,H,z){H=H||0,z=z||W.length;for(var G=0;G<z;G+=1)V.writeByte(W[G+H])},writeString:function(W){for(var H=0;H<W.length;H+=1)V.writeByte(W.charCodeAt(H))},toByteArray:function(){return U},toString:function(){var W="";W+="[";for(var H=0;H<U.length;H+=1)H>0&&(W+=","),W+=U[H];return W+"]"}};return V},kt=function(U){var V=U,W=0,H=0,z=0,G={read:function(){for(;z<8;){if(W>=V.length){if(z==0)return-1;throw"unexpected end of file./"+z}var Z=V.charAt(W);if(W+=1,Z=="=")return z=0,-1;Z.match(/^\s$/)||(H=H<<6|st(Z.charCodeAt(0)),z+=6)}var ct=H>>>z-8&255;return z-=8,ct}},st=function(Z){if(65<=Z&&Z<=90)return Z-65;if(97<=Z&&Z<=122)return Z-97+26;if(48<=Z&&Z<=57)return Z-48+52;if(Z==43)return 62;if(Z==47)return 63;throw"c:"+Z};return G},Dt=function(U,V,W){for(var H=function(Wt,mt){var y=Wt,g=mt,x=new Array(Wt*mt),S={setPixel:function(k,T,D){x[T*y+k]=D},write:function(k){k.writeString("GIF87a"),k.writeShort(y),k.writeShort(g),k.writeByte(128),k.writeByte(0),k.writeByte(0),k.writeByte(0),k.writeByte(0),k.writeByte(0),k.writeByte(255),k.writeByte(255),k.writeByte(255),k.writeString(","),k.writeShort(0),k.writeShort(0),k.writeShort(y),k.writeShort(g),k.writeByte(0);var T=w(2);k.writeByte(2);for(var D=0;T.length-D>255;)k.writeByte(255),k.writeBytes(T,D,255),D+=255;k.writeByte(T.length-D),k.writeBytes(T,D,T.length-D),k.writeByte(0),k.writeString(";")}},w=function(k){for(var T=1<<k,D=1+(1<<k),$=k+1,P=O(),K=0;K<T;K+=1)P.add(String.fromCharCode(K));P.add(String.fromCharCode(T)),P.add(String.fromCharCode(D));var nt,dt,wt,_t=ut(),Ot=(nt=_t,dt=0,wt=0,{write:function(Rt,_){if(Rt>>>_)throw"length over";for(;dt+_>=8;)nt.writeByte(255&(Rt<<dt|wt)),_-=8-dt,Rt>>>=8-dt,wt=0,dt=0;wt|=Rt<<dt,dt+=_},flush:function(){dt>0&&nt.writeByte(wt)}});Ot.write(T,$);var Zt=0,te=String.fromCharCode(x[Zt]);for(Zt+=1;Zt<x.length;){var zt=String.fromCharCode(x[Zt]);Zt+=1,P.contains(te+zt)?te+=zt:(Ot.write(P.indexOf(te),$),P.size()<4095&&(P.size()==1<<$&&($+=1),P.add(te+zt)),te=zt)}return Ot.write(P.indexOf(te),$),Ot.write(D,$),Ot.flush(),_t.toByteArray()},O=function(){var k={},T=0,D={add:function($){if(D.contains($))throw"dup key:"+$;k[$]=T,T+=1},size:function(){return T},indexOf:function($){return k[$]},contains:function($){return k[$]!==void 0}};return D};return S}(U,V),z=0;z<V;z+=1)for(var G=0;G<U;G+=1)H.setPixel(G,z,W(G,z));var st=ut();H.write(st);for(var Z=function(){var Wt=0,mt=0,y=0,g="",x={},S=function(O){g+=String.fromCharCode(w(63&O))},w=function(O){if(!(O<0)){if(O<26)return 65+O;if(O<52)return O-26+97;if(O<62)return O-52+48;if(O==62)return 43;if(O==63)return 47}throw"n:"+O};return x.writeByte=function(O){for(Wt=Wt<<8|255&O,mt+=8,y+=1;mt>=6;)S(Wt>>>mt-6),mt-=6},x.flush=function(){if(mt>0&&(S(Wt<<6-mt),Wt=0,mt=0),y%3!=0)for(var O=3-y%3,k=0;k<O;k+=1)g+="="},x.toString=function(){return g},x}(),ct=st.toByteArray(),Nt=0;Nt<ct.length;Nt+=1)Z.writeByte(ct[Nt]);return Z.flush(),"data:image/gif;base64,"+Z};return h}();u.stringToBytesFuncs["UTF-8"]=function(h){return function(f){for(var d=[],p=0;p<f.length;p++){var m=f.charCodeAt(p);m<128?d.push(m):m<2048?d.push(192|m>>6,128|63&m):m<55296||m>=57344?d.push(224|m>>12,128|m>>6&63,128|63&m):(p++,m=65536+((1023&m)<<10|1023&f.charCodeAt(p)),d.push(240|m>>18,128|m>>12&63,128|m>>6&63,128|63&m))}return d}(h)},(c=typeof(l=function(){return u})=="function"?l.apply(a,[]):l)===void 0||(o.exports=c)}},i={};function r(o){var a=i[o];if(a!==void 0)return a.exports;var l=i[o]={exports:{}};return e[o](l,l.exports,r),l.exports}r.n=o=>{var a=o&&o.__esModule?()=>o.default:()=>o;return r.d(a,{a}),a},r.d=(o,a)=>{for(var l in a)r.o(a,l)&&!r.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:a[l]})},r.o=(o,a)=>Object.prototype.hasOwnProperty.call(o,a);var s={};return(()=>{r.d(s,{default:()=>Wt});const o=mt=>!!mt&&typeof mt=="object"&&!Array.isArray(mt);function a(mt,...y){if(!y.length)return mt;const g=y.shift();return g!==void 0&&o(mt)&&o(g)?(mt=Object.assign({},mt),Object.keys(g).forEach(x=>{const S=mt[x],w=g[x];Array.isArray(S)&&Array.isArray(w)?mt[x]=w:o(S)&&o(w)?mt[x]=a(Object.assign({},S),w):mt[x]=w}),a(mt,...y)):mt}function l(mt,y){const g=document.createElement("a");g.download=y,g.href=mt,document.body.appendChild(g),g.click(),document.body.removeChild(g)}function c({originalHeight:mt,originalWidth:y,maxHiddenDots:g,maxHiddenAxisDots:x,dotSize:S}){const w={x:0,y:0},O={x:0,y:0};if(mt<=0||y<=0||g<=0||S<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const k=mt/y;return w.x=Math.floor(Math.sqrt(g/k)),w.x<=0&&(w.x=1),x&&x<w.x&&(w.x=x),w.x%2==0&&w.x--,O.x=w.x*S,w.y=1+2*Math.ceil((w.x*k-1)/2),O.y=Math.round(O.x*k),(w.y*w.x>g||x&&x<w.y)&&(x&&x<w.y?(w.y=x,w.y%2==0&&w.x--):w.y-=2,O.y=w.y*S,w.x=1+2*Math.ceil((w.y/k-1)/2),O.x=Math.round(O.y/k)),{height:O.y,width:O.x,hideYDots:w.x,hideXDots:w.y}}const u={L:.07,M:.15,Q:.25,H:.3},h="dots",f="rounded",d="classy",p="classy-rounded",m="extra-rounded";class v{constructor({context:y,type:g}){this._context=y,this._type=g}draw(y,g,x,S){const w=this._context;let O;switch(this._type){case h:O=this._drawDot;break;case d:O=this._drawClassy;break;case p:O=this._drawClassyRounded;break;case f:O=this._drawRounded;break;case m:O=this._drawExtraRounded;break;default:O=this._drawSquare}O.call(this,{x:y,y:g,size:x,context:w,getNeighbor:S})}_rotateFigure({x:y,y:g,size:x,context:S,rotation:w=0,draw:O}){const k=y+x/2,T=g+x/2;S.translate(k,T),w&&S.rotate(w),O(),S.closePath(),w&&S.rotate(-w),S.translate(-k,-T)}_basicDot(y){const{size:g,context:x}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{x.arc(0,0,g/2,0,2*Math.PI)}}))}_basicSquare(y){const{size:g,context:x}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{x.rect(-g/2,-g/2,g,g)}}))}_basicSideRounded(y){const{size:g,context:x}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{x.arc(0,0,g/2,-Math.PI/2,Math.PI/2),x.lineTo(-g/2,g/2),x.lineTo(-g/2,-g/2),x.lineTo(0,-g/2)}}))}_basicCornerRounded(y){const{size:g,context:x}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{x.arc(0,0,g/2,-Math.PI/2,0),x.lineTo(g/2,g/2),x.lineTo(-g/2,g/2),x.lineTo(-g/2,-g/2),x.lineTo(0,-g/2)}}))}_basicCornerExtraRounded(y){const{size:g,context:x}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{x.arc(-g/2,g/2,g,-Math.PI/2,0),x.lineTo(-g/2,g/2),x.lineTo(-g/2,-g/2)}}))}_basicCornersRounded(y){const{size:g,context:x}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{x.arc(0,0,g/2,-Math.PI/2,0),x.lineTo(g/2,g/2),x.lineTo(0,g/2),x.arc(0,0,g/2,Math.PI/2,Math.PI),x.lineTo(-g/2,-g/2),x.lineTo(0,-g/2)}}))}_basicCornersExtraRounded(y){const{size:g,context:x}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{x.arc(-g/2,g/2,g,-Math.PI/2,0),x.arc(g/2,-g/2,g,Math.PI/2,Math.PI)}}))}_drawDot({x:y,y:g,size:x,context:S}){this._basicDot({x:y,y:g,size:x,context:S,rotation:0})}_drawSquare({x:y,y:g,size:x,context:S}){this._basicSquare({x:y,y:g,size:x,context:S,rotation:0})}_drawRounded({x:y,y:g,size:x,context:S,getNeighbor:w}){const O=w?+w(-1,0):0,k=w?+w(1,0):0,T=w?+w(0,-1):0,D=w?+w(0,1):0,$=O+k+T+D;if($!==0)if($>2||O&&k||T&&D)this._basicSquare({x:y,y:g,size:x,context:S,rotation:0});else{if($===2){let P=0;return O&&T?P=Math.PI/2:T&&k?P=Math.PI:k&&D&&(P=-Math.PI/2),void this._basicCornerRounded({x:y,y:g,size:x,context:S,rotation:P})}if($===1){let P=0;return T?P=Math.PI/2:k?P=Math.PI:D&&(P=-Math.PI/2),void this._basicSideRounded({x:y,y:g,size:x,context:S,rotation:P})}}else this._basicDot({x:y,y:g,size:x,context:S,rotation:0})}_drawExtraRounded({x:y,y:g,size:x,context:S,getNeighbor:w}){const O=w?+w(-1,0):0,k=w?+w(1,0):0,T=w?+w(0,-1):0,D=w?+w(0,1):0,$=O+k+T+D;if($!==0)if($>2||O&&k||T&&D)this._basicSquare({x:y,y:g,size:x,context:S,rotation:0});else{if($===2){let P=0;return O&&T?P=Math.PI/2:T&&k?P=Math.PI:k&&D&&(P=-Math.PI/2),void this._basicCornerExtraRounded({x:y,y:g,size:x,context:S,rotation:P})}if($===1){let P=0;return T?P=Math.PI/2:k?P=Math.PI:D&&(P=-Math.PI/2),void this._basicSideRounded({x:y,y:g,size:x,context:S,rotation:P})}}else this._basicDot({x:y,y:g,size:x,context:S,rotation:0})}_drawClassy({x:y,y:g,size:x,context:S,getNeighbor:w}){const O=w?+w(-1,0):0,k=w?+w(1,0):0,T=w?+w(0,-1):0,D=w?+w(0,1):0;O+k+T+D!==0?O||T?k||D?this._basicSquare({x:y,y:g,size:x,context:S,rotation:0}):this._basicCornerRounded({x:y,y:g,size:x,context:S,rotation:Math.PI/2}):this._basicCornerRounded({x:y,y:g,size:x,context:S,rotation:-Math.PI/2}):this._basicCornersRounded({x:y,y:g,size:x,context:S,rotation:Math.PI/2})}_drawClassyRounded({x:y,y:g,size:x,context:S,getNeighbor:w}){const O=w?+w(-1,0):0,k=w?+w(1,0):0,T=w?+w(0,-1):0,D=w?+w(0,1):0;O+k+T+D!==0?O||T?k||D?this._basicSquare({x:y,y:g,size:x,context:S,rotation:0}):this._basicCornerExtraRounded({x:y,y:g,size:x,context:S,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:y,y:g,size:x,context:S,rotation:-Math.PI/2}):this._basicCornersRounded({x:y,y:g,size:x,context:S,rotation:Math.PI/2})}}const C="square",E="extra-rounded";class F{constructor({context:y,type:g}){this._context=y,this._type=g}draw(y,g,x,S){const w=this._context;let O;switch(this._type){case C:O=this._drawSquare;break;case E:O=this._drawExtraRounded;break;default:O=this._drawDot}O.call(this,{x:y,y:g,size:x,context:w,rotation:S})}_rotateFigure({x:y,y:g,size:x,context:S,rotation:w=0,draw:O}){const k=y+x/2,T=g+x/2;S.translate(k,T),w&&S.rotate(w),O(),S.closePath(),w&&S.rotate(-w),S.translate(-k,-T)}_basicDot(y){const{size:g,context:x}=y,S=g/7;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{x.arc(0,0,g/2,0,2*Math.PI),x.arc(0,0,g/2-S,0,2*Math.PI)}}))}_basicSquare(y){const{size:g,context:x}=y,S=g/7;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{x.rect(-g/2,-g/2,g,g),x.rect(-g/2+S,-g/2+S,g-2*S,g-2*S)}}))}_basicExtraRounded(y){const{size:g,context:x}=y,S=g/7;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{x.arc(-S,-S,2.5*S,Math.PI,-Math.PI/2),x.lineTo(S,-3.5*S),x.arc(S,-S,2.5*S,-Math.PI/2,0),x.lineTo(3.5*S,-S),x.arc(S,S,2.5*S,0,Math.PI/2),x.lineTo(-S,3.5*S),x.arc(-S,S,2.5*S,Math.PI/2,Math.PI),x.lineTo(-3.5*S,-S),x.arc(-S,-S,1.5*S,Math.PI,-Math.PI/2),x.lineTo(S,-2.5*S),x.arc(S,-S,1.5*S,-Math.PI/2,0),x.lineTo(2.5*S,-S),x.arc(S,S,1.5*S,0,Math.PI/2),x.lineTo(-S,2.5*S),x.arc(-S,S,1.5*S,Math.PI/2,Math.PI),x.lineTo(-2.5*S,-S)}}))}_drawDot({x:y,y:g,size:x,context:S,rotation:w}){this._basicDot({x:y,y:g,size:x,context:S,rotation:w})}_drawSquare({x:y,y:g,size:x,context:S,rotation:w}){this._basicSquare({x:y,y:g,size:x,context:S,rotation:w})}_drawExtraRounded({x:y,y:g,size:x,context:S,rotation:w}){this._basicExtraRounded({x:y,y:g,size:x,context:S,rotation:w})}}const q="square";class j{constructor({context:y,type:g}){this._context=y,this._type=g}draw(y,g,x,S){const w=this._context;let O;O=this._type===q?this._drawSquare:this._drawDot,O.call(this,{x:y,y:g,size:x,context:w,rotation:S})}_rotateFigure({x:y,y:g,size:x,context:S,rotation:w=0,draw:O}){const k=y+x/2,T=g+x/2;S.translate(k,T),w&&S.rotate(w),O(),S.closePath(),w&&S.rotate(-w),S.translate(-k,-T)}_basicDot(y){const{size:g,context:x}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{x.arc(0,0,g/2,0,2*Math.PI)}}))}_basicSquare(y){const{size:g,context:x}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{x.rect(-g/2,-g/2,g,g)}}))}_drawDot({x:y,y:g,size:x,context:S,rotation:w}){this._basicDot({x:y,y:g,size:x,context:S,rotation:w})}_drawSquare({x:y,y:g,size:x,context:S,rotation:w}){this._basicSquare({x:y,y:g,size:x,context:S,rotation:w})}}const A="radial",R=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],L=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class rt{constructor(y){this._canvas=document.createElement("canvas"),this._canvas.width=y.width,this._canvas.height=y.height,this._options=y}get context(){return this._canvas.getContext("2d")}get width(){return this._canvas.width}get height(){return this._canvas.height}getCanvas(){return this._canvas}clear(){const y=this.context;y&&y.clearRect(0,0,this._canvas.width,this._canvas.height)}async drawQR(y){const g=y.getModuleCount(),x=Math.min(this._options.width,this._options.height)-2*this._options.margin,S=Math.floor(x/g);let w={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=y,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:O,qrOptions:k}=this._options,T=O.imageSize*u[k.errorCorrectionLevel],D=Math.floor(T*g*g);w=c({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:D,maxHiddenAxisDots:g-14,dotSize:S})}this.clear(),this.drawBackground(),this.drawDots((O,k)=>{var T,D,$,P,K,nt;return!(this._options.imageOptions.hideBackgroundDots&&O>=(g-w.hideXDots)/2&&O<(g+w.hideXDots)/2&&k>=(g-w.hideYDots)/2&&k<(g+w.hideYDots)/2||!((T=R[O])===null||T===void 0)&&T[k]||!((D=R[O-g+7])===null||D===void 0)&&D[k]||!(($=R[O])===null||$===void 0)&&$[k-g+7]||!((P=L[O])===null||P===void 0)&&P[k]||!((K=L[O-g+7])===null||K===void 0)&&K[k]||!((nt=L[O])===null||nt===void 0)&&nt[k-g+7])}),this.drawCorners(),this._options.image&&this.drawImage({width:w.width,height:w.height,count:g,dotSize:S})}drawBackground(){const y=this.context,g=this._options;if(y){if(g.backgroundOptions.gradient){const x=g.backgroundOptions.gradient,S=this._createGradient({context:y,options:x,additionalRotation:0,x:0,y:0,size:this._canvas.width>this._canvas.height?this._canvas.width:this._canvas.height});x.colorStops.forEach(({offset:w,color:O})=>{S.addColorStop(w,O)}),y.fillStyle=S}else g.backgroundOptions.color&&(y.fillStyle=g.backgroundOptions.color);y.fillRect(0,0,this._canvas.width,this._canvas.height)}}drawDots(y){if(!this._qr)throw"QR code is not defined";const g=this.context;if(!g)throw"QR code is not defined";const x=this._options,S=this._qr.getModuleCount();if(S>x.width||S>x.height)throw"The canvas is too small.";const w=Math.min(x.width,x.height)-2*x.margin,O=Math.floor(w/S),k=Math.floor((x.width-S*O)/2),T=Math.floor((x.height-S*O)/2),D=new v({context:g,type:x.dotsOptions.type});g.beginPath();for(let $=0;$<S;$++)for(let P=0;P<S;P++){if(y&&!y($,P)||!this._qr.isDark($,P))continue;const K=this._options.useLegacyDotRotation?k+$*O:T+P*O,nt=this._options.useLegacyDotRotation?T+P*O:k+$*O;D.draw(K,nt,O,(dt,wt)=>this._options.useLegacyDotRotation?!($+dt<0||P+wt<0||$+dt>=S||P+wt>=S)&&!(y&&!y($+dt,P+wt))&&!!this._qr&&this._qr.isDark($+dt,P+wt):!(P+dt<0||$+wt<0||P+dt>=S||$+wt>=S)&&!(y&&!y(P+dt,$+wt))&&!!this._qr&&this._qr.isDark($+wt,P+dt))}if(x.dotsOptions.gradient){const $=x.dotsOptions.gradient,P=this._createGradient({context:g,options:$,additionalRotation:0,x:k,y:T,size:S*O});$.colorStops.forEach(({offset:K,color:nt})=>{P.addColorStop(K,nt)}),g.fillStyle=g.strokeStyle=P}else x.dotsOptions.color&&(g.fillStyle=g.strokeStyle=x.dotsOptions.color);g.fill("evenodd")}drawCorners(y){if(!this._qr)throw"QR code is not defined";const g=this.context;if(!g)throw"QR code is not defined";const x=this._options,S=this._qr.getModuleCount(),w=Math.min(x.width,x.height)-2*x.margin,O=Math.floor(w/S),k=7*O,T=3*O,D=Math.floor((x.width-S*O)/2),$=Math.floor((x.height-S*O)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([P,K,nt])=>{var dt,wt,_t,Ot,Zt,te,zt,Rt,_,b;if(y&&!y(P,K))return;const X=D+P*O*(S-7),Y=$+K*O*(S-7);if(!((dt=x.cornersSquareOptions)===null||dt===void 0)&&dt.type){const tt=new F({context:g,type:(wt=x.cornersSquareOptions)===null||wt===void 0?void 0:wt.type});g.beginPath(),tt.draw(X,Y,k,nt)}else{const tt=new v({context:g,type:x.dotsOptions.type});g.beginPath();for(let lt=0;lt<R.length;lt++)for(let ht=0;ht<R[lt].length;ht++)!((_t=R[lt])===null||_t===void 0)&&_t[ht]&&tt.draw(X+lt*O,Y+ht*O,O,(Tt,yt)=>{var xt;return!!(!((xt=R[lt+Tt])===null||xt===void 0)&&xt[ht+yt])})}if(!((Ot=x.cornersSquareOptions)===null||Ot===void 0)&&Ot.gradient){const tt=x.cornersSquareOptions.gradient,lt=this._createGradient({context:g,options:tt,additionalRotation:nt,x:X,y:Y,size:k});tt.colorStops.forEach(({offset:ht,color:Tt})=>{lt.addColorStop(ht,Tt)}),g.fillStyle=g.strokeStyle=lt}else!((Zt=x.cornersSquareOptions)===null||Zt===void 0)&&Zt.color&&(g.fillStyle=g.strokeStyle=x.cornersSquareOptions.color);if(g.fill("evenodd"),(te=x.cornersDotOptions)===null||te===void 0?void 0:te.type){const tt=new j({context:g,type:(zt=x.cornersDotOptions)===null||zt===void 0?void 0:zt.type});g.beginPath(),tt.draw(X+2*O,Y+2*O,T,nt)}else{const tt=new v({context:g,type:x.dotsOptions.type});g.beginPath();for(let lt=0;lt<L.length;lt++)for(let ht=0;ht<L[lt].length;ht++)!((Rt=L[lt])===null||Rt===void 0)&&Rt[ht]&&tt.draw(X+lt*O,Y+ht*O,O,(Tt,yt)=>{var xt;return!!(!((xt=L[lt+Tt])===null||xt===void 0)&&xt[ht+yt])})}if(!((_=x.cornersDotOptions)===null||_===void 0)&&_.gradient){const tt=x.cornersDotOptions.gradient,lt=this._createGradient({context:g,options:tt,additionalRotation:nt,x:X+2*O,y:Y+2*O,size:T});tt.colorStops.forEach(({offset:ht,color:Tt})=>{lt.addColorStop(ht,Tt)}),g.fillStyle=g.strokeStyle=lt}else!((b=x.cornersDotOptions)===null||b===void 0)&&b.color&&(g.fillStyle=g.strokeStyle=x.cornersDotOptions.color);g.fill("evenodd")})}loadImage(){return new Promise((y,g)=>{const x=this._options,S=new Image;if(!x.image)return g("Image is not defined");typeof x.imageOptions.crossOrigin=="string"&&(S.crossOrigin=x.imageOptions.crossOrigin),this._image=S,S.onload=()=>{y()},S.src=x.image})}drawImage({width:y,height:g,count:x,dotSize:S}){const w=this.context;if(!w)throw"canvasContext is not defined";if(!this._image)throw"image is not defined";const O=this._options,k=Math.floor((O.width-x*S)/2),T=Math.floor((O.height-x*S)/2),D=k+O.imageOptions.margin+(x*S-y)/2,$=T+O.imageOptions.margin+(x*S-g)/2,P=y-2*O.imageOptions.margin,K=g-2*O.imageOptions.margin;w.drawImage(this._image,D,$,P<0?0:P,K<0?0:K)}_createGradient({context:y,options:g,additionalRotation:x,x:S,y:w,size:O}){let k;if(g.type===A)k=y.createRadialGradient(S+O/2,w+O/2,0,S+O/2,w+O/2,O/2);else{const T=((g.rotation||0)+x)%(2*Math.PI),D=(T+2*Math.PI)%(2*Math.PI);let $=S+O/2,P=w+O/2,K=S+O/2,nt=w+O/2;D>=0&&D<=.25*Math.PI||D>1.75*Math.PI&&D<=2*Math.PI?($-=O/2,P-=O/2*Math.tan(T),K+=O/2,nt+=O/2*Math.tan(T)):D>.25*Math.PI&&D<=.75*Math.PI?(P-=O/2,$-=O/2/Math.tan(T),nt+=O/2,K+=O/2/Math.tan(T)):D>.75*Math.PI&&D<=1.25*Math.PI?($+=O/2,P+=O/2*Math.tan(T),K-=O/2,nt-=O/2*Math.tan(T)):D>1.25*Math.PI&&D<=1.75*Math.PI&&(P+=O/2,$+=O/2/Math.tan(T),nt-=O/2,K-=O/2/Math.tan(T)),k=y.createLinearGradient(Math.round($),Math.round(P),Math.round(K),Math.round(nt))}return k}}class pt{constructor({svg:y,type:g}){this._svg=y,this._type=g}draw(y,g,x,S){let w;switch(this._type){case h:w=this._drawDot;break;case d:w=this._drawClassy;break;case p:w=this._drawClassyRounded;break;case f:w=this._drawRounded;break;case m:w=this._drawExtraRounded;break;default:w=this._drawSquare}w.call(this,{x:y,y:g,size:x,getNeighbor:S})}_rotateFigure({x:y,y:g,size:x,rotation:S=0,draw:w}){var O;const k=y+x/2,T=g+x/2;w(),(O=this._element)===null||O===void 0||O.setAttribute("transform",`rotate(${180*S/Math.PI},${k},${T})`)}_basicDot(y){const{size:g,x,y:S}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(x+g/2)),this._element.setAttribute("cy",String(S+g/2)),this._element.setAttribute("r",String(g/2))}}))}_basicSquare(y){const{size:g,x,y:S}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(x)),this._element.setAttribute("y",String(S)),this._element.setAttribute("width",String(g)),this._element.setAttribute("height",String(g))}}))}_basicSideRounded(y){const{size:g,x,y:S}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${x} ${S}v ${g}h `+g/2+`a ${g/2} ${g/2}, 0, 0, 0, 0 ${-g}`)}}))}_basicCornerRounded(y){const{size:g,x,y:S}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${x} ${S}v ${g}h ${g}v `+-g/2+`a ${g/2} ${g/2}, 0, 0, 0, ${-g/2} ${-g/2}`)}}))}_basicCornerExtraRounded(y){const{size:g,x,y:S}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${x} ${S}v ${g}h ${g}a ${g} ${g}, 0, 0, 0, ${-g} ${-g}`)}}))}_basicCornersRounded(y){const{size:g,x,y:S}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${x} ${S}v `+g/2+`a ${g/2} ${g/2}, 0, 0, 0, ${g/2} ${g/2}h `+g/2+"v "+-g/2+`a ${g/2} ${g/2}, 0, 0, 0, ${-g/2} ${-g/2}`)}}))}_drawDot({x:y,y:g,size:x}){this._basicDot({x:y,y:g,size:x,rotation:0})}_drawSquare({x:y,y:g,size:x}){this._basicSquare({x:y,y:g,size:x,rotation:0})}_drawRounded({x:y,y:g,size:x,getNeighbor:S}){const w=S?+S(-1,0):0,O=S?+S(1,0):0,k=S?+S(0,-1):0,T=S?+S(0,1):0,D=w+O+k+T;if(D!==0)if(D>2||w&&O||k&&T)this._basicSquare({x:y,y:g,size:x,rotation:0});else{if(D===2){let $=0;return w&&k?$=Math.PI/2:k&&O?$=Math.PI:O&&T&&($=-Math.PI/2),void this._basicCornerRounded({x:y,y:g,size:x,rotation:$})}if(D===1){let $=0;return k?$=Math.PI/2:O?$=Math.PI:T&&($=-Math.PI/2),void this._basicSideRounded({x:y,y:g,size:x,rotation:$})}}else this._basicDot({x:y,y:g,size:x,rotation:0})}_drawExtraRounded({x:y,y:g,size:x,getNeighbor:S}){const w=S?+S(-1,0):0,O=S?+S(1,0):0,k=S?+S(0,-1):0,T=S?+S(0,1):0,D=w+O+k+T;if(D!==0)if(D>2||w&&O||k&&T)this._basicSquare({x:y,y:g,size:x,rotation:0});else{if(D===2){let $=0;return w&&k?$=Math.PI/2:k&&O?$=Math.PI:O&&T&&($=-Math.PI/2),void this._basicCornerExtraRounded({x:y,y:g,size:x,rotation:$})}if(D===1){let $=0;return k?$=Math.PI/2:O?$=Math.PI:T&&($=-Math.PI/2),void this._basicSideRounded({x:y,y:g,size:x,rotation:$})}}else this._basicDot({x:y,y:g,size:x,rotation:0})}_drawClassy({x:y,y:g,size:x,getNeighbor:S}){const w=S?+S(-1,0):0,O=S?+S(1,0):0,k=S?+S(0,-1):0,T=S?+S(0,1):0;w+O+k+T!==0?w||k?O||T?this._basicSquare({x:y,y:g,size:x,rotation:0}):this._basicCornerRounded({x:y,y:g,size:x,rotation:Math.PI/2}):this._basicCornerRounded({x:y,y:g,size:x,rotation:-Math.PI/2}):this._basicCornersRounded({x:y,y:g,size:x,rotation:Math.PI/2})}_drawClassyRounded({x:y,y:g,size:x,getNeighbor:S}){const w=S?+S(-1,0):0,O=S?+S(1,0):0,k=S?+S(0,-1):0,T=S?+S(0,1):0;w+O+k+T!==0?w||k?O||T?this._basicSquare({x:y,y:g,size:x,rotation:0}):this._basicCornerExtraRounded({x:y,y:g,size:x,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:y,y:g,size:x,rotation:-Math.PI/2}):this._basicCornersRounded({x:y,y:g,size:x,rotation:Math.PI/2})}}class ut{constructor({svg:y,type:g}){this._svg=y,this._type=g}draw(y,g,x,S){let w;switch(this._type){case C:w=this._drawSquare;break;case E:w=this._drawExtraRounded;break;default:w=this._drawDot}w.call(this,{x:y,y:g,size:x,rotation:S})}_rotateFigure({x:y,y:g,size:x,rotation:S=0,draw:w}){var O;const k=y+x/2,T=g+x/2;w(),(O=this._element)===null||O===void 0||O.setAttribute("transform",`rotate(${180*S/Math.PI},${k},${T})`)}_basicDot(y){const{size:g,x,y:S}=y,w=g/7;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${x+g/2} ${S}a ${g/2} ${g/2} 0 1 0 0.1 0zm 0 ${w}a ${g/2-w} ${g/2-w} 0 1 1 -0.1 0Z`)}}))}_basicSquare(y){const{size:g,x,y:S}=y,w=g/7;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${x} ${S}v ${g}h ${g}v `+-g+`zM ${x+w} ${S+w}h `+(g-2*w)+"v "+(g-2*w)+"h "+(2*w-g)+"z")}}))}_basicExtraRounded(y){const{size:g,x,y:S}=y,w=g/7;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${x} ${S+2.5*w}v `+2*w+`a ${2.5*w} ${2.5*w}, 0, 0, 0, ${2.5*w} ${2.5*w}h `+2*w+`a ${2.5*w} ${2.5*w}, 0, 0, 0, ${2.5*w} ${2.5*-w}v `+-2*w+`a ${2.5*w} ${2.5*w}, 0, 0, 0, ${2.5*-w} ${2.5*-w}h `+-2*w+`a ${2.5*w} ${2.5*w}, 0, 0, 0, ${2.5*-w} ${2.5*w}M ${x+2.5*w} ${S+w}h `+2*w+`a ${1.5*w} ${1.5*w}, 0, 0, 1, ${1.5*w} ${1.5*w}v `+2*w+`a ${1.5*w} ${1.5*w}, 0, 0, 1, ${1.5*-w} ${1.5*w}h `+-2*w+`a ${1.5*w} ${1.5*w}, 0, 0, 1, ${1.5*-w} ${1.5*-w}v `+-2*w+`a ${1.5*w} ${1.5*w}, 0, 0, 1, ${1.5*w} ${1.5*-w}`)}}))}_drawDot({x:y,y:g,size:x,rotation:S}){this._basicDot({x:y,y:g,size:x,rotation:S})}_drawSquare({x:y,y:g,size:x,rotation:S}){this._basicSquare({x:y,y:g,size:x,rotation:S})}_drawExtraRounded({x:y,y:g,size:x,rotation:S}){this._basicExtraRounded({x:y,y:g,size:x,rotation:S})}}class kt{constructor({svg:y,type:g}){this._svg=y,this._type=g}draw(y,g,x,S){let w;w=this._type===q?this._drawSquare:this._drawDot,w.call(this,{x:y,y:g,size:x,rotation:S})}_rotateFigure({x:y,y:g,size:x,rotation:S=0,draw:w}){var O;const k=y+x/2,T=g+x/2;w(),(O=this._element)===null||O===void 0||O.setAttribute("transform",`rotate(${180*S/Math.PI},${k},${T})`)}_basicDot(y){const{size:g,x,y:S}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(x+g/2)),this._element.setAttribute("cy",String(S+g/2)),this._element.setAttribute("r",String(g/2))}}))}_basicSquare(y){const{size:g,x,y:S}=y;this._rotateFigure(Object.assign(Object.assign({},y),{draw:()=>{this._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(x)),this._element.setAttribute("y",String(S)),this._element.setAttribute("width",String(g)),this._element.setAttribute("height",String(g))}}))}_drawDot({x:y,y:g,size:x,rotation:S}){this._basicDot({x:y,y:g,size:x,rotation:S})}_drawSquare({x:y,y:g,size:x,rotation:S}){this._basicSquare({x:y,y:g,size:x,rotation:S})}}const Dt=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],U=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class V{constructor(y){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(y.width)),this._element.setAttribute("height",String(y.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._style=document.createElementNS("http://www.w3.org/2000/svg","style"),this._options=y}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}clear(){var y;const g=this._element;this._element=g.cloneNode(!1),(y=g?.parentNode)===null||y===void 0||y.replaceChild(this._element,g),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._style=document.createElementNS("http://www.w3.org/2000/svg","style"),this._element.appendChild(this._style),this._element.appendChild(this._defs)}async drawQR(y){const g=y.getModuleCount(),x=Math.min(this._options.width,this._options.height)-2*this._options.margin,S=Math.floor(x/g);let w={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=y,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:O,qrOptions:k}=this._options,T=O.imageSize*u[k.errorCorrectionLevel],D=Math.floor(T*g*g);w=c({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:D,maxHiddenAxisDots:g-14,dotSize:S})}this._element.appendChild(this._style),this._element.appendChild(this._defs),this.clear(),this.drawBackground(),this.drawDots((O,k)=>{var T,D,$,P,K,nt;return!(this._options.imageOptions.hideBackgroundDots&&O>=(g-w.hideXDots)/2&&O<(g+w.hideXDots)/2&&k>=(g-w.hideYDots)/2&&k<(g+w.hideYDots)/2||!((T=Dt[O])===null||T===void 0)&&T[k]||!((D=Dt[O-g+7])===null||D===void 0)&&D[k]||!(($=Dt[O])===null||$===void 0)&&$[k-g+7]||!((P=U[O])===null||P===void 0)&&P[k]||!((K=U[O-g+7])===null||K===void 0)&&K[k]||!((nt=U[O])===null||nt===void 0)&&nt[k-g+7])}),this.drawCorners(),this._options.image&&await this.drawImage({width:w.width,height:w.height,count:g,dotSize:S})}drawBackground(){var y,g,x;const S=this._element,w=this._options;if(S){const O=(y=w.backgroundOptions)===null||y===void 0?void 0:y.gradient,k=(g=w.backgroundOptions)===null||g===void 0?void 0:g.color;O?this._createColor({options:O,color:k,additionalRotation:0,x:0,y:0,height:w.height,width:w.width,name:"background-color"}):!((x=w.backgroundOptions)===null||x===void 0)&&x.color&&this._createStyle({color:k,name:"background-color"})}}drawDots(y){var g,x,S;if(!this._qr)throw"QR code is not defined";const w=this._options,O=this._qr.getModuleCount();if(O>w.width||O>w.height)throw"The canvas is too small.";const k=Math.min(w.width,w.height)-2*w.margin,T=Math.floor(k/O),D=Math.floor((w.width-O*T)/2),$=Math.floor((w.height-O*T)/2),P=new pt({svg:this._element,type:w.dotsOptions.type});!((g=w.dotsOptions)===null||g===void 0)&&g.gradient?(this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(x=w.dotsOptions)===null||x===void 0?void 0:x.gradient,color:w.dotsOptions.color,additionalRotation:0,x:D,y:$,height:O*T,width:O*T,name:"dot-color"})):w.dotsOptions.color&&(this._dots=document.createElementNS("http://www.w3.org/2000/svg","g"),this._dots.setAttribute("class","dot-color"),this._element.appendChild(this._dots),this._createStyle({color:w.dotsOptions.color,name:"dot-color"}));for(let K=0;K<O;K++)for(let nt=0;nt<O;nt++){if(y&&!y(K,nt)||!(!((S=this._qr)===null||S===void 0)&&S.isDark(K,nt)))continue;const dt=this._options.useLegacyDotRotation?D+K*T:$+nt*T,wt=this._options.useLegacyDotRotation?$+nt*T:D+K*T;P.draw(dt,wt,T,(_t,Ot)=>this._options.useLegacyDotRotation?!(K+_t<0||nt+Ot<0||K+_t>=O||nt+Ot>=O)&&!(y&&!y(K+_t,nt+Ot))&&!!this._qr&&this._qr.isDark(K+_t,nt+Ot):!(nt+_t<0||K+Ot<0||nt+_t>=O||K+Ot>=O)&&!(y&&!y(nt+_t,K+Ot))&&!!this._qr&&this._qr.isDark(K+Ot,nt+_t)),P._element&&this._dotsClipPath?this._dotsClipPath.appendChild(P._element):P._element&&this._dots&&this._dots.appendChild(P._element)}}drawCorners(){if(!this._qr)throw"QR code is not defined";const y=this._element,g=this._options;if(!y)throw"Element code is not defined";const x=this._qr.getModuleCount(),S=Math.min(g.width,g.height)-2*g.margin,w=Math.floor(S/x),O=7*w,k=3*w,T=Math.floor((g.width-x*w)/2),D=Math.floor((g.height-x*w)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([$,P,K])=>{var nt,dt,wt,_t,Ot,Zt,te,zt,Rt,_,b,X,Y,tt;const lt=T+$*w*(x-7),ht=D+P*w*(x-7);let Tt=this._dotsClipPath,yt=this._dotsClipPath;if(!((nt=g.cornersSquareOptions)===null||nt===void 0)&&nt.gradient?(Tt=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),Tt.setAttribute("id",`clip-path-corners-square-color-${$}-${P}`),this._defs.appendChild(Tt),this._cornersSquareClipPath=this._cornersDotClipPath=yt=Tt,this._createColor({options:(dt=g.cornersSquareOptions)===null||dt===void 0?void 0:dt.gradient,color:(wt=g.cornersSquareOptions)===null||wt===void 0?void 0:wt.color,additionalRotation:K,x:lt,y:ht,height:O,width:O,name:`corners-square-color-${$}-${P}`})):(this._cornerSquares=document.createElementNS("http://www.w3.org/2000/svg","g"),this._cornerSquares.setAttribute("class",`corners-square-color-${$}-${P}`),this._element.appendChild(this._cornerSquares),this._createStyle({color:(_t=g.cornersSquareOptions)===null||_t===void 0?void 0:_t.color,name:`corners-square-color-${$}-${P}`})),(Ot=g.cornersSquareOptions)===null||Ot===void 0?void 0:Ot.type){const xt=new ut({svg:this._element,type:g.cornersSquareOptions.type});xt.draw(lt,ht,O,K),!((Zt=g.cornersSquareOptions)===null||Zt===void 0)&&Zt.gradient&&xt._element&&Tt?Tt.appendChild(xt._element):xt._element&&this._cornerSquares&&this._cornerSquares.appendChild(xt._element)}else{const xt=new pt({svg:this._element,type:g.dotsOptions.type});for(let Yt=0;Yt<Dt.length;Yt++)for(let Bt=0;Bt<Dt[Yt].length;Bt++)!((te=Dt[Yt])===null||te===void 0)&&te[Bt]&&(xt.draw(lt+Yt*w,ht+Bt*w,w,(It,Qe)=>{var jt;return!!(!((jt=Dt[Yt+It])===null||jt===void 0)&&jt[Bt+Qe])}),xt._element&&this._cornersSquareClipPath?this._cornersSquareClipPath.appendChild(xt._element):xt._element&&this._cornerSquares&&this._cornerSquares.appendChild(xt._element))}if(!((zt=g.cornersDotOptions)===null||zt===void 0)&&zt.gradient?(yt=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),yt.setAttribute("id",`clip-path-corners-dot-color-${$}-${P}`),this._defs.appendChild(yt),this._cornersDotClipPath=yt,this._createColor({options:(Rt=g.cornersDotOptions)===null||Rt===void 0?void 0:Rt.gradient,color:(_=g.cornersDotOptions)===null||_===void 0?void 0:_.color,additionalRotation:K,x:lt+2*w,y:ht+2*w,height:k,width:k,name:`corners-dot-color-${$}-${P}`})):(this._cornerDots=document.createElementNS("http://www.w3.org/2000/svg","g"),this._cornerDots.setAttribute("class",`corners-dot-color-${$}-${P}`),this._element.appendChild(this._cornerDots),this._createStyle({color:(b=g.cornersDotOptions)===null||b===void 0?void 0:b.color,name:`corners-dot-color-${$}-${P}`})),(X=g.cornersDotOptions)===null||X===void 0?void 0:X.type){const xt=new kt({svg:this._element,type:g.cornersDotOptions.type});xt.draw(lt+2*w,ht+2*w,k,K),!((Y=g.cornersDotOptions)===null||Y===void 0)&&Y.gradient&&xt._element&&yt?yt.appendChild(xt._element):xt._element&&this._cornerDots&&this._cornerDots.appendChild(xt._element)}else{const xt=new pt({svg:this._element,type:g.dotsOptions.type});for(let Yt=0;Yt<U.length;Yt++)for(let Bt=0;Bt<U[Yt].length;Bt++)!((tt=U[Yt])===null||tt===void 0)&&tt[Bt]&&(xt.draw(lt+Yt*w,ht+Bt*w,w,(It,Qe)=>{var jt;return!!(!((jt=U[Yt+It])===null||jt===void 0)&&jt[Bt+Qe])}),xt._element&&this._cornersDotClipPath?this._cornersDotClipPath.appendChild(xt._element):xt._element&&this._cornerDots&&this._cornerDots.appendChild(xt._element))}})}loadImage(){return new Promise((y,g)=>{const x=this._options,S=new Image;if(!x.image)return g("Image is not defined");typeof x.imageOptions.crossOrigin=="string"&&(S.crossOrigin=x.imageOptions.crossOrigin),this._image=S,S.onload=()=>{y()},S.src=x.image})}async drawImage({width:y,height:g,count:x,dotSize:S}){const w=this._options,O=Math.floor((w.width-x*S)/2),k=Math.floor((w.height-x*S)/2),T=O+w.imageOptions.margin+(x*S-y)/2,D=k+w.imageOptions.margin+(x*S-g)/2,$=y-2*w.imageOptions.margin,P=g-2*w.imageOptions.margin,K=document.createElementNS("http://www.w3.org/2000/svg","image"),nt=await this._getBase64Image(w.image||"");K.setAttribute("href",nt),K.setAttribute("xlink:href",nt),K.setAttribute("x",String(T)),K.setAttribute("y",String(D)),K.setAttribute("width",`${$}px`),K.setAttribute("height",`${P}px`),this._element.appendChild(K)}async _getImageBlob(y){return(await fetch(y)).blob()}_blobToBase64(y){return new Promise(g=>{const x=new FileReader;x.onload=function(){const S=x.result;g(S)},x.readAsDataURL(y)})}async _getBase64Image(y){if(y==="")return new Promise(x=>{x("")});const g=await this._getImageBlob(y);return await this._blobToBase64(g)}_createColor({options:y,color:g,additionalRotation:x,x:S,y:w,height:O,width:k,name:T}){const D=k>O?k:O,$=document.createElementNS("http://www.w3.org/2000/svg","rect");if($.setAttribute("x",String(S)),$.setAttribute("y",String(w)),$.setAttribute("height",String(O)),$.setAttribute("width",String(k)),$.setAttribute("clip-path",`url('#clip-path-${T}')`),y){let P;if(y.type===A)P=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),P.setAttribute("id",T),P.setAttribute("gradientUnits","userSpaceOnUse"),P.setAttribute("fx",String(S+k/2)),P.setAttribute("fy",String(w+O/2)),P.setAttribute("cx",String(S+k/2)),P.setAttribute("cy",String(w+O/2)),P.setAttribute("r",String(D/2));else{const K=((y.rotation||0)+x)%(2*Math.PI),nt=(K+2*Math.PI)%(2*Math.PI);let dt=S+k/2,wt=w+O/2,_t=S+k/2,Ot=w+O/2;nt>=0&&nt<=.25*Math.PI||nt>1.75*Math.PI&&nt<=2*Math.PI?(dt-=k/2,wt-=O/2*Math.tan(K),_t+=k/2,Ot+=O/2*Math.tan(K)):nt>.25*Math.PI&&nt<=.75*Math.PI?(wt-=O/2,dt-=k/2/Math.tan(K),Ot+=O/2,_t+=k/2/Math.tan(K)):nt>.75*Math.PI&&nt<=1.25*Math.PI?(dt+=k/2,wt+=O/2*Math.tan(K),_t-=k/2,Ot-=O/2*Math.tan(K)):nt>1.25*Math.PI&&nt<=1.75*Math.PI&&(wt+=O/2,dt+=k/2/Math.tan(K),Ot-=O/2,_t-=k/2/Math.tan(K)),P=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),P.setAttribute("id",T),P.setAttribute("gradientUnits","userSpaceOnUse"),P.setAttribute("x1",String(Math.round(dt))),P.setAttribute("y1",String(Math.round(wt))),P.setAttribute("x2",String(Math.round(_t))),P.setAttribute("y2",String(Math.round(Ot)))}y.colorStops.forEach(({offset:K,color:nt})=>{const dt=document.createElementNS("http://www.w3.org/2000/svg","stop");dt.setAttribute("offset",100*K+"%"),dt.setAttribute("stop-color",nt),P.appendChild(dt)}),$.setAttribute("fill",`url('#${T}')`),this._defs.appendChild(P)}else g&&$.setAttribute("fill",g);this._element.appendChild($)}_createStyle({color:y,name:g}){this._style.innerHTML+=`.${g}{ fill: ${y}; }`}}const W="canvas",H={};for(let mt=0;mt<=40;mt++)H[mt]=mt;const z={type:W,width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:H[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:"anonymous",margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{color:"#fff"},useLegacyDotRotation:!1};function G(mt){const y=Object.assign({},mt);if(!y.colorStops||!y.colorStops.length)throw"Field 'colorStops' is required in gradient";return y.rotation?y.rotation=Number(y.rotation):y.rotation=0,y.colorStops=y.colorStops.map(g=>Object.assign(Object.assign({},g),{offset:Number(g.offset)})),y}function st(mt){const y=Object.assign({},mt);return y.width=Number(y.width),y.height=Number(y.height),y.margin=Number(y.margin),y.imageOptions=Object.assign(Object.assign({},y.imageOptions),{hideBackgroundDots:!!y.imageOptions.hideBackgroundDots,imageSize:Number(y.imageOptions.imageSize),margin:Number(y.imageOptions.margin)}),y.margin>Math.min(y.width,y.height)&&(y.margin=Math.min(y.width,y.height)),y.dotsOptions=Object.assign({},y.dotsOptions),y.dotsOptions.gradient&&(y.dotsOptions.gradient=G(y.dotsOptions.gradient)),y.cornersSquareOptions&&(y.cornersSquareOptions=Object.assign({},y.cornersSquareOptions),y.cornersSquareOptions.gradient&&(y.cornersSquareOptions.gradient=G(y.cornersSquareOptions.gradient))),y.cornersDotOptions&&(y.cornersDotOptions=Object.assign({},y.cornersDotOptions),y.cornersDotOptions.gradient&&(y.cornersDotOptions.gradient=G(y.cornersDotOptions.gradient))),y.backgroundOptions&&(y.backgroundOptions=Object.assign({},y.backgroundOptions),y.backgroundOptions.gradient&&(y.backgroundOptions.gradient=G(y.backgroundOptions.gradient))),y}var Z=r(192),ct=r.n(Z);class Nt{constructor(y){this._options=y?st(a(z,y)):z,this.update()}static _clearContainer(y){y&&(y.innerHTML="")}async _getQRStylingElement(y){if(!this._qr)throw"QR code is empty";if(y.toLowerCase()==="svg"){let g,x;return this._svg&&this._svgDrawingPromise?(x=this._svg,g=this._svgDrawingPromise):(x=new V(this._options),g=x.drawQR(this._qr)),await g,x}{let g,x;return this._canvas&&this._canvasDrawingPromise?(x=this._canvas,g=this._canvasDrawingPromise):(x=new rt(this._options),g=x.drawQR(this._qr)),await g,x}}update(y){Nt._clearContainer(this._container),this._options=y?st(a(this._options,y)):this._options,this._options.data&&(this._qr=ct()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(g){switch(!0){case/^[0-9]*$/.test(g):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(g):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===W?(this._canvas=new rt(this._options),this._canvasDrawingPromise=this._canvas.drawQR(this._qr),this._svgDrawingPromise=void 0,this._svg=void 0):(this._svg=new V(this._options),this._svgDrawingPromise=this._svg.drawQR(this._qr),this._canvasDrawingPromise=void 0,this._canvas=void 0),this.append(this._container))}append(y){if(y){if(typeof y.appendChild!="function")throw"Container should be a single DOM node";this._options.type===W?this._canvas&&y.appendChild(this._canvas.getCanvas()):this._svg&&y.appendChild(this._svg.getElement()),this._container=y}}async getRawData(y="png",g){if(!this._qr)throw"QR code is empty";const x=y.toLocaleLowerCase();if(x==="svg"){const S=await this._getQRStylingElement(x),w=new XMLSerializer().serializeToString(S.getElement());return new Blob([`<?xml version="1.0" standalone="no"?>\r
`+w],{type:"image/svg+xml"})}{const S=await this._getQRStylingElement(x);return new Promise(w=>S.getCanvas().toBlob(w,`image/${x}`,g))}}async toDataUrl(y="png",g){if(!this._qr)throw"QR code is empty";const x=y.toLocaleLowerCase();return(await this._getQRStylingElement(x)).getCanvas().toDataURL(`image/${x}`,g)}async download(y){if(!this._qr)throw"QR code is empty";let g="png",x="qr";typeof y=="object"&&y!==null&&(y.name&&(x=y.name),y.extension&&(g=y.extension));const S=g.toLocaleLowerCase();if(S==="svg"){const w=await this._getQRStylingElement(S);let O=new XMLSerializer().serializeToString(w.getElement());O=`<?xml version="1.0" standalone="no"?>\r
`+O,l("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(O),`${x}.svg`)}else l((await this._getQRStylingElement(S)).getCanvas().toDataURL(`image/${g}`),`${x}.${g}`)}}const Wt=Nt})(),s.default})())})(CF);const OF=tm(Mu);const AF=()=>{const n=document.createElement("a");return sr(()=>{window.location.hash=Ju();const t=qm(),e=`${document.location.protocol}//${document.location.host}/favicon.png`;n.className="qr",n.href=t;const i=new OF({type:"svg",data:t,image:e,dotsOptions:{color:"#555",type:"rounded"},backgroundOptions:{color:"#FFF"},imageOptions:{margin:3}});for(;n.firstChild;)n.removeChild(n.firstChild);i.append(n)}),n},TF=/^[a-zA-Z0-9.!#$%&*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,EF=n=>n&&n.match(TF),$F=/^\+[0-9]+(\([0-9]+\)|-[0-9]+-)[0-9]+(-[0-9]+)*$/,PF=n=>n&&n.match($F),DF=St("<footer><details open><summary><h5>About me</h5></summary></details></footer>",8),IF=St('<article class="person"><header><hgroup><h1></h1><h2></h2></hgroup></header><div class="person-card-body"><section></section><aside></aside></div></article>',16),NF=St('<a target="_blank"></a>',2),zg=St("<a></a>",2),LF=()=>(()=>{const n=IF.cloneNode(!0),t=n.firstChild,e=t.firstChild,i=e.firstChild,r=i.nextSibling,s=t.nextSibling,o=s.firstChild,a=o.nextSibling;return J(i,I(Ue,{path:"person.name"})),J(r,I(Ue,{path:"person.title"})),J(o,I(Ue,{path:"person.location",children:l=>I(Qi,{style:{"padding-bottom":"1em"},get children(){return[I(De,{name:"my_location"}),(()=>{const c=NF.cloneNode(!0);return J(c,l),Oe(()=>Cr(c,"href",`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(l)}`)),c})()]}})}),null),J(o,I(Ta,{path:"person.contacts",children:l=>I(Ue,Un({path:l},{children:c=>I(Kr,{fallback:c,get children(){return[I(Je,{get when(){return EF(c)},get children(){return[I(De,{name:"mail"}),(()=>{const u=zg.cloneNode(!0);return Cr(u,"href",`mailto:${c}?subject=RE:%20Curriculum%20Vitae`),J(u,c),u})()]}}),I(Je,{get when(){return PF(c)},get children(){return[I(De,{name:"call"}),(()=>{const u=zg.cloneNode(!0);return J(u,c),Oe(()=>Cr(u,"href",`tel:${RF(c)}`)),u})()]}})]}})}))}),null),J(o,I(Ta,{path:"person.documents",children:l=>I(Ue,Un({path:l},{children:c=>I(Qi,{get children(){return[I(De,{name:"file_present"}),c]}})}))}),null),J(a,I(AF,{})),J(n,I(Ce,{get when(){return Mt.store.person.description||fe.get()==="edit"},get children(){const l=DF.cloneNode(!0),c=l.firstChild;return c.firstChild,J(c,I(Ue,{path:"person.description",multiline:!0}),null),l}}),null),n})(),RF=n=>n.replace(/[()-]/g,""),zF=St('<main class="container"></main>',2),BF=()=>(()=>{const n=zF.cloneNode(!0);return J(n,I(LF,{}),null),J(n,I(MF,{}),null),n})(),FF=St('<main aria-busy="true"></main>',2),jF=()=>{const[n]=a1(async()=>{const t=await fetch("data.json");try{const e=await t.json();Mt.init(e),e.title&&(document.title=e.title)}catch{}return!0});return I(Ce,{get when(){return n()},get fallback(){return I(HF,{})},get children(){return[I(lE,{}),I(BF,{}),I(_E,{})]}})},HF=()=>(()=>{const n=FF.cloneNode(!0);return n.style.setProperty("position","absolute"),n.style.setProperty("left","0"),n.style.setProperty("right","0"),n.style.setProperty("top","0"),n.style.setProperty("bottom","0"),n.style.setProperty("display","flex"),n.style.setProperty("justify-content","center"),n.style.setProperty("align-items","center"),n})();window.onkeydown=n=>{n.ctrlKey&&n.key==="s"&&(n.preventDefault(),document.getSelection())};Yg(jF,document.body);
